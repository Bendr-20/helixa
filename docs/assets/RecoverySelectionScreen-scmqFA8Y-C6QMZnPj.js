import{j as e}from"./vendor-wallet-iWeBopzN.js";import{F as b}from"./LockClosedIcon-B9wwPnAl.js";import{r as c}from"./vendor-react-NLnOsXgy.js";import{T as R,u as O,F as E,m as I}from"./ModalHeader-D8-mhjp4-Dxdlklkv.js";import{a as P,b as M,r as W,I as $,bz as L,bm as l,cy as B,c as D}from"./index-BSImDVXz.js";import{o as m}from"./ScreenHeader-CHmc4-Lu-ddFLjcQ9.js";import{o as G,d as U,e as H,p as Y}from"./styles-BsotlekN-B_C7bJ9T.js";function q({title:o,titleId:s,...n},a){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),o?c.createElement("title",{id:s},o):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const T=c.forwardRef(q);let d=D.div`
  width: 24px;
  height: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
`,V={"google-drive":"Google Drive",icloud:"iCloud","user-passcode":"password",privy:"Privy","privy-v2":"Privy"},z=({onClose:o})=>e.jsxs(Y,{children:[e.jsx(m,{title:"Why do I need to secure my account?",icon:e.jsx(E,{width:48}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Your app uses cryptography to secure your account. App secrets are split and encrypted so only you can access them."}),e.jsx("p",{children:"To use this app on new devices, secure account secrets using a password, your Google or your Apple account. It’s important you don’t lose access to the method you choose."})]})}),e.jsx(I,{onClick:o,children:"Select backup method"})]});const ee={component:()=>{let[o,s]=c.useState(!1),{navigate:n,lastScreen:a,navigateBack:v,setModalData:x,data:i,onUserCloseViaDialogOrKeybindRef:g}=P(),{user:j}=M(),{embeddedWallets:f}=W(),{closePrivyModal:w}=$(),t=L(j),u=t===null,{isInAccountCreateFlow:C,isResettingPassword:S,shouldCreateEth:k,shouldCreateSol:A}=i.recoverySelection,p=t&&t.recoveryMethod!=="privy",F=p?e.jsxs("span",{children:["Your account is currently secured using"," ",e.jsx("strong",{children:V[t?.recoveryMethod||"user-passcode"]}),"."]}):"Select a method for logging in on new devices and recovering your account.";function h(r){x({recoveryOAuthStatus:{provider:r,action:u?"create-wallet":"set-recovery",isInAccountCreateFlow:C,shouldCreateEth:k,shouldCreateSol:A}}),n("RecoveryOAuthScreen")}function y(){i?.setWalletPassword?.onFailure(Error("User exited set recovery flow")),w({shouldCallAuthOnSuccess:i?.setWalletPassword?.callAuthOnSuccessOnClose??!1})}return g.current=y,e.jsxs(e.Fragment,{children:[e.jsx(R,{onClose:y,backFn:o?()=>s(!1):a?v:void 0,infoFn:a||o?void 0:()=>s(!0)},"header"),o?e.jsx(z,{onClose:()=>s(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(m,{title:p?"Update backup method":"Secure your account",icon:e.jsx(b,{width:48}),description:F}),e.jsx(G,{children:f.userOwnedRecoveryOptions.filter((r=>!["icloud","google-drive"].includes(t?.recoveryMethod||"")||r!==t?.recoveryMethod)).sort().map((r=>{switch(r){case"google-drive":return e.jsxs(l,{onClick:()=>h("google-drive"),children:[e.jsx(d,{children:e.jsx(H,{style:{width:18}})}),"Back up to Google Drive"]},r);case"icloud":return e.jsxs(l,{onClick:()=>h("icloud"),children:[e.jsx(d,{children:e.jsx(U,{style:{width:24}})}),"Back up to Apple iCloud"]},r);case"user-passcode":return e.jsxs(l,{onClick:()=>{n(B({isCreatingWallet:u,skipSplashScreen:!0}))},children:[e.jsx(d,{children:e.jsx(T,{style:{width:18}})}),S?"Reset your":"Set a"," password"]},r);default:return null}}))})]}),e.jsx(O,{})]})}};export{ee as RecoverySelectionScreen,ee as default};
