import{j as l}from"./vendor-wallet-iWeBopzN.js";import{r as z}from"./vendor-react-NLnOsXgy.js";import{T as Z,u as P}from"./ModalHeader-D8-mhjp4-BNY9bCNG.js";import{o as ee}from"./ScreenHeader-CHmc4-Lu-ChiEZQiO.js";import{t as ne}from"./FundWalletMethodHeader-Cfci4-83-DP23fKT_.js";import{n as A}from"./Chip-D2-wZOHJ-BeLbFBvD.js";import{r as le}from"./Subtitle-CV-2yKE4-Oo2KP3f2.js";import{I as Q,a as V,r as te,n as ae,c7 as oe,cL as ie,cM as ce,cN as H,bj as X,bd as re,O as se,cO as pe,ar as G,aM as de,cP as ye,c as R}from"./index-Diya_G0p.js";import{l as ue}from"./WalletOverflowButton-BlijhJnI-CeA2FFD6.js";import{i as me}from"./InjectedWalletIcon-DLcYOGDj-5VUxgLWA.js";import{n as we}from"./styles-BmZHuqSX-ElyOXXqc.js";import"./LoadingSkeleton-U6-3yFwI-C4uPFQgw.js";import"./createLucideIcon-4wkIQryq.js";import"./WalletIcon-BrbXK2eY.js";import"./LinkPasskeyScreen-OxaghvUl-C9Z9OkGm.js";import"./TodoList-CgrU7uwu-BxqxkfsX.js";import"./check-B9ysh8c4.js";import"./ScreenLayout-DTmQLGPf-DErvu8wI.js";import"./Screen-Bp-TN9gb-OY6nMT-L.js";import"./index-Dq_xe9dz-Buz9mbX4.js";import"./circle-check-big-YWHND4yl.js";import"./fingerprint-pattern-ONAhdVhn.js";const y=({provider:u,displayName:v,logo:g,connectOnly:o,connector:c})=>{let S,{navigate:f,setModalData:F}=V(),{connectWallet:M}=Q(),$=re(),b=se(u),C=c.connectorType==="wallet_connect_v2"?u:c.walletClientType,W=window.matchMedia("(display-mode: standalone)").matches,x=pe({connectorType:c.connectorType,walletClientType:C});S=x&&x.chainTypes.includes(c.chainType)?()=>{x.isInstalled||c.chainType==="solana"&&"isInstalled"in c&&c.isInstalled?(M(c,C),f(o?"ConnectOnlyStatusScreen":"ConnectionStatusScreen")):G.isMobile?(F({installWalletModalData:{walletConfig:x,chainType:c.chainType,connectOnly:o}}),f("WalletInterstitialScreen")):(F({installWalletModalData:{walletConfig:x,chainType:c.chainType,connectOnly:o}}),f("InstallWalletScreen"))}:c.connectorType!=="coinbase_wallet"||c.coinbaseWalletConfig.preference?.options!=="eoaOnly"||!G.isMobile||W||de()?()=>{(!ye(window.navigator.userAgent)||event?.isTrusted)&&(M(c,C),o?c.connectorType==="wallet_connect_v2"?(F((B=>({...B,externalConnectWallet:{...B?.externalConnectWallet,preSelectedWalletId:"wallet_connect_qr"}}))),f("ConnectOnlyLandingScreen")):f("ConnectOnlyStatusScreen"):f("ConnectionStatusScreen"))}:()=>{window.location.href=`https://go.cb-w.com/dapp?cb_url=${encodeURI(window.location.href)}`};let _=v||b?.metadata?.shortName||b?.name||c.walletClientType;return l.jsxs(he,{onClick:S,children:[l.jsx(me,{icon:g||b?.image_url?.md,name:_}),l.jsx("span",{children:_}),l.jsxs(fe,{id:"chip-container",children:[$?.walletClientType===C&&$?.chainType===c.chainType?l.jsx(J,{color:"gray",children:"Recent"}):l.jsx("span",{id:"connect-text",children:"Connect"}),c.chainType==="solana"&&l.jsx(J,{color:"gray",children:"Solana"})]})]})};let he=R(X)`
  /* Wallet name text color */
  > span {
    color: var(--privy-color-foreground);
  }

  /* Show "Connect" on hover */
  > #chip-container > #connect-text {
    font-weight: 500;
    color: var(--privy-color-accent);
    opacity: 0;
    transition: opacity 0.1s ease-out;
  }

  :hover > #chip-container > #connect-text {
    opacity: 1;
  }

  @media (max-width: 440px) {
    > #chip-container > #connect-text {
      display: none;
    }
  }
`,J=R(A)`
  margin-left: auto;
`,fe=R.div`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-left: auto;
`;const Te=["coinbase_wallet","base_account"];let ge=["metamask","okx_wallet","rainbow","uniswap","bybit_wallet","ronin_wallet","haha_wallet","uniswap_extension","zerion","rabby_wallet","cryptocom","binance","kraken_wallet"];const Ce=["safe"],xe=["phantom","backpack","solflare","jupiter","universal_profile"],Pe={component:()=>{let u,{connectors:v}=Q(),{setModalData:g,data:o,navigate:c}=V(),S=te(),{wallets:f}=ae(),F=v.filter(oe).flatMap((e=>e.wallets)),[M,$]=z.useState("default"),b=o?.funding?.chainType==="solana",C=!!o?.funding?.crossChainBridgingEnabled;u=o?.funding?.chainType==="ethereum"?o.funding.erc20Address&&!o.funding.isUSDC?"ethereum-only":C&&!o.funding.chain.testnet?"ethereum-and-solana":"ethereum-only":C&&!o.funding?.isUSDC?"ethereum-and-solana":"solana-only";let W=f.filter((e=>e.walletClientType!=="privy")),x=W.map((e=>e.walletClientType)),_=F.filter((e=>e.walletClientType!=="privy")),B=_.map((e=>e.walletClientType)),T=[],k={...o.funding};k.usingDefaultFundingMethod&&(k.usingDefaultFundingMethod=!1);let U=({wallet:e,walletChainType:a})=>{g({...o,funding:{...k,connectedWallet:e,onContinueWithExternalWallet:()=>c(q({destChainType:b?"solana":"ethereum",sourceChainType:a}))},solanaFundingData:o?.solanaFundingData?{...o.solanaFundingData,sourceWalletData:{address:e.address,walletClientType:e.walletClientType}}:void 0}),c("FundingAmountEditScreen")};u!=="solana-only"&&T.push(...W.map(((e,a)=>l.jsx(K,{onClick:()=>U({wallet:e,walletChainType:"ethereum"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},a)))),u!=="ethereum-only"&&T.push(..._.map(((e,a)=>l.jsx(K,{onClick:()=>U({wallet:e,walletChainType:"solana"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},a)))),T.push(...(({walletList:e,walletChainType:a,connectors:I,connectOnly:p,ignore:O,walletConnectEnabled:j,forceWallet:E})=>{let m=[],N=[],L=[],w=I.filter((d=>a==="ethereum-only"?d.chainType==="ethereum":a!=="solana-only"||d.chainType==="solana")),D=w.find((d=>d.connectorType==="wallet_connect_v2"));for(let[d,n]of(E?[E.wallet]:e).entries()){if(n==="detected_ethereum_wallets")for(let[i,t]of w.filter((({chainType:r,connectorType:s,walletClientType:h})=>r!=="solana"&&(h==="uniswap_wallet_extension"||h==="uniswap_extension"?!O.includes("uniswap"):h==="crypto.com_wallet_extension"||h==="crypto.com_onchain"?!O.includes("cryptocom"):s==="injected"&&!O.includes(h)))).entries()){let{walletClientType:r,walletBranding:s,chainType:h}=t;(r==="unknown"?N:m).push(l.jsx(y,{connectOnly:p,provider:r,logo:s.icon,displayName:s.name,connector:t},`${d}-${n}-${r}-${h}-${i}`))}if(n==="detected_solana_wallets")for(let[i,t]of w.filter((({chainType:r,walletClientType:s})=>{if(r==="solana")return a!=="ethereum-only"&&!O.includes(s)})).entries()){let{walletClientType:r,walletBranding:s,chainType:h}=t;(r==="unknown"?N:m).push(l.jsx(y,{connectOnly:p,provider:r,logo:s.icon,displayName:s.name,connector:t},`${d}-${n}-${r}-${h}-${i}`))}if(xe.includes(n)){let i=w.find((t=>t.connectorType==="injected"&&t.walletClientType===n||t.connectorType===n));if(i&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:i},`${d}-${n}`)),a==="solana-only"||a==="ethereum-and-solana"){let t=w.find((({chainType:r,walletClientType:s})=>r==="solana"&&s===n));t&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:t},`${n}-solana`))}}else if(ge.includes(n)){let i=w.find((t=>n==="uniswap"?t.walletClientType==="uniswap_wallet_extension"||t.walletClientType==="uniswap_extension":n==="cryptocom"?t.walletClientType==="crypto.com_wallet_extension"||t.walletClientType==="crypto.com_onchain":t.connectorType==="injected"&&t.walletClientType===n));if(j&&!i&&(i=D),i&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:i,logo:i.connectorType==="injected"?i.walletBranding.icon:void 0,displayName:i.connectorType==="injected"?i.walletBranding.name:void 0},`${d}-${n}`)),a==="solana-only"||a==="ethereum-and-solana"){let t=w.find((({chainType:r,walletClientType:s})=>r==="solana"&&s===n));t&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:t},`${n}-solana`))}}else if(Te.includes(n)){let i=w.find((({connectorType:t})=>t===n));i&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:i,displayName:i.walletClientType==="coinbase_wallet"?"Coinbase":"Base",logo:i.walletClientType==="coinbase_wallet"?ie:ce},`${d}-${n}`))}else if(Ce.includes(n))D&&L.push(l.jsx(y,{connectOnly:p,provider:n,connector:D},`${d}-${n}`));else if(n==="wallet_connect")D&&L.push(l.jsx(y,{connectOnly:p,provider:n,connector:D,logo:D.walletBranding.icon,displayName:"WalletConnect"},`${d}-${n}`));else if(n===E?.wallet){let i=E.chainType==="ethereum"&&e.includes("detected_ethereum_wallets"),t=E.chainType==="solana"&&e.includes("detected_solana_wallets");if(i||t){let r=w.find((({walletClientType:s})=>s===n));r&&m.push(l.jsx(y,{connectOnly:p,provider:n,displayName:r.walletBranding?.name,logo:r.walletBranding?.icon,connector:r},`${d}-${n}`))}}}return[...N,...m,...L]})({walletList:S.appearance.walletList.filter((e=>!W.some((a=>a.walletClientType===e))&&!_.some((a=>a.walletClientType===e)))),walletChainType:u,connectors:v,connectOnly:!0,ignore:[...S.appearance.walletList,...x,...B],walletConnectEnabled:S.externalWallets.walletConnect.enabled}));let Y=l.jsx(ue,{text:"More wallets",onClick:()=>$("overflow")}),q=({sourceChainType:e,destChainType:a})=>e==="ethereum"&&a==="solana"?"AwaitingEvmToSolBridgingScreen":e==="ethereum"&&a==="ethereum"?"AwaitingExternalEthereumTransferScreen":e==="solana"&&a==="ethereum"?"AwaitingSolToEvmBridgingScreen":k.externalSolanaFundingScreen;return z.useEffect((()=>{g({...o,externalConnectWallet:{onCompleteNavigateTo:({address:e,walletClientType:a,walletChainType:I})=>{let p=I??"ethereum",O=p==="ethereum"?W.find((j=>j.address===e&&j.walletClientType===a)):_.find((j=>j.address===e&&j.walletClientType===a));return g({...o,funding:{...k,connectedWallet:O,onContinueWithExternalWallet:()=>{c(q({destChainType:b?"solana":"ethereum",sourceChainType:p}))}},solanaFundingData:o?.solanaFundingData?{...o.solanaFundingData,sourceWalletData:{address:e||"",walletClientType:a||""}}:void 0}),"FundingAmountEditScreen"}}})}),[]),l.jsxs(l.Fragment,M==="overflow"?{children:[l.jsx(Z,{backFn:()=>$("default")},"header"),l.jsxs(H,{children:[l.jsx(le,{style:{color:"var(--privy-color-foreground-3)",textAlign:"left"},children:"More wallets"}),T]}),l.jsx(P,{})]}:{children:[l.jsx(ne,{}),l.jsx(ee,{title:"Transfer from wallet",description:"Connect a wallet to deposit funds or send funds manually to your wallet address."}),l.jsxs(H,{children:[T.length>4?T.slice(0,3):T,T.length>4&&Y]}),l.jsx(P,{})]})}};let K=({onClick:u,icon:v,name:g,chainType:o})=>l.jsxs(X,{onClick:u,children:[l.jsx(we,{style:{width:20},children:l.jsx("img",{src:v})}),g,l.jsx(A,{color:"gray",style:{marginLeft:"auto"},children:"Connected"}),o==="solana"&&l.jsx(A,{color:"gray",children:"Solana"})]});export{Pe as TransferFromWalletScreen,Pe as default};
