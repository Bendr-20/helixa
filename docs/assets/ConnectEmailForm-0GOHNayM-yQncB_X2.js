import{j as e}from"./vendor-wallet-iWeBopzN.js";import{r as i}from"./vendor-react-NLnOsXgy.js";import{b as A,I as P,a as T,aA as I,bb as L,r as M,i as D,E as U,bn as $,c as R,aZ as N}from"./index-BgfVDz5U.js";import{V as W,m as F}from"./ModalHeader-D8-mhjp4-DX69jG8H.js";import{n as V}from"./Chip-D2-wZOHJ-DhFFw7NR.js";import{t as _,a as q}from"./EmailInputForm-Dgoii4vf-rG8hFZQ8.js";import{e as K}from"./ErrorMessage-D8VaAP5m-DvQdupbN.js";import{M as O}from"./mail-C8WLTF0W.js";const re=i.forwardRef(((n,S)=>{let[a,x]=i.useState(n.defaultValue||""),[t,u]=i.useState(""),[o,p]=i.useState(!1),{authenticated:b}=A(),{initLoginWithEmail:g}=P(),{navigate:s,setModalData:c,currentScreen:E,data:l}=T(),{enabled:y,token:h}=I(),[j,k]=i.useState(!1),{accountType:v}=L(),w=M();i.useEffect((()=>{!a&&w.disablePlusEmails&&l?.inlineError?.error instanceof D&&l?.inlineError?.error.privyErrorCode===U.DISALLOWED_PLUS_EMAIL&&!t&&u("Please enter a valid email address without a '+'."),t&&u("")}),[a]);let C=$(a),f=o||!C,d=()=>{var r;c({login:l?.login,inlineError:void 0}),!y||h||b?(r=h,p(!0),g({email:a,captchaToken:r,disableSignup:l?.login?.disableSignup,withPrivyUi:!0}).then((()=>{s("AwaitingPasswordlessCodeScreen")})).catch((m=>{c({errorModalData:{error:m,previousScreen:E||"LandingScreen"}}),s("ErrorScreen")})).finally((()=>{p(!1)}))):(c({captchaModalData:{callback:m=>g({email:a,captchaToken:m,withPrivyUi:!0}),userIntentRequired:!1,onSuccessNavigateTo:"AwaitingPasswordlessCodeScreen",onErrorNavigateTo:"ErrorScreen"}}),s("CaptchaScreen"))};return e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[t&&e.jsx(K,{style:{display:"block",marginTop:"0.25rem",textAlign:"left"},children:t}),e.jsxs(H,{stacked:n.stacked,$error:!!t,children:[e.jsx(Z,{children:e.jsx(O,{})}),e.jsx("input",{ref:S,id:"email-input",className:"login-method-button",type:"email",placeholder:"your@email.com",onFocus:()=>k(!0),onChange:r=>x(r.target.value),onKeyUp:r=>{r.key==="Enter"&&d()},value:a,autoComplete:"email"}),v!=="email"||j?n.stacked?e.jsx("span",{}):e.jsx(W,{isSubmitting:o,onClick:d,disabled:f,children:"Submit"}):e.jsx(V,{color:"gray",children:"Recent"})]})]}),n.stacked?e.jsx(F,{loadingText:null,loading:o,disabled:f,onClick:d,style:{width:"100%"},children:"Submit"}):null]})}));let B=_,H=q,Z=R(N)`
  display: inline-flex;
`;export{re as C};
