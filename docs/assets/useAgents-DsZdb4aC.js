import{L as s}from"./vendor-wallet-D7zZuXzx.js";import{a as i}from"./index-DkeEffms.js";function u(e){return{id:e.tokenId??e.id,tokenId:e.tokenId??e.id,name:e.name||`Agent #${e.tokenId??e.id}`,framework:e.framework||"unknown",mintedAt:e.mintedAt?new Date(e.mintedAt).getTime()/1e3:0,verified:e.verified||!1,soulbound:e.soulbound||!1,generation:e.generation||0,mutationCount:e.mutationCount||0,owner:e.owner||"",points:e.points||0,traits:e.traits||[],traitCount:e.traitCount||e.traits?.length||0,personality:e.personality||null,narrative:e.narrative||null,credScore:e.credScore||0,mintOrigin:e.mintOrigin||"UNKNOWN",agentAddress:e.agentAddress||"",agentName:e.agentName||null,ethosScore:e.ethosScore||null,linkedToken:e.linkedToken||null}}function a(){return s({queryKey:["v2-agents"],queryFn:async()=>{const e=await fetch(`${i}/api/v2/agents`);if(!e.ok)throw new Error("Failed to fetch agents");const n=await e.json();return{total:n.total||n.agents?.length||0,agents:(n.agents||[]).map(u)}},staleTime:3e4,refetchInterval:6e4})}function d(){return s({queryKey:["v2-stats"],queryFn:async()=>{const e=await fetch(`${i}/api/v2/stats`);if(!e.ok)throw new Error("Failed to fetch stats");return e.json()},staleTime:3e4,refetchInterval:6e4})}function g(e){return s({queryKey:["v2-agent",e],queryFn:async()=>{const n=await fetch(`${i}/api/v2/agent/${e}`);if(!n.ok)throw new Error("Agent not found");return u(await n.json())},enabled:e!==void 0,staleTime:15e3})}function f(){const{data:e,...n}=a();return{...n,data:e?.agents}}function m(e=6){const{data:n,...o}=a();return{...o,data:n?.agents?.filter(t=>t.name&&t.name.length>0).sort((t,r)=>r.credScore-t.credScore).slice(0,e)}}function y(){const{data:e,...n}=d(),{data:o}=a();return{...n,data:e?{totalAgents:e.totalAgents||0,totalCredScore:o?.agents?.reduce((t,r)=>t+r.credScore,0)||0,frameworks:o?.agents?new Set(o.agents.map(t=>t.framework).filter(Boolean)).size:0,soulboundCount:o?.agents?.filter(t=>t.soulbound).length||0,mintPrice:e.mintPrice||"0",gasBalance:e.gasBalance||"0"}:void 0}}function A(e){const{data:n,...o}=a();return{...o,data:e?n?.agents.filter(t=>t.owner.toLowerCase()===e.toLowerCase()):void 0}}function v(e){const{data:n,...o}=a();return{...o,data:n?.agents.filter(t=>!(e.search&&!t.name.toLowerCase().includes(e.search.toLowerCase())||e.framework&&t.framework!==e.framework||e.soulbound!==void 0&&t.soulbound!==e.soulbound||e.verified!==void 0&&t.verified!==e.verified||e.mintOrigin&&t.mintOrigin!==e.mintOrigin))}}export{y as a,v as b,g as c,f as d,A as e,m as u};
