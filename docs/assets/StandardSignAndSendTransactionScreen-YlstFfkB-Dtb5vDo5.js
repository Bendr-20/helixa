import{j as p}from"./vendor-wallet-iWeBopzN.js";import{r as I}from"./vendor-react-NLnOsXgy.js";import{cE as Q,cF as ot,cG as st,cH as ct,a as dt,I as lt,r as ut,b as pt,bI as mt,bz as ft,bW as gt,cI as Z,bD as ht,bn as yt,c as tt,bO as wt,b_ as bt,c0 as kt,cJ as At}from"./index-sGJYFaSd.js";import{t as xt}from"./useGetSolPrice-DwwjjGbd-BlOrP3fl.js";import{ErrorScreenView as St}from"./ErrorScreen-DtGc3Chy-D7PsekO9.js";import{F as vt}from"./CheckCircleIcon-DANTQeuo.js";import{T as It,u as Ot,m as Tt}from"./ModalHeader-D8-mhjp4-XA-NU1Gv.js";import{s as $t}from"./Layouts-BlFm53ED-DCCHjgBa.js";import{o as jt}from"./ScreenHeader-CHmc4-Lu-HCjCAZJZ.js";import{t as Ct,s as B,e as D,n as R}from"./Value-tcJV9e0L-ROBt3A6w.js";import{f as X,v as _t}from"./WalletLink--05Hzo2b-B7H8EzTT.js";import{i as Et}from"./StackedContainer-B2vaEl56-BRm7eOny.js";import{n as Lt,Y as Ft}from"./TransactionErrorView-CPFrt0L4-DJoqLmhk.js";import{t as Y}from"./transaction-CnfuREWo-nROljJQP.js";import{d as Pt,c as nt,l as Bt,u as Dt,f as Rt}from"./useSolanaRpcClient-BUWOblv_-CxotUecb.js";import{C as Jt,e as Ut,n as Mt,a as J,o as Nt,d as qt,r as Wt,t as zt}from"./getFormattedUsdFromLamports-B6EqSEho-C-HCdwKa.js";import{i as j}from"./formatters-DwTIoOJg.js";import"./reservoir-0wfhnc0j-De6gY8zu.js";import"./ScreenLayout-DTmQLGPf-BlqX97ue.js";import"./Screen-Bp-TN9gb-CzJwd7hm.js";import"./index-Dq_xe9dz-Ib9Th1lY.js";import"./createLucideIcon-4wkIQryq.js";import"./lock-ZeGFRSFV.js";import"./LoadingSkeleton-U6-3yFwI-BjURS6hd.js";import"./ethers-D1WT71Ay-Bm_QsKrp.js";import"./ErrorMessage-D8VaAP5m-CR3Tb0Lp.js";import"./LabelXs-oqZNqbm_-DnrDG2NQ.js";import"./Subtitle-CV-2yKE4-7aq5bCsa.js";import"./Title-BnzYV3Is-BCOaahtW.js";import"./Address-BjZb-TIL-zOemzO1X.js";import"./check-B9ysh8c4.js";import"./copy-BmDK-JXv.js";import"./WalletInfoCard-DFt8ndGE-RQ3Lcpjv.js";import"./shared-FM0rljBt-CTZiOGZT.js";import"./Checkbox-BhNoOKjX-C17pK1r7.js";import"./ErrorBanner-CQERa7bL-JkIk9H9H.js";import"./ExclamationCircleIcon-CtD1O1YF.js";import"./WarningBanner-c8L53pJ2-VSF-7j_M.js";import"./ExclamationTriangleIcon-C_T-rHXN.js";import"./ChevronDownIcon-Drg772V5.js";function Ht(t){return!("exists"in t)||"exists"in t&&t.exists}function Vt(t){const e=t.filter(n=>Ht(n)&&n.data instanceof Uint8Array);if(e.length>0){const n=e.map(a=>a.address);throw new Q(ot,{addresses:n})}}function Yt(t,e){if(!e)return Object.freeze({address:t,exists:!1});const n=ct().encode(e.data[0]);return Object.freeze({...et(e),address:t,data:n,exists:!0})}function Gt(t,e){if(!e)return Object.freeze({address:t,exists:!1});const n=e.data.parsed.info||{};return(e.data.program||e.data.parsed.type)&&(n.parsedAccountMeta={program:e.data.program,type:e.data.parsed.type}),Object.freeze({...et(e),address:t,data:n,exists:!0})}function et(t){return Object.freeze({executable:t.executable,lamports:t.lamports,programAddress:t.owner,space:t.space})}async function Kt(t,e,n={}){const{abortSignal:a,...i}=n;return(await t.getMultipleAccounts(e,{...i,encoding:"jsonParsed"}).send({abortSignal:a})).value.map((u,c)=>u&&typeof u=="object"&&"parsed"in u.data?Gt(e[c],u):Yt(e[c],u))}function Xt(t){const e=t.filter(n=>!n.exists);if(e.length>0){const n=e.map(a=>a.address);throw new Q(st,{addresses:n})}}async function Qt(t,e,n){if(t.length===0)return{};const a=await Kt(e,t,n);return Vt(a),Xt(a),a.reduce((i,s)=>({...i,[s.address]:s.data.addresses}),{})}const Zt=tt.span`
  && {
    width: 82px;
    height: 82px;
    border-width: 4px;
    border-style: solid;
    border-color: ${t=>t.color??"var(--privy-color-accent)"};
    background-color: ${t=>t.color??"var(--privy-color-accent)"};
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
  }
`,tn=({instruction:t,fees:e,transactionInfo:n,solPrice:a,chain:i})=>p.jsxs(Ct,{children:[n?.action&&p.jsxs(B,{children:[p.jsx(D,{children:"Action"}),p.jsx(R,{children:n.action})]}),t?.total!=null&&p.jsxs(B,{children:[p.jsx(D,{children:"Total"}),p.jsx(R,{children:t.total})]}),!t?.total&&t?.amount!=null&&p.jsxs(B,{children:[p.jsx(D,{children:"Total"}),p.jsx(R,{children:p.jsx(X,{quantities:[t.amount,e],tokenPrice:a})})]}),p.jsxs(B,{children:[p.jsx(D,{children:"Fees"}),p.jsx(R,{children:p.jsx(X,{quantities:[e],tokenPrice:a})})]}),t?.to&&p.jsxs(B,{children:[p.jsx(D,{children:"To"}),p.jsx(R,{children:p.jsx(_t,{walletAddress:t.to,chainId:i,chainType:"solana"})})]})]}),nn=({fees:t,onClose:e,receiptHeader:n,receiptDescription:a,transactionInfo:i,solPrice:s,signOnly:u,instruction:c,chain:m})=>p.jsxs(p.Fragment,{children:[p.jsx(It,{onClose:e}),p.jsx(Et,{style:{marginBottom:"16px"},children:p.jsxs("div",{children:[p.jsx(Zt,{color:"var(--privy-color-success-light)"}),p.jsx(vt,{height:38,width:38,strokeWidth:2,stroke:"var(--privy-color-success)"})]})}),p.jsx(jt,{title:n??`Transaction ${u?"signed":"complete"}!`,description:a??"You're all set."}),p.jsx(tn,{solPrice:s,instruction:c,fees:t,transactionInfo:i,chain:m}),p.jsx(yt,{}),p.jsx(en,{loading:!1,onClick:e,children:"Close"}),p.jsx($t,{}),p.jsx(Ot,{})]});let en=tt(Tt)`
  && {
    margin-top: 24px;
  }
  transition:
    color 350ms ease,
    background-color 350ms ease;
`;async function F(t,e){try{return await t}catch{return e}}function an(t){switch(t){case"solana:mainnet":return"mainnet-beta";case"solana:devnet":return"devnet";case"solana:testnet":return"testnet"}}async function O({privyClient:t,chain:e,mint:n}){let a=zt[e];if(!a[n]){let i=await t.getSplTokenMetadata({mintAddress:n,cluster:an(e)});i&&(a[n]={address:n,symbol:i.symbol,decimals:i.decimals})}return a[n]}async function rn({tx:t,solanaClient:e,privyClient:n,checkFunds:a}){let i=Z().decode(nt(t)),s=i.staticAccounts[0]??"",u=await Bt({solanaClient:e,tx:t}),c=a?await F(Dt({solanaClient:e,tx:t})):void 0,m=c?.hasFunds??!0,x={},f=[],b=await(async function({solanaClient:k,message:r}){if(!("addressTableLookups"in r)||!r.addressTableLookups)return[...r.staticAccounts];let d=r.addressTableLookups.map((g=>g.lookupTableAddress)),T=await Qt(d,k.rpc),E=d.map(((g,A)=>[...r.addressTableLookups[A]?.writableIndexes.map((C=>{let $=T[g]?.[C];if($)return{key:$,isWritable:!0,altIdx:A}}))??[],...r.addressTableLookups[A]?.readonlyIndexes.map((C=>{let $=T[g]?.[C];if($)return{key:$,isWritable:!1,altIdx:A}}))??[]])).flat().filter((g=>!!g)).sort(((g,A)=>g.isWritable!==A.isWritable?g.isWritable?-1:1:g.altIdx-A.altIdx)).map((({key:g})=>g));return[...r.staticAccounts,...E]})({solanaClient:e,message:i});for(let k of i.instructions){let r=i.staticAccounts[k.programAddressIndex]||"";if(r!==Ut&&r!==Mt)if(r!==J){if(r===Nt){let d=await F((function(T,E,g){let[A,C,$,_]=T.accountIndices?.map((U=>E[U]))??[];return{type:"ata-creation",program:g,payer:A,ata:C,owner:$,mint:_}})(k,b,r));if(!d){f.push({type:"unknown",program:r,discriminator:k.data?.[0]});continue}if(f.push(d),d.ata&&d.owner&&d.mint){x[d.ata]={owner:d.owner,mint:d.mint};continue}}if(qt.includes(r)){let d=await F(cn(k,b,e,n,r));if(!d){f.push({type:"unknown",program:r,discriminator:k.data?.[0]});continue}f.push(d)}else if(Wt.includes(r)){let d=await F(dn(k,b,e,n,r));if(!d){f.push({type:"unknown",program:r,discriminator:k.data?.[0]});continue}f.push(d)}else f.push({type:"unknown",program:r,discriminator:k.data?.[0]})}else{let d=await F(sn(k,b));if(!d){f.push({type:"unknown",program:r,discriminator:k.data?.[0]});continue}f.push(d)}else{let d=await F(on(k,b,e,n,x,r));if(!d){f.push({type:"unknown",program:r,discriminator:k.data?.[0]});continue}f.push(d),d.type==="spl-transfer"&&(d.fromAta&&d.fromAccount&&d.token.address&&(x[d.fromAta]??={owner:d.fromAccount,mint:d.token.address}),d.toAta&&d.toAccount&&d.token.address&&(x[d.toAta]??={owner:d.toAccount,mint:d.token.address}))}}return{spender:s,fee:u,instructions:f,hasFunds:!!m}}function S(t,e=0){try{return(function(a,i=0){let s=0n;for(let u=0;u<8;u++)s|=BigInt(a[i+u])<<BigInt(8*u);return s})(t,e)}catch{}try{return t.readBigInt64LE(e)}catch{}let n=Rt(t);try{return((a,i=0)=>{let s=a[i],u=a[i+7];if(!s||!u)throw Error(`Buffer offset out of range: first: ${s}, last: ${u}.`);return(BigInt(a[i+4]+256*a[i+5]+65536*a[i+6]+(u<<24))<<32n)+BigInt(s+256*a[++i]+65536*a[++i]+16777216*a[++i])})(n)}catch{}try{return n.subarray(e).readBigInt64LE()}catch{}try{return n.readBigInt64LE(e)}catch{}return 0n}async function on(t,e,n,a,i,s){let u=t.data?.[0],c=t.accountIndices?.map((m=>e[m]))??[];if(u===1){let[m,x,f]=c;return{type:"spl-init-account",program:s,account:m,mint:x,owner:f}}if(u===3){let m,x,[f,b,k]=c,r="",d=b?i[b]:void 0;if(d)m=d.owner,r=d.mint;else if(b){let g=await n.rpc.getAccountInfo(b,{commitment:"confirmed",encoding:"jsonParsed"}).send(),A=g.value?.data;m=A?.parsed?.info?.owner,r=A?.parsed?.info?.mint??"",x=A?.parsed?.info?.tokenAmount?.decimals}!r&&f&&(r=(await n.rpc.getAccountInfo(f,{commitment:"confirmed",encoding:"jsonParsed"}).send()).value?.data?.parsed?.info?.mint??"");let T=await O({privyClient:a,chain:n.chain,mint:r}),E=T?.symbol??"";return x??=T?.decimals??9,{type:"spl-transfer",program:s,fromAta:f,fromAccount:k,toAta:b,toAccount:m,value:S(t.data,1),token:{symbol:E,decimals:x,address:r}}}if(u===9){let[m,x,f]=c;return{type:"spl-close-account",program:s,source:m,destination:x,owner:f}}if(u===17)return{type:"spl-sync-native",program:s};throw Error(`Token program instruction type ${u} not supported`)}async function sn(t,e){let n=t.data?.[0],a=t.accountIndices?.map((i=>e[i]))??[];if(n===0){let[,i]=a;return{type:"create-account",program:J,account:i?.toString(),value:S(t.data,4),withSeed:!1}}if(n===2){let[i,s]=a;return{type:"sol-transfer",program:J,fromAccount:i,toAccount:s,token:{symbol:"SOL",decimals:9},value:S(t.data,4),withSeed:!1}}if(n===3){let[,i]=a;return{type:"create-account",program:J,account:i,withSeed:!0,value:S(t.data.slice(t.data.length-32-8-8))}}if(n===11){let[i,s]=a;return{type:"sol-transfer",program:J,fromAccount:i,toAccount:s,value:S(t.data,4),token:{symbol:"SOL",decimals:9},withSeed:!0}}throw Error(`System program instruction type ${n} not supported`)}async function cn(t,e,n,a,i){let s=t.accountIndices?.map((c=>e[c]))??[],u=t.data?.[0];if(u===143){let c=s[10],m=s[11];return{type:"raydium-swap-base-input",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,amountIn:S(t.data,8),minimumAmountOut:S(t.data,16)}}if(u===55){let c=s[10],m=s[11];return{type:"raydium-swap-base-output",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,maxAmountIn:S(t.data,8),amountOut:S(t.data,16)}}throw Error(`Raydium swap program instruction type ${u} not supported`)}async function dn(t,e,n,a,i){let s=t.data?.[0],u=t.accountIndices?.map((c=>e[c]))??[];if([208,51,239,151,123,43,237,92].includes(s)){let c=u[5],m=u[6];return{type:"jupiter-swap-exact-out-route",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([176,209,105,168,154,125,69,62].includes(s)){let c=u[7],m=u[8];return{type:"jupiter-swap-exact-out-route",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([193,32,155,51,65,214,156,129].includes(s)){let c=u[7],m=u[8];return{type:"jupiter-swap-shared-accounts-route",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,inAmount:S(t.data,t.data.length-1-2-8-8),quotedOutAmount:S(t.data,t.data.length-1-2-8)}}throw[62,198,214,193,213,159,108,210].includes(s)&&console.warn("Jupiter swap program instruction 'claim' not implemented"),[116,206,27,191,166,19,0,73].includes(s)&&console.warn("Jupiter swap program instruction 'claim_token' not implemented"),[26,74,236,151,104,64,183,249].includes(s)&&console.warn("Jupiter swap program instruction 'close_token' not implemented"),[229,194,212,172,8,10,134,147].includes(s)&&console.warn("Jupiter swap program instruction 'create_open_orders' not implemented"),[28,226,32,148,188,136,113,171].includes(s)&&console.warn("Jupiter swap program instruction 'create_program_open_orders' not implemented"),[232,242,197,253,240,143,129,52].includes(s)&&console.warn("Jupiter swap program instruction 'create_token_ledger' not implemented"),[147,241,123,100,244,132,174,118].includes(s)&&console.warn("Jupiter swap program instruction 'create_token_account' not implemented"),[229,23,203,151,122,227,173,42].includes(s)&&console.warn("Jupiter swap program instruction 'route' not implemented"),[150,86,71,116,167,93,14,104].includes(s)&&console.warn("Jupiter swap program instruction 'route_with_token_ledger' not implemented"),[228,85,185,112,78,79,77,2].includes(s)&&console.warn("Jupiter swap program instruction 'set_token_ledger' not implemented"),[230,121,143,80,119,159,106,170].includes(s)&&console.warn("Jupiter swap program instruction 'shared_accounts_route_with_token_ledger' not implemented"),Error(`Jupiter swap program instruction type ${s} not supported`)}const Kn={component:()=>{let{data:t,onUserCloseViaDialogOrKeybindRef:e,setModalData:n,navigate:a}=dt(),{client:i,closePrivyModal:s,walletProxy:u,showFiatPrices:c}=lt(),m=ut(),{user:x}=pt(),f=Pt()(t?.standardSignAndSendTransaction?.chain??"solana:mainnet"),[b,k]=I.useState(t?.standardSignAndSendTransaction?.transaction),[r,d]=I.useState(),[T,E]=I.useState(),[g,A]=I.useState({value:0n,isLoading:!1}),[C,$]=I.useState(!1),[_,U]=I.useState({}),[M,G]=I.useState(),v=t?.standardSignAndSendTransaction?.account,W=!!t?.standardSignAndSendTransaction?.signOnly,at=v?.imported?mt(x).find((l=>l.address===v.address)):ft(x),{solPrice:N,isSolPriceLoading:z}=xt({enabled:c}),P=I.useMemo((()=>{if(!r)return;let l=r.spender,h=Y(r.fee),y=Y(g.value,3,!0),w=r.instructions.filter((L=>["sol-transfer","spl-transfer","raydium-swap-base-input","raydium-swap-base-output","jupiter-swap-shared-accounts-route","jupiter-swap-exact-out-route"].includes(L.type))),o=w.at(0);return!o||w.length>1?{fee:h,spender:l,balance:y}:o.type==="sol-transfer"?{fee:h,spender:l,balance:y,total:Y(o.value)}:o.type==="spl-transfer"?{fee:h,spender:l,balance:y,total:`${j({amount:o.value,decimals:o.token.decimals})} ${o.token.symbol}`}:o.type==="raydium-swap-base-input"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.amountIn,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.minimumAmountOut,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:o.type==="raydium-swap-base-output"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.maxAmountIn,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.amountOut,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:o.type==="jupiter-swap-shared-accounts-route"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.inAmount,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.quotedOutAmount,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:o.type==="jupiter-swap-exact-out-route"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.quotedInAmount,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.outAmount,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:{fee:h,spender:l,balance:y}}),[r,v?.address,g]),H=I.useMemo((()=>{let l;if(!r||!c||!N||z)return;function h(...o){return Jt(o.reduce(((L,it)=>L+it),0n),N??0)}v?.address===r.spender&&(l=h(r.fee));let y=h(g.value),w=r.instructions.filter((o=>o.type==="sol-transfer"||o.type==="spl-transfer")).at(0);return!w||r.instructions.length>1?{fee:l,balance:y}:w.type==="sol-transfer"?{fee:l,balance:y,total:h(w.value,v?.address===r.spender?r.fee:0n)}:w.type==="spl-transfer"?{fee:l,balance:y,total:`${j({amount:w.value,decimals:w.token.decimals})} ${w.token.symbol}`}:{fee:l,balance:y}}),[r,c,N,z,v?.address,g]);if(I.useEffect((()=>{(async function(){if(b&&i)try{E(void 0);let l=await rn({tx:b,solanaClient:f,privyClient:i,checkFunds:!W});d(l)}catch(l){console.error("Failed to prepare transaction",l),E(l)}})()}),[b,f,i,W]),I.useEffect((()=>{(async function(){if(!v)return;A({value:g.value,isLoading:!0});let{value:l}=await f.rpc.getBalance(v.address,{commitment:"confirmed"}).send();A({value:l??0n,isLoading:!1})})().catch(console.error)}),[r]),!b||!t?.standardSignAndSendTransaction||!v){let l=Error("Invalid transaction request");return p.jsx(St,{error:l,allowlistConfig:m.allowlistConfig,onRetry:()=>{t?.standardSignAndSendTransaction?.onFailure(l),s({shouldCallAuthOnSuccess:!1})}})}let q=()=>{if(!C)return _.signature||_.signedTransaction?t?.standardSignAndSendTransaction?.onSuccess({signature:_.signature,signedTransaction:_.signedTransaction}):t?.standardSignAndSendTransaction?.onFailure(M??T??Error("User exited the modal before submitting the transaction")),s({shouldCallAuthOnSuccess:!1})};e.current=q;let rt=t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?p.jsx("img",{src:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,V=!!(t.funding&&t.funding.supportedOptions.length>0),K=!r?.hasFunds&&V;if(_.signature||_.signedTransaction){let l=r?.instructions.filter((y=>y.type==="sol-transfer"||y.type==="spl-transfer")),h=l?.length===1?l?.at(0):void 0;return p.jsx(nn,{fees:_.fees??0n,onClose:q,transactionInfo:t.standardSignAndSendTransaction?.uiOptions.transactionInfo,solPrice:N,receiptHeader:t.standardSignAndSendTransaction?.uiOptions.successHeader,receiptDescription:t.standardSignAndSendTransaction?.uiOptions.successDescription,chain:f.chain,signOnly:W,instruction:h?.type==="sol-transfer"?{to:h.toAccount,amount:h.value}:{to:h?.toAccount||h?.toAta,total:P?.total}})}return M?p.jsx(Lt,{transactionError:M,chainId:f.chain,onClose:q,chainType:"solana",onRetry:async()=>{G(void 0);let{value:l}=await f.rpc.getLatestBlockhash().send();var h,y;k((h=b,y=l,gt(Z().decode(nt(h)),(w=>At(w)),(w=>kt(y,w)),(w=>bt(w)),(w=>new Uint8Array(wt().encode(w))))))}}):p.jsx(Ft,{img:rt,title:t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.title||"Confirm transaction",subtitle:t.standardSignAndSendTransaction?.uiOptions?.description||`${m.name} wants your permission to approve the following transaction.`,cta:K?"Add funds":t.standardSignAndSendTransaction?.uiOptions?.buttonText||"Approve",instructions:r?.instructions??[],network:f.chain=="solana:mainnet"?"Solana":f.chain.replace("solana:",""),blockExplorerUrl:f.blockExplorerUrl,total:c?H?.total:P?.total,fee:c?H?.fee:P?.fee,balance:c?H?.balance:P?.balance,swap:P?.swap,transactingWalletAddress:v.address,disabled:!r?.hasFunds&&!V,isSubmitting:C,isPreparing:!r||g.isLoading,isTokenPriceLoading:c&&z,isMissingFunds:!r?.hasFunds,submitError:M??void 0,isSponsored:!!t.standardSignAndSendTransaction?.isSponsored,parseError:T,onClick:K?async()=>{if(!v)return;if(!V)throw Error("Funding wallet is not enabled");let l="FundingMethodSelectionScreen";n({...t,funding:{...t.funding,methodScreen:l},solanaFundingData:t?.solanaFundingData}),a(l)}:async()=>{try{if($(!0),C||!v||!u||!x||!at)return;let l=await t.standardSignAndSendTransaction.onConfirm(b);if("signature"in l){let h=await(async function({solanaClient:y,signature:w}){let o=ht().decode(w),L=await y.rpc.getTransaction(o,{maxSupportedTransactionVersion:0,commitment:"confirmed",encoding:"base64"}).send().catch((()=>null));return L?{fee:L.meta?.fee??0n}:null})({solanaClient:f,signature:l.signature});return void U({...l,fees:h?.fee})}U(l)}catch(l){console.warn({transaction:b,error:l}),G(l)}finally{$(!1)}},onClose:q})}};export{Kn as StandardSignAndSendTransactionScreen,Kn as default};
