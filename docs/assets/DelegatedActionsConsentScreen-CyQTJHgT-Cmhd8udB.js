import{j as m}from"./vendor-wallet-F4boqawy.js";import{r as l}from"./vendor-react-BtAbuqlL.js";import{j as y}from"./WalletInfoCard-DFt8ndGE-bHBsGkdu.js";import{a as C,r as g,I as h,aS as w,_ as k}from"./index-DTmhzp_L.js";import{n as j}from"./ScreenLayout-DTmQLGPf-D7jqh1U-.js";import{C as A}from"./circle-alert-BqX-7rEq.js";import{C as S}from"./circle-check-big-CyPDT8oi.js";import{c as b}from"./createLucideIcon-BYAZb6Ze.js";import"./ModalHeader-D8-mhjp4-qoJ1wz7E.js";import"./ErrorMessage-D8VaAP5m-DnqvuDTX.js";import"./LabelXs-oqZNqbm_-m1SHyTxE.js";import"./Address-BjZb-TIL-4yT6u4SB.js";import"./check-BijN9Qmp.js";import"./copy-BdFFznhB.js";import"./shared-FM0rljBt-CVBBIu7E.js";import"./Screen-Bp-TN9gb-DOXOKuwN.js";import"./index-Dq_xe9dz-CNmL4A7L.js";const x=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],v=b("cloud-upload",x),D=({appName:o,address:a,success:s,error:e,onAccept:n,onDecline:t,onClose:r})=>m.jsx(j,s||e?{title:e?"Something went wrong":"Success!",subtitle:e?"Please try again.":`You've successfully granted delegated action permissions to ${o}.`,icon:e?A:S,iconVariant:e?"error":"success",onBack:r,watermark:!0}:{title:"Enable offline access",subtitle:`By confirming, ${o} will be able to use your wallet for you even when you're not around. You can revoke this later.`,icon:v,primaryCta:{label:"Accept",onClick:n},secondaryCta:{label:"Not now",onClick:t},onBack:r,watermark:!0,children:m.jsx(y,{address:a,title:"Wallet"})}),z={component:()=>{let{data:o}=C(),a=g(),{closePrivyModal:s}=h(),[e,n]=l.useState(!1),[t,r]=l.useState(),{address:u,onDelegate:p,onSuccess:d,onError:f}=o.delegatedActions.consent,c=async()=>{e?d():f(t??new k("User declined delegating actions.")),s({shouldCallAuthOnSuccess:!1})};return l.useEffect((()=>{if(!e&&!t)return;let i=setTimeout(c,w);return()=>clearTimeout(i)}),[e,t]),m.jsx(D,{appName:a.name,address:u,success:e,error:t,onAccept:async()=>{try{await p(),n(!0)}catch(i){r(i)}},onDecline:()=>{c()},onClose:c})}};export{z as DelegatedActionsConsentScreen,D as DelegatedActionsConsentScreenView,z as default};
