import{j as s,c as Ze,h as et,aS as tt,aG as nt,aL as at,t as st}from"./vendor-wallet-iWeBopzN.js";import{r as a}from"./vendor-react-NLnOsXgy.js";import{d as ye}from"./Address-BjZb-TIL-CpOAalVa.js";import{a as it,I as J,b as rt,r as ot,aN as he,cz as lt,cl as ut,q as pt,ao as dt,cA as ge,cB as Ie,cm as ct,bk as mt,c as ve}from"./index-B_Guat1Z.js";import{c as yt}from"./useGetTokenPrice-BPBpM07F-DJgHN0az.js";import{s as ft}from"./useWalletBalance-CDyi5_iR-C8kkMniW.js";import{n as bt}from"./getErc20TokenInfo-1Q6w1Ibq-CV2ZM9OR.js";import{t as Tt}from"./formatErc20TokenAmount-BuPk9xcy-CkAr4Oc0.js";import{c as fe,o as z,i as ht}from"./ethers-D1WT71Ay-C05afFBe.js";import{ErrorScreenView as gt}from"./ErrorScreen-DtGc3Chy-C-lvYfSL.js";import{T as ke,u as xe,m as It}from"./ModalHeader-D8-mhjp4-CGiZ3XIM.js";import{a as vt}from"./JsonTree-aPaJmPx7-nuclWc6R.js";import{n as kt,Q as xt}from"./TransactionErrorView-CPFrt0L4-Dq1YV0Sh.js";import{s as Et}from"./Layouts-BlFm53ED-BuI7l70s.js";import{n as St}from"./ScreenHeader-CHmc4-Lu-Dv6_83Tl.js";import{$ as Mt}from"./TransactionDetails-BurRo8R0-jpp98eEQ.js";import{t as Ft}from"./transfer-6YztDh-t-DU6hH7CZ.js";import{i as _t}from"./formatters-DwTIoOJg.js";import"./check-B9ysh8c4.js";import"./createLucideIcon-4wkIQryq.js";import"./copy-BmDK-JXv.js";import"./useGetSolPrice-DwwjjGbd-CqzLkJkE.js";import"./reservoir-0wfhnc0j-Cb_zfl6e.js";import"./ScreenLayout-DTmQLGPf-CFbHJSm1.js";import"./Screen-Bp-TN9gb-DEC7t3FV.js";import"./index-Dq_xe9dz-LIoiUhOb.js";import"./lock-ZeGFRSFV.js";import"./Value-tcJV9e0L-Cr8NynF6.js";import"./LoadingSkeleton-U6-3yFwI-Bm45iV31.js";import"./ErrorMessage-D8VaAP5m-DB2h0CSO.js";import"./LabelXs-oqZNqbm_-C3vR4IE6.js";import"./Subtitle-CV-2yKE4-CFzs0MR2.js";import"./Title-BnzYV3Is-C00HFMin.js";import"./WalletInfoCard-DFt8ndGE-F9T2mNPo.js";import"./shared-FM0rljBt-TVcpbS_n.js";import"./Checkbox-BhNoOKjX-B-FCoSTp.js";import"./ErrorBanner-CQERa7bL-DxnteYyf.js";import"./ExclamationCircleIcon-CtD1O1YF.js";import"./WarningBanner-c8L53pJ2-Cml433JM.js";import"./ExclamationTriangleIcon-C_T-rHXN.js";import"./ChevronDownIcon-Drg772V5.js";import"./WalletLink--05Hzo2b-CDnbsdqC.js";import"./getFormattedUsdFromLamports-B6EqSEho-C-HCdwKa.js";import"./transaction-CnfuREWo-nROljJQP.js";let Ct=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],Nt=ve.div`
  display: flex;
  flex-direction: column;
  min-height: 72px;
`;var wt=({onBack:e,details:r})=>s.jsxs(Nt,{children:[s.jsx(ke,{backFn:e}),s.jsx(vt,{data:r}),s.jsx(xe,{})]});let $t=({gasUsed:e,effectiveGasPrice:r})=>{if(e&&r)try{return st(e*r)}catch{return}};const At=({txn:e,receipt:r,transactionInfo:p,onClose:d,tokenPrice:t,tokenSymbol:i,receiptHeader:c,receiptDescription:T})=>s.jsxs(s.Fragment,{children:[s.jsx(ke,{onClose:d}),s.jsx(St,{title:c??"Transaction complete!",description:T??"You're all set."}),s.jsx(Mt,{tokenPrice:t,from:r.from,to:r.to,gas:$t(r),txn:e,transactionInfo:p,tokenSymbol:i}),s.jsx(mt,{}),s.jsx(jt,{loading:!1,onClick:d,children:"All Done"}),s.jsx(Et,{}),s.jsx(xe,{})]});let jt=ve(It)`
  && {
    margin-top: 24px;
  }
  transition:
    color 350ms ease,
    background-color 350ms ease;
`;const Ot=[{constant:!1,inputs:[{name:"_salt",type:"bytes32"},{name:"_initializer",type:"bytes"}],name:"deployAccount",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Rt=[{name:"from",type:"address"},{name:"param2",type:"address"},{name:"param3",type:"bytes"},{name:"param4",type:"tuple",components:[]},{type:"tuple",components:[{name:"param5",type:"address"},{name:"param6",type:"uint256"},{name:"param7",type:"uint256"},{name:"encodedInitData",type:"bytes"}]}],Dt=[{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Bt=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"payable",type:"function"}],Pt=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],qt=[{constant:!1,inputs:[{name:"_operator",type:"address"},{name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Ut=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Lt=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenIds",type:"uint256[]"},{name:"_amounts",type:"uint256[]"},{name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Vt=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_amount",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Ee=(e,r)=>{let p=x(Dt,e);if(p)return{action:"approve",functionName:"approve",isErc20Ish:!0,isNFTIsh:!1,spender:p.args[0],amount:p.args[1]};let d=x(Ft,e);if(d)return{action:"transfer",functionName:"transfer",isErc20Ish:!0,isNFTIsh:!1,transferTo:d.args[0],amount:d.args[1]};if(!r)return{action:"transaction",functionName:"",isErc20Ish:!1,isNFTIsh:!1};let t=x(Ot,e);if(t&&typeof t.args[1]=="string"){let l=Gt(t.args[1]);if(l&&l[4].encodedInitData)return Ee(l[4].encodedInitData,r)}let i=x(qt,e);if(i)return{action:"approve",functionName:"setApprovalForAll",isNFTIsh:!0,isErc20Ish:!1,operator:i.args[0],approved:i.args[1]};let c=x(Ut,e);if(c)return{action:"transfer",functionName:"transferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:c.args[0],transferTo:c.args[1],tokenId:c.args[2]};let T=x(Pt,e);if(T)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:T.args[0],transferTo:T.args[1],tokenId:T.args[2]};let I=x(Vt,e);if(I)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:I.args[0],transferTo:I.args[1],tokenId:I.args[2],amount:I.args[3]};let h=x(Lt,e);if(h)return{action:"batch transfer",functionName:"safeBatchTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:h.args[0],transferTo:h.args[1],tokenIds:h.args[2],amounts:h.args[3]};let g=x(Bt,e);return g?{action:"mint",functionName:g.functionName,isNFTIsh:!0,isErc20Ish:!1,args:g.args}:{action:"transaction",isErc20Ish:!1,isNFTIsh:!1}};let x=(e,r)=>{try{let p=nt({abi:e,data:r});return{functionName:p.functionName,args:p.args||[]}}catch{return null}},Gt=e=>{try{if(typeof e=="string")return at(Rt,`0x${e.slice(10)}`)}catch{return null}},K=e=>`${parseFloat(e).toFixed(2)}`;function Ht(e,r){let p=[],d=new Map;if(e){for(let t of e)if(t.in[0]){let i;i=t.asset.type==="ERC721"||t.in[0].value==="approve_for_all"?{id:`nft:${t.asset.name}`,nftName:t.asset.name,nftCount:t.in.length}:{id:`token:${t.asset.type}:${t.asset.symbol}:${t.asset.name}`,iconUrl:t.asset.logo_url,value:t.in[0].value,symbol:t.asset.symbol,usdValue:t.in[0].usd_price?K(t.in[0].usd_price):void 0,decimals:t.asset.decimals},p.push(i)}else if(t.out[0]?.value){let i;i=t.asset.type==="ERC721"||t.out[0].value==="approve_for_all"?{id:`nft:${t.asset.name}`,nftName:t.asset.name}:{id:`token:${t.asset.type}:${t.asset.symbol}:${t.asset.name}`,iconUrl:t.asset.logo_url,value:t.out[0].value,symbol:t.asset.symbol,usdValue:t.out[0].usd_price?K(t.out[0].usd_price):void 0,decimals:t.asset.decimals},d.has(i.id)||d.set(i.id,i)}}for(let t of r)for(let i of Object.keys(t.spenders)){let c;c=t.asset.type==="ERC721"||t.spenders[i]?.value==="approve_for_all"?{id:`nft:${t.asset.name}`,nftName:t.asset.name}:{id:`token:${t.asset.type}:${t.asset.symbol}:${t.asset.name}`,iconUrl:t.asset.logo_url,value:t.spenders[i]?.value,symbol:t.asset.symbol,usdValue:t.spenders[i]?.usd_price?K(t.spenders[i]?.usd_price):void 0,decimals:t.asset.decimals},d.has(c.id)||d.set(c.id,c)}return{assetsIn:p,assetsOut:Array.from(d.values())}}const Wt=(e,r,p,d)=>{let[t,i]=a.useState(null),{walletProxy:c}=J();return a.useEffect((()=>{t&&i(null),(async()=>{if(!c||!r)return null;let T=[],I=!0,h=await ct(e,p,r,d).catch((g=>(g.message&&g.message.includes("Insufficient balance for transaction")||g.message&&g.message.includes("Insufficient funds for gas * price + value")||g.details&&g.details.includes("insufficient funds")?I=!1:T.push(g),e)));return{tx:h,totalGasEstimate:h.gas,hasFunds:I,errors:T}})().then(i)}),[e]),t};let be=new he(new ge("There was an issue preparing your transaction",Ie.E32603_DEFAULT_INTERNAL_ERROR.eipCode)),Te=(e,r)=>e?.sendTransaction?"transactionRequest"in e.sendTransaction?e.sendTransaction.transactionRequest:e.sendTransaction.transactionRequests[r]:void 0;const Bn={component:()=>{let{data:e,onUserCloseViaDialogOrKeybindRef:r,setModalData:p,navigate:d}=it(),{client:t,rpcConfig:i,chains:c,closePrivyModal:T,walletProxy:I,showFiatPrices:h}=J(),{user:g}=rt(),l=ot(),[v,X]=a.useState(0),[A,Se]=a.useState(0),[o,Y]=a.useState(Te(e,v)),[M,Me]=a.useState(null),[Z,ee]=a.useState(),[B,te]=a.useState(!1),[P,Fe]=a.useState(null),[ne,_e]=a.useState(null),[N,ae]=a.useState(null),[q,Ce]=a.useState(void 0),[Ne,U]=a.useState(void 0),[we,se]=a.useState(!1),[ie,re]=a.useState(!1),[$e,j]=a.useState([]),[Ae,je]=a.useState([]),[O,L]=a.useState("uninitiated"),[Oe,Re]=a.useState(void 0);if(!o||!e?.sendTransaction||!e?.sendTransaction)return s.jsx(gt,{error:Error("Invalid transaction request"),allowlistConfig:l.allowlistConfig,onRetry:()=>{e?.sendTransaction?.onFailure(be),T({shouldCallAuthOnSuccess:!1})}});let{transactingWalletAddress:w}=e.sendTransaction,k=a.useMemo((()=>c.find((n=>Number(n.id)===Number(o.chainId)))),[o.chainId]),$=k?.nativeCurrency.symbol??"ETH",f=a.useMemo((()=>Ee(o.data,!!l.embeddedWallets.extendedCalldataDecoding)),[o.data]),{action:E,isErc20Ish:C,isNFTIsh:De,functionName:R}=f,{toAddress:Be,tokenAddress:oe}=a.useMemo((()=>({toAddress:f.isErc20Ish?f.transferTo:o.to??void 0,tokenAddress:f.isErc20Ish?o.to:void 0})),[f]);a.useEffect((()=>{o.to&&k&&C&&bt({address:o.to,chain:k,rpcConfig:l.rpcConfig,privyAppId:l.id}).then(Me).catch(console.error)}),[o.to,k]);let{tokenPrice:F,isTokenPriceLoading:Pe}=yt(o.chainId),{balance:le}=ft({rpcConfig:l.rpcConfig,appId:l.id,address:w,chain:k}),ue=(function({rpcConfig:n,appId:m,address:b,chain:y,tokenInfo:S}){let{chains:Je}=J(),[W,Xe]=a.useState(null),[Ye,ce]=a.useState(!1),Q=a.useMemo((()=>{let _=y||Je[0];if(_)return Ze({chain:y,transport:et(lt(_,n,m))})}),[y,n,m]),me=a.useCallback((async()=>{if(b&&Q&&S.address)try{return ce(!0),await Q.readContract({address:S.address,abi:Ct,functionName:"balanceOf",args:[b]})}catch(_){console.error(_)}finally{ce(!1)}}),[Q,b,S?.address,y]);return a.useEffect((()=>{me().then((_=>_!=null&&Xe(_)))}),[me]),{balance:W,isLoading:Ye&&W==null,formattedBalance:_t({amount:W??BigInt(0),decimals:S.decimals})}})({rpcConfig:l.rpcConfig,appId:l.id,address:w,tokenInfo:{address:oe||"",decimals:M?.decimals??18},chain:k}),pe=a.useMemo((()=>ut(Number(o.chainId),c,i,{appId:l.id})),[o.chainId,i]),u=Wt(o,w,pe,e?.sendTransaction?.prepareTransactionRequest);a.useEffect((()=>{Y(Te(e,v))}),[v]),a.useEffect((()=>{e.sendTransaction?.getIsSponsored?e.sendTransaction.getIsSponsored().then(ee).catch(console.error):ee(!1)}),[e.sendTransaction.getIsSponsored]);let D=()=>{if(!B)return P?e?.sendTransaction?.onSuccess({hash:P}):N||u?.errors[0]?e?.sendTransaction?.onFailure(N??u?.errors[0]??be):e?.sendTransaction?.onFailure(new he(new ge("The user rejected the request",Ie.E4001_USER_REJECTED_REQUEST.eipCode))),T({shouldCallAuthOnSuccess:!1})};r.current=D;let V=!!(e.funding&&e.funding.supportedOptions.length>0),qe=fe(BigInt(u?.totalGasEstimate??0n),$),Ue=h&&F?z(BigInt(u?.totalGasEstimate??0n),F):void 0,Le=fe(le??0n,$,void 0,!0),Ve=h&&F?z(le??0n,F):void 0,Ge=M&&!ue.isLoading&&C&&E!=="approve"?`${ue.formattedBalance} ${M.symbol}`:void 0,G=e.sendTransaction?.uiOptions?.transactionInfo?.title;G||(G=E==="approve"?C?"Confirm address":"Confirm action":`Approve ${E}`);let He=a.useMemo((()=>{if(e.sendTransaction?.uiOptions?.description)return e.sendTransaction?.uiOptions?.description;if(E==="approve"&&R==="setApprovalForAll"&&f.approved){let n=s.jsx(ye,{address:f.operator||"",url:k?.blockExplorers?.default?.url});return s.jsxs(s.Fragment,{children:[l.name," would like your permission for ",n," to transfer tokens on your behalf."]})}if(E==="approve"&&R==="setApprovalForAll"&&!f.approved){let n=s.jsx(ye,{address:f.operator||"",url:k?.blockExplorers?.default?.url});return s.jsxs(s.Fragment,{children:[l.name," would like your permission to revoke permissions of ",n," from transferring tokens on your behalf."]})}return C&&E==="approve"||C&&E==="approve"?`${l.name} would like your permission for ${pt(f.spender)} to spend tokens on your behalf.`:`${l.name} wants your permission to approve the following transaction.`}),[l.name,C,f,e.sendTransaction?.uiOptions.description,R]),We=e.sendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?s.jsx("img",{src:e.sendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:e.sendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,H=!(!u||u.errors[0]||u.hasFunds||Z!==!1),de=H&&V,Qe=de?"Add funds":e.sendTransaction?.uiOptions?.buttonText||(v<A?"Continue":"Approve"),ze=n=>{if(!n)throw Error("Transaction scan failed");if(n.validation.status==="Success"&&(n.validation.result_type==="Benign"?U("safe"):n.validation.result_type==="Warning"?U("warn"):n.validation.result_type==="Malicious"&&(U("error"),re(!0))),n.simulation.status!=="Success")throw Error("Simulation failed");{Ce(n.simulation.params);let{assetsIn:m,assetsOut:b}=Ht(n.simulation.assets_diffs,n.simulation.exposures);if(b.length===0&&m.length===0)throw Error("No tokens found");j(b),je(m)}};if(a.useEffect((()=>{e.sendTransaction?.scanTransaction&&l.embeddedWallets.transactionScanning.enabled&&O==="uninitiated"&&(L("in progress"),e.sendTransaction.scanTransaction().then((n=>{ze(n),L("completed")})).catch((()=>L("failed"))))}),[!!e.sendTransaction?.scanTransaction]),a.useEffect((()=>{e.sendTransaction?.scanTransaction&&O!=="failed"||((n,m,b)=>{if(Se((y=>y?.sendTransaction?"transactionRequest"in y.sendTransaction?0:y.sendTransaction.transactionRequests.length-1:0)(e)),m.isErc20Ish&&m.amount&&b){let y=Tt({amount:m.amount,decimals:b.decimals});Re(y),j([{value:y,symbol:b?.symbol,decimals:b?.decimals}])}else if(n.value){let y=BigInt(n.value),S=F?z(y,F):void 0;j(h&&S?[{value:S}]:[{value:ht(y),symbol:$,decimals:18,usdValue:S}])}else j(h?[{value:"$0"}]:[{value:"0",symbol:$,decimals:18}])})(u?.tx??o,f,M)}),[o,u?.tx,f,M,O]),ne)return s.jsx(At,{txn:u?.tx??o,onClose:D,receipt:ne,transactionInfo:e.sendTransaction?.uiOptions.transactionInfo,tokenPrice:F,tokenSymbol:$,receiptHeader:e.sendTransaction?.uiOptions.successHeader,receiptDescription:e.sendTransaction?.uiOptions.successDescription});if(N)return s.jsx(kt,{transactionError:N,transactionHash:P??void 0,chainType:"ethereum",chainId:u?.tx.chainId??o.chainId,onClose:D,onRetry:({resetNonce:n})=>{ae(null);let m={...u?.tx??o};n&&(m.nonce=void 0),Y(m)}});let Ke=A!==0&&typeof v=="number"&&v!==0?()=>{X(v-1)}:void 0;return we&&q?s.jsx(wt,{details:q,onBack:()=>se(!1)}):s.jsx(xt,{transactionIndex:v,onBack:Ke,maxIndex:A,disabled:H&&!V||ie,isSubmitting:B,submitError:N,isPreparing:!u,isTokenPriceLoading:Pe,isTokenContractInfoLoading:!De&&!M,prepareError:u?.errors[0],symbol:M?.symbol,chain:k,img:We,title:G,subtitle:He,txValue:o.value,fee:Ue??qe,isSponsored:Z,from:w??"",to:Be,tokenAddress:oe??void 0,network:l.chains.find((n=>n.id===o.chainId))?.name??"",transactionDetails:{...f,formattedAmount:Oe},cta:Qe,missingFunds:H,action:E,balance:Ge??Ve??Le,onClose:D,onClick:de?async()=>{if(!w)return;if(!V)throw Error("Funding wallet is not enabled");let n="FundingMethodSelectionScreen";p({...e,funding:{...e.funding,methodScreen:n,chainType:"ethereum",amount:tt(BigInt(u?.tx.value??0)+BigInt(u?.totalGasEstimate?.toString()??0)),chain:k},solanaFundingData:e?.solanaFundingData}),d(n)}:async()=>{if(v<A)X(v+1);else{te(!0);try{let n=await t.getAccessToken();if(B||!n||!I||!g)return;let m=await e.sendTransaction.onConfirm({transactionRequest:u?.tx??o});if(Fe(m),e.sendTransaction?.signOnly)return await new Promise((y=>setTimeout(y,dt))),e?.sendTransaction?.onSuccess({hash:m}),T({shouldCallAuthOnSuccess:!1});let b=await pe.waitForTransactionReceipt({hash:m});if(b.status==="reverted")throw Error("Transaction failed");_e(b)}catch(n){console.warn({transaction:u?.tx??o,error:n}),ae(n)}finally{te(!1)}}},validation:Ne,hasScanDetails:!!q,setIsScanDetailsOpen:se,preventMaliciousTransaction:ie,setPreventMaliciousTransaction:re,tokensSent:$e,tokensReceived:Ae,isScanning:O==="in progress",isCancellable:e.sendTransaction?.uiOptions?.isCancellable??!1,functionName:R})}};export{Bn as SendTransactionScreen,Bn as default};
