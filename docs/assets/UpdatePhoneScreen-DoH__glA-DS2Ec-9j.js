import{j as u}from"./vendor-wallet-iWeBopzN.js";import{F as p}from"./PhoneIcon-DQtHTqgM.js";import{r as m}from"./vendor-react-NLnOsXgy.js";import{w as c}from"./ConnectPhoneForm-_lOAQG_X-DBmEHP_x.js";import{a as b,b as h,I as f}from"./index-D37Gsv74.js";import{n as S}from"./ScreenLayout-DTmQLGPf-WiwH-ftU.js";import"./ModalHeader-D8-mhjp4-D9kbW43V.js";import"./Chip-D2-wZOHJ-C9dXJGQv.js";import"./LoadingSkeleton-U6-3yFwI-CzC_GAw1.js";import"./Screen-Bp-TN9gb-Bw8rXW51.js";import"./index-Dq_xe9dz-D1JVkhbK.js";const w=({title:o="Update your phone number",subtitle:a="Add the phone number you'd like to use going forward. We'll send you a confirmation code",onSubmit:r,isSubmitting:t=!1})=>{let[e,n]=m.useState(null);return u.jsx(S,{title:o,subtitle:a,icon:p,primaryCta:{label:t?"Submitting":"Update",onClick:async()=>{e?.qualifiedPhoneNumber&&await r(e)},disabled:!e?.isValid||t},watermark:!0,children:u.jsx(c,{onChange:i=>{n(i)},onSubmit:async()=>{},noIncludeSubmitButton:!0,hideRecent:!0})})},q={component:()=>{let{currentScreen:o,data:a,navigate:r,setModalData:t}=b(),{user:e}=h(),{initUpdatePhone:n}=f(),[i,s]=m.useState(!1);return u.jsx(w,{onSubmit:async l=>{s(!0);try{if(!e?.phone?.number)throw Error("User is required to have an phone number to update it.");await n(e?.phone?.number,l.qualifiedPhoneNumber),r("AwaitingPasswordlessCodeScreen")}catch(d){t({errorModalData:{error:d,previousScreen:a?.errorModalData?.previousScreen||o||"LinkPhoneScreen"}}),r("ErrorScreen")}finally{s(!1)}},isSubmitting:i})}};export{q as UpdatePhoneScreen,w as UpdatePhoneScreenView,q as default};
