import{j as y}from"./vendor-wallet-iWeBopzN.js";import{r as d}from"./vendor-react-NLnOsXgy.js";import{a as M,I as W,O as j,ao as E,aG as U,ar as D,aH as L}from"./index-GHhzE5Jj.js";import{n as O}from"./ScreenLayout-DTmQLGPf-BPWY2ayj.js";import{getErrorDetails as $}from"./ConnectionStatusScreen-D-9fLZfA-BHtG7HWn.js";import"./ModalHeader-D8-mhjp4-CX7GgCR8.js";import"./Screen-Bp-TN9gb-C2KCMC-S.js";import"./index-Dq_xe9dz-QCuVcm3k.js";import"./Link-DJ5gq9Di-BR5akG9k.js";import"./useI18n-BuIe8nUA-BMtfczoW.js";import"./shouldProceedtoEmbeddedWalletCreationFlow-BMF_3TVv-RZ_-0CUv.js";const N=({walletLogo:c,success:l,errorMessage:a,title:w,subtitle:p,onRetry:r,onUseDifferentWallet:u,onBack:e,numRetries:i,maxRetries:t})=>y.jsx(O,{title:w,subtitle:p,icon:c,iconVariant:"loading",iconLoadingStatus:{success:l,fail:!!a},primaryCta:a===L.ERROR_USER_EXISTS?{label:"Use a different wallet",onClick:u}:!l&&a?.retryable&&i<t?{label:"Retry",onClick:r,disabled:!a?.retryable||i>=t}:!l&&a&&i>=t?{label:"Use a different wallet",onClick:u}:void 0,onBack:e,watermark:!0}),J={component:()=>{let c,{navigateBack:l,navigate:a,lastScreen:w,currentScreen:p,data:r,setModalData:u}=M(),{walletConnectionStatus:e,closePrivyModal:i}=W(),[t,C]=d.useState(void 0),[f,R]=d.useState(0),g=j(e?.connector?.walletClientType||"unknown"),s=e?.status==="connected",b=e?.status==="switching_to_supported_chain";d.useEffect((()=>{if(s){let o;if(r?.externalConnectWallet?.onCompleteNavigateTo){let v=r.externalConnectWallet.onCompleteNavigateTo,h=e.connectedWallet?.address;o=setTimeout((()=>{if(r.funding&&e.connector){let _=e.connector.wallets.find((B=>B.address===h));u({...r,funding:{...r.funding,connectedWallet:_}})}a(v({address:h,walletClientType:e.connector?.walletClientType,walletChainType:e.connector?.chainType}))}),E)}else o=setTimeout(i,E);return()=>clearTimeout(o)}}),[s]),d.useEffect((()=>{var o;e?.connectError&&(o=e?.connectError,C($(o)))}),[e]);let k=e?.connector?.connectorType||"injected",S=e?.connector?.walletClientType||"unknown",m=g?.metadata?.shortName||g?.name||e?.connector?.walletBranding.name||"Browser Extension",T=g?.image_url?.md||e?.connector?.walletBranding.icon||(o=>y.jsx(U,{...o})),x=m==="Browser Extension"?m.toLowerCase():m;c=s?`Successfully connected with ${x}`:t?t.message:b?"Switching networks":`Waiting for ${x}`;let n="Don’t see your wallet? Check your other browser windows.";return s?n="You’re good to go!":f>=2&&t?n="Unable to connect wallet":t?n=t.detail:b?n="Switch your wallet to the requested network.":S==="metamask"&&D.isMobile?n="Click to continue to open and connect MetaMask.":S==="metamask"?n="For the best experience, connect only one wallet at a time.":k==="wallet_connect_v2"?n="Open your mobile wallet app to continue":k==="coinbase_wallet"&&(n="Confirm in the Coinbase app/popup to continue."),y.jsx(N,{walletName:m,walletLogo:T,success:s,errorMessage:t,title:c,subtitle:n,onRetry:()=>{R(f+1),C(void 0),e?.connectRetry()},onUseDifferentWallet:l,onBack:p===w?void 0:l,numRetries:f,maxRetries:2})}};export{J as ConnectOnlyStatusScreen,N as ConnectOnlyStatusScreenView,J as default};
