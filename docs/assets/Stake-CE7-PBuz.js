import{j as b}from"./vendor-wallet-iWeBopzN.js";import{r as ht}from"./vendor-react-NLnOsXgy.js";import{H as ja,n as Ja}from"./index-BtIunJpb.js";var Ka="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";const Fs=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Ds=4;function _a(r){let t=0;function e(){return r[t++]<<8|r[t++]}let n=e(),s=1,i=[0,1];for(let O=1;O<n;O++)i.push(s+=e());let o=e(),a=t;t+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|r[t++],c=8),l>>--c&1}const f=31,h=2**f,g=h>>>1,y=g>>1,p=h-1;let m=0;for(let O=0;O<f;O++)m=m<<1|u();let w=[],N=0,E=h;for(;;){let O=Math.floor(((m-N+1)*s-1)/E),C=0,S=n;for(;S-C>1;){let L=C+S>>>1;O<i[L]?S=L:C=L}if(C==0)break;w.push(C);let k=N+Math.floor(E*i[C]/s),j=N+Math.floor(E*i[C+1]/s)-1;for(;((k^j)&g)==0;)m=m<<1&p|u(),k=k<<1&p,j=j<<1&p|1;for(;k&~j&y;)m=m&g|m<<1&p>>>1|u(),k=k<<1^g,j=(j^g)<<1|g|1;N=k,E=1+j-k}let T=n-4;return w.map(O=>{switch(O-T){case 3:return T+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return T+256+(r[a++]<<8|r[a++]);case 1:return T+r[a++];default:return O-1}})}function Za(r){let t=0;return()=>r[t++]}function Zi(r){return Za(_a(Wa(r)))}function Wa(r){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=r.length,n=new Uint8Array(6*e>>3);for(let s=0,i=0,o=0,a=0;s<e;s++)a=a<<6|t[r.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function Ya(r){return r&1?~r>>1:r>>1}function Xa(r,t){let e=Array(r);for(let n=0,s=0;n<r;n++)e[n]=s+=Ya(t());return e}function xn(r,t=0){let e=[];for(;;){let n=r(),s=r();if(!s)break;t+=n;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function Wi(r){return Nn(()=>{let t=xn(r);if(t.length)return t})}function Yi(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(qa(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push($a(e,r))}return t.flat()}function Nn(r){let t=[];for(;;){let e=r(t.length);if(!e)break;t.push(e)}return t}function Xi(r,t,e){let n=Array(r).fill().map(()=>[]);for(let s=0;s<t;s++)Xa(r,e).forEach((i,o)=>n[o].push(i));return n}function qa(r,t){let e=1+t(),n=t(),s=Nn(t);return Xi(s.length,1+r,t).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,f)=>{let h=f*n;return[c+f*e,l.map(g=>g+h)]})})}function $a(r,t){let e=1+t();return Xi(e,1+r,t).map(s=>[s[0],s.slice(1)])}function tc(r){let t=[],e=xn(r);return s(n([]),[]),t;function n(i){let o=r(),a=Nn(()=>{let c=xn(r).map(l=>e[l]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&t.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function ec(r){return r.toString(16).toUpperCase().padStart(2,"0")}function qi(r){return`{${ec(r)}}`}function nc(r){let t=[];for(let e=0,n=r.length;e<n;){let s=r.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function on(r){let e=r.length;if(e<4096)return String.fromCodePoint(...r);let n=[];for(let s=0;s<e;)n.push(String.fromCodePoint(...r.slice(s,s+=4096)));return n.join("")}function rc(r,t){let e=r.length,n=e-t.length;for(let s=0;n==0&&s<e;s++)n=r[s]-t[s];return n}var sc="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";const Pn=44032,tr=4352,er=4449,nr=4519,$i=19,to=21,an=28,rr=to*an,ic=$i*rr,oc=Pn+ic,ac=tr+$i,cc=er+to,lc=nr+an;function wn(r){return r>>24&255}function eo(r){return r&16777215}let Jr,Ms,Kr,Wn;function uc(){let r=Zi(sc);Jr=new Map(Wi(r).flatMap((t,e)=>t.map(n=>[n,e+1<<24]))),Ms=new Set(xn(r)),Kr=new Map,Wn=new Map;for(let[t,e]of Yi(r)){if(!Ms.has(t)&&e.length==2){let[n,s]=e,i=Wn.get(n);i||(i=new Map,Wn.set(n,i)),i.set(s,t)}Kr.set(t,e.reverse())}}function no(r){return r>=Pn&&r<oc}function fc(r,t){if(r>=tr&&r<ac&&t>=er&&t<cc)return Pn+(r-tr)*rr+(t-er)*an;if(no(r)&&t>nr&&t<lc&&(r-Pn)%an==0)return r+(t-nr);{let e=Wn.get(r);return e&&(e=e.get(t),e)?e:-1}}function ro(r){Jr||uc();let t=[],e=[],n=!1;function s(i){let o=Jr.get(i);o&&(n=!0,i|=o),t.push(i)}for(let i of r)for(;;){if(i<128)t.push(i);else if(no(i)){let o=i-Pn,a=o/rr|0,c=o%rr/an|0,l=o%an;s(tr+a),s(er+c),l>0&&s(nr+l)}else{let o=Kr.get(i);o?e.push(...o):s(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=wn(t[0]);for(let o=1;o<t.length;o++){let a=wn(t[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=t[c+1];if(t[c+1]=t[c],t[c]=l,!c||(i=wn(t[--c]),i<=a))break}i=wn(t[o])}}return t}function hc(r){let t=[],e=[],n=-1,s=0;for(let i of r){let o=wn(i),a=eo(i);if(n==-1)o==0?n=a:t.push(a);else if(s>0&&s>=o)o==0?(t.push(n,...e),e.length=0,n=a):e.push(a),s=o;else{let c=fc(n,a);c>=0?n=c:s==0&&o==0?(t.push(n),n=a):(e.push(a),s=o)}}return n>=0&&t.push(n,...e),t}function so(r){return ro(r).map(eo)}function dc(r){return hc(ro(r))}const Gs=45,io=".",oo=65039,ao=1,sr=r=>Array.from(r);function vn(r,t){return r.P.has(t)||r.Q.has(t)}class pc extends Array{get is_emoji(){return!0}}let _r,co,Ue,Zr,lo,tn,Nr,We,ke,Hs,Wr;function ps(){if(_r)return;let r=Zi(Ka);const t=()=>xn(r),e=()=>new Set(t()),n=(u,f)=>f.forEach(h=>u.add(h));_r=new Map(Yi(r)),co=e(),Ue=t(),Zr=new Set(t().map(u=>Ue[u])),Ue=new Set(Ue),lo=e(),e();let s=Wi(r),i=r();const o=()=>{let u=new Set;return t().forEach(f=>n(u,s[f])),n(u,t()),u};tn=Nn(u=>{let f=Nn(r).map(h=>h+96);if(f.length){let h=u>=i;f[0]-=32,f=on(f),h&&(f=`Restricted[${f}]`);let g=o(),y=o(),p=!r();return{N:f,P:g,Q:y,M:p,R:h}}}),Nr=e(),We=new Map;let a=t().concat(sr(Nr)).sort((u,f)=>u-f);a.forEach((u,f)=>{let h=r(),g=a[f]=h?a[f-h]:{V:[],M:new Map};g.V.push(u),Nr.has(u)||We.set(u,g)});for(let{V:u,M:f}of new Set(We.values())){let h=[];for(let y of u){let p=tn.filter(w=>vn(w,y)),m=h.find(({G:w})=>p.some(N=>w.has(N)));m||(m={G:new Set,V:[]},h.push(m)),m.V.push(y),n(m.G,p)}let g=h.flatMap(y=>sr(y.G));for(let{G:y,V:p}of h){let m=new Set(g.filter(w=>!y.has(w)));for(let w of p)f.set(w,m)}}ke=new Set;let c=new Set;const l=u=>ke.has(u)?c.add(u):ke.add(u);for(let u of tn){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of ke)!We.has(u)&&!c.has(u)&&We.set(u,ao);n(ke,so(ke)),Hs=tc(r).map(u=>pc.from(u)).sort(rc),Wr=new Map;for(let u of Hs){let f=[Wr];for(let h of u){let g=f.map(y=>{let p=y.get(h);return p||(p=new Map,y.set(h,p)),p});h===oo?f.push(...g):f=g}for(let h of f)h.V=u}}function gs(r){return(uo(r)?"":`${ms(ur([r]))} `)+qi(r)}function ms(r){return`"${r}"‎`}function gc(r){if(r.length>=4&&r[2]==Gs&&r[3]==Gs)throw new Error(`invalid label extension: "${on(r.slice(0,4))}"`)}function mc(r){for(let e=r.lastIndexOf(95);e>0;)if(r[--e]!==95)throw new Error("underscore allowed only at start")}function yc(r){let t=r[0],e=Fs.get(t);if(e)throw bn(`leading ${e}`);let n=r.length,s=-1;for(let i=1;i<n;i++){t=r[i];let o=Fs.get(t);if(o){if(s==i)throw bn(`${e} + ${o}`);s=i+1,e=o}}if(s==n)throw bn(`trailing ${e}`)}function ur(r,t=1/0,e=qi){let n=[];wc(r[0])&&n.push("◌"),r.length>t&&(t>>=1,r=[...r.slice(0,t),8230,...r.slice(-t)]);let s=0,i=r.length;for(let o=0;o<i;o++){let a=r[o];uo(a)&&(n.push(on(r.slice(s,o))),n.push(e(a)),s=o+1)}return n.push(on(r.slice(s,i))),n.join("")}function wc(r){return ps(),Ue.has(r)}function uo(r){return ps(),lo.has(r)}function Ac(r){return Nc(bc(r,dc,Bc))}function bc(r,t,e){if(!r)return[];ps();let n=0;return r.split(io).map(s=>{let i=nc(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=vc(i,t,e),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(mc(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))gc(u),l="ASCII";else{let h=a.flatMap(g=>g.is_emoji?[]:g);if(!h.length)l="Emoji";else{if(Ue.has(u[0]))throw bn("leading combining mark");for(let p=1;p<c;p++){let m=a[p];if(!m.is_emoji&&Ue.has(m[0]))throw bn(`emoji + combining mark: "${on(a[p-1])} + ${ur([m[0]])}"`)}yc(u);let g=sr(new Set(h)),[y]=xc(g);Pc(y,h),Ec(y,g),l=y.N}}o.type=l}catch(a){o.error=a}return o})}function Ec(r,t){let e,n=[];for(let s of t){let i=We.get(s);if(i===ao)return;if(i){let o=i.M.get(s);if(e=e?e.filter(a=>o.has(a)):sr(o),!e.length)return}else n.push(s)}if(e){for(let s of e)if(n.every(i=>vn(s,i)))throw new Error(`whole-script confusable: ${r.N}/${s.N}`)}}function xc(r){let t=tn;for(let e of r){let n=t.filter(s=>vn(s,e));if(!n.length)throw tn.some(s=>vn(s,e))?ho(t[0],e):fo(e);if(t=n,n.length==1)break}return t}function Nc(r){return r.map(({input:t,error:e,output:n})=>{if(e){let s=e.message;throw new Error(r.length==1?s:`Invalid label ${ms(ur(t,63))}: ${s}`)}return on(n)}).join(io)}function fo(r){return new Error(`disallowed character: ${gs(r)}`)}function ho(r,t){let e=gs(t),n=tn.find(s=>s.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${r.N} + ${e}`)}function bn(r){return new Error(`illegal placement: ${r}`)}function Pc(r,t){for(let e of t)if(!vn(r,e))throw ho(r,e);if(r.M){let e=so(t);for(let n=1,s=e.length;n<s;n++)if(Zr.has(e[n])){let i=n+1;for(let o;i<s&&Zr.has(o=e[i]);i++)for(let a=n;a<i;a++)if(e[a]==o)throw new Error(`duplicate non-spacing marks: ${gs(o)}`);if(i-n>Ds)throw new Error(`excessive non-spacing marks: ${ms(ur(e.slice(n-1,i)))} (${i-n}/${Ds})`);n=i}}}function vc(r,t,e){let n=[],s=[];for(r=r.slice().reverse();r.length;){let i=Ic(r);if(i)s.length&&(n.push(t(s)),s=[]),n.push(e(i));else{let o=r.pop();if(ke.has(o))s.push(o);else{let a=_r.get(o);if(a)s.push(...a);else if(!co.has(o))throw fo(o)}}}return s.length&&n.push(t(s)),n}function Bc(r){return r.filter(t=>t!=oo)}function Ic(r,t){let e=Wr,n,s=r.length;for(;s&&(e=e.get(r[--s]),!!e);){let{V:i}=e;i&&(n=i,r.length=s)}return n}const Cc="6.16.0";function kc(r,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=r,s}async function At(r){const t=Object.keys(r);return(await Promise.all(t.map(n=>Promise.resolve(r[n])))).reduce((n,s,i)=>(n[t[i]]=s,n),{})}function U(r,t,e){for(let n in t){let s=t[n];const i=e?e[n]:null;i&&kc(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function Xe(r,t){if(r==null)return"null";if(t==null&&(t=new Set),typeof r=="object"){if(t.has(r))return"[Circular]";t.add(r)}if(Array.isArray(r))return"[ "+r.map(e=>Xe(e,t)).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let s=0;s<r.length;s++)n+=e[r[s]>>4],n+=e[r[s]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return Xe(r.toJSON(),t);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(n=>`${Xe(n,t)}: ${Xe(r[n],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function mt(r,t){return r&&r.code===t}function ys(r){return mt(r,"CALL_EXCEPTION")}function q(r,t,e){let n=r;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Xe(e)}`);for(const o in e){if(o==="shortMessage")continue;const a=e[o];i.push(o+"="+Xe(a))}}i.push(`code=${t}`),i.push(`version=${Cc}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return U(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&U(s,{shortMessage:n}),s}function A(r,t,e,n){if(!r)throw q(t,e,n)}function d(r,t,e,n){A(r,t,"INVALID_ARGUMENT",{argument:e,value:n})}function po(r,t,e){e==null&&(e=""),e&&(e=": "+e),A(r>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:r,expectedCount:t}),A(r<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((r,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(t)}catch{}return r},[]);function On(r,t,e){if(e==null&&(e=""),r!==t){let n=e,s="new";e&&(n+=".",s+=" "+e),A(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function go(r,t,e){if(r instanceof Uint8Array)return e?new Uint8Array(r):r;if(typeof r=="string"&&r.length%2===0&&r.match(/^0x[0-9a-f]*$/i)){const n=new Uint8Array((r.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}d(!1,"invalid BytesLike value",t||"value",r)}function M(r,t){return go(r,t,!1)}function bt(r,t){return go(r,t,!0)}function X(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&r.length!==2+2*t||t===!0&&r.length%2!==0)}function ws(r){return X(r,!0)||r instanceof Uint8Array}const Qs="0123456789abcdef";function P(r){const t=M(r);let e="0x";for(let n=0;n<t.length;n++){const s=t[n];e+=Qs[(s&240)>>4]+Qs[s&15]}return e}function $(r){return"0x"+r.map(t=>P(t).substring(2)).join("")}function en(r){return X(r,!0)?(r.length-2)/2:M(r).length}function it(r,t,e){const n=M(r);return e!=null&&e>n.length&&A(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),P(n.slice(t??0,e??n.length))}function mo(r,t,e){const n=M(r);A(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(n,t-n.length):s.set(n,0),P(s)}function ce(r,t){return mo(r,t,!0)}function Rc(r,t){return mo(r,t,!1)}const Sn=BigInt(0),Qt=BigInt(1),qe=9007199254740991;function ir(r,t){const e=fr(r,"value"),n=BigInt(F(t,"width"));if(A(e>>n===Sn,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),e>>n-Qt){const s=(Qt<<n)-Qt;return-((~e&s)+Qt)}return e}function yo(r,t){let e=I(r,"value");const n=BigInt(F(t,"width")),s=Qt<<n-Qt;if(e<Sn){e=-e,A(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const i=(Qt<<n)-Qt;return(~e&i)+Qt}else A(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return e}function Le(r,t){const e=fr(r,"value"),n=BigInt(F(t,"bits"));return e&(Qt<<n)-Qt}function I(r,t){switch(typeof r){case"bigint":return r;case"number":return d(Number.isInteger(r),"underflow",t||"value",r),d(r>=-qe&&r<=qe,"overflow",t||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(e){d(!1,`invalid BigNumberish string: ${e.message}`,t||"value",r)}}d(!1,"invalid BigNumberish value",t||"value",r)}function fr(r,t){const e=I(r,t);return A(e>=Sn,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),e}const Vs="0123456789abcdef";function hr(r){if(r instanceof Uint8Array){let t="0x0";for(const e of r)t+=Vs[e>>4],t+=Vs[e&15];return BigInt(t)}return I(r)}function F(r,t){switch(typeof r){case"bigint":return d(r>=-qe&&r<=qe,"overflow",t||"value",r),Number(r);case"number":return d(Number.isInteger(r),"underflow",t||"value",r),d(r>=-qe&&r<=qe,"overflow",t||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return F(BigInt(r),t)}catch(e){d(!1,`invalid numeric string: ${e.message}`,t||"value",r)}}d(!1,"invalid numeric value",t||"value",r)}function Oc(r){return F(hr(r))}function xe(r,t){const e=fr(r,"value");let n=e.toString(16);if(t==null)n.length%2&&(n="0"+n);else{const s=F(t,"width");if(s===0&&e===Sn)return"0x";for(A(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function ut(r,t){const e=fr(r,"value");if(e===Sn)return new Uint8Array(0);let n=e.toString(16);n.length%2&&(n="0"+n);const s=new Uint8Array(n.length/2);for(let i=0;i<s.length;i++){const o=i*2;s[i]=parseInt(n.substring(o,o+2),16)}return s}function Ht(r){let t=P(ws(r)?r:ut(r)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const zs="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const js=BigInt(58);function Sc(r){const t=M(r);let e=hr(t),n="";for(;e;)n=zs[Number(e%js)]+n,e/=js;for(let s=0;s<t.length&&!t[s];s++)n=zs[0]+n;return n}function Tc(r){r=atob(r);const t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return M(t)}function Uc(r){const t=M(r);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}class wo{filter;emitter;#t;constructor(t,e,n){this.#t=e,U(this,{emitter:t,filter:n})}async removeListener(){this.#t!=null&&await this.emitter.off(this.filter,this.#t)}}function Lc(r,t,e,n,s){d(!1,`invalid codepoint at offset ${t}; ${r}`,"bytes",e)}function Ao(r,t,e,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)i++;return i}return r==="OVERRUN"?e.length-t-1:0}function Fc(r,t,e,n,s){return r==="OVERLONG"?(d(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),Ao(r,t,e))}const Dc=Object.freeze({error:Lc,ignore:Ao,replace:Fc});function Mc(r,t){t==null&&(t=Dc.error);const e=M(r,"bytes"),n=[];let s=0;for(;s<e.length;){const i=e[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,n):s+=t("BAD_PREFIX",s-1,e,n);continue}if(s-1+o>=e.length){s+=t("OVERRUN",s-1,e,n);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=e[s];if((u&192)!=128){s+=t("MISSING_CONTINUE",s,e,n),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=t("OUT_OF_RANGE",s-1-o,e,n,c);continue}if(c>=55296&&c<=57343){s+=t("UTF16_SURROGATE",s-1-o,e,n,c);continue}if(c<=a){s+=t("OVERLONG",s-1-o,e,n,c);continue}n.push(c)}}return n}function ie(r,t){d(typeof r=="string","invalid string value","str",r);let e=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){n++;const i=r.charCodeAt(n);d(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((s&1023)<<10)+(i&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function Gc(r){return r.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function or(r,t){return Gc(Mc(r,t))}function bo(r){async function t(e,n){A(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();A(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),A(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=q("request timeout","TIMEOUT"),o.abort()},e.timeout);n&&n.addListener(()=>{i=q("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},r,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});let l;try{l=await fetch(e.url,c)}catch(g){throw clearTimeout(a),i||g}clearTimeout(a);const u={};l.headers.forEach((g,y)=>{u[y.toLowerCase()]=g});const f=await l.arrayBuffer(),h=f==null?null:new Uint8Array(f);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return t}const Hc=12,Qc=250;let Js=bo();const Vc=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),zc=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Pr=!1;async function Eo(r,t){try{const e=r.match(Vc);if(!e)throw new Error("invalid data");return new Ee(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?Tc(e[3]):Jc(e[3]))}catch{return new Ee(599,"BAD REQUEST (invalid data: URI)",{},null,new Wt(r))}}function xo(r){async function t(e,n){try{const s=e.match(zc);if(!s)throw new Error("invalid link");return new Wt(`${r}${s[2]}`)}catch{return new Ee(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Wt(e))}}return t}const Gn={data:Eo,ipfs:xo("https://gateway.ipfs.io/ipfs/")},No=new WeakMap;class jc{#t;#e;constructor(t){this.#t=[],this.#e=!1,No.set(t,()=>{if(!this.#e){this.#e=!0;for(const e of this.#t)setTimeout(()=>{e()},0);this.#t=[]}})}addListener(t){A(!this.#e,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#t.push(t)}get cancelled(){return this.#e}checkSignal(){A(!this.cancelled,"cancelled","CANCELLED",{})}}function Hn(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}class Wt{#t;#e;#n;#r;#s;#o;#i;#a;#f;#l;#p;#g;#c;#u;#h;get url(){return this.#o}set url(t){this.#o=String(t)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(t){if(t==null)this.#i=void 0,this.#a=void 0;else if(typeof t=="string")this.#i=ie(t),this.#a="text/plain";else if(t instanceof Uint8Array)this.#i=t,this.#a="application/octet-stream";else if(typeof t=="object")this.#i=ie(JSON.stringify(t)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#r?this.#r:this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),this.#r=String(t).toUpperCase()}get headers(){const t=Object.assign({},this.#n);return this.#f&&(t.authorization=`Basic ${Uc(ie(this.#f))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&this.#a&&(t["content-type"]=this.#a),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){this.#n[String(t).toLowerCase()]=String(e)}clearHeaders(){this.#n={}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#f||null}setCredentials(t,e){d(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#f=`${t}:${e}`}get allowGzip(){return this.#e}set allowGzip(t){this.#e=!!t}get allowInsecureAuthentication(){return!!this.#t}set allowInsecureAuthentication(t){this.#t=!!t}get timeout(){return this.#s}set timeout(t){d(t>=0,"timeout must be non-zero","timeout",t),this.#s=t}get preflightFunc(){return this.#l||null}set preflightFunc(t){this.#l=t}get processFunc(){return this.#p||null}set processFunc(t){this.#p=t}get retryFunc(){return this.#g||null}set retryFunc(t){this.#g=t}get getUrlFunc(){return this.#h||Js}set getUrlFunc(t){this.#h=t}constructor(t){this.#o=String(t),this.#t=!1,this.#e=!0,this.#n={},this.#r="",this.#s=3e5,this.#u={slotInterval:Qc,maxAttempts:Hc},this.#h=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?P(this.#i):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(this.#u.slotInterval=t.slotInterval),t.maxAttempts!=null&&(this.#u.maxAttempts=t.maxAttempts)}async#d(t,e,n,s,i){if(t>=this.#u.maxAttempts)return i.makeServerError("exceeded maximum retry limit");A(Ks()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await Kc(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Gn){const u=await Gn[a](o.url,Hn(s.#c));if(u instanceof Ee){let f=u;if(this.processFunc){Hn(s.#c);try{f=await this.processFunc(o,f)}catch(h){(h.throttle==null||typeof h.stall!="number")&&f.makeServerError("error in post-processing function",h).assertOk()}}return f}o=u}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Hn(s.#c));let l=new Ee(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const u=l.headers.location||"";return o.redirect(u).#d(t+1,e,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,t))){const u=l.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof u=="string"&&u.match(/^[1-9][0-9]*$/)&&(f=parseInt(u)),o.clone().#d(t+1,e,f,s,l)}if(this.processFunc){Hn(s.#c);try{l=await this.processFunc(o,l)}catch(u){(u.throttle==null||typeof u.stall!="number")&&l.makeServerError("error in post-processing function",u).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return u.stall>=0&&(f=u.stall),o.clone().#d(t+1,e,f,s,l)}}return l}send(){return A(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new jc(this),this.#d(0,Ks()+this.timeout,0,this,new Ee(0,"",{},null,this))}cancel(){A(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=No.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();A(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new Wt(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#n=Object.assign({},this.#n),this.#i&&(s.#i=new Uint8Array(this.#i)),s.#a=this.#a,s}clone(){const t=new Wt(this.url);return t.#r=this.#r,this.#i&&(t.#i=this.#i),t.#a=this.#a,t.#n=Object.assign({},this.#n),t.#f=this.#f,this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),t.#l=this.#l,t.#p=this.#p,t.#g=this.#g,t.#u=Object.assign({},this.#u),t.#h=this.#h,t}static lockConfig(){Pr=!0}static getGateway(t){return Gn[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Pr)throw new Error("gateways locked");Gn[t]=e}static registerGetUrl(t){if(Pr)throw new Error("gateways locked");Js=t}static createGetUrlFunc(t){return bo(t)}static createDataGateway(){return Eo}static createIpfsGatewayFunc(t){return xo(t)}}class Ee{#t;#e;#n;#r;#s;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#r?P(this.#r):"null"}>`}get statusCode(){return this.#t}get statusMessage(){return this.#e}get headers(){return Object.assign({},this.#n)}get body(){return this.#r==null?null:new Uint8Array(this.#r)}get bodyText(){try{return this.#r==null?"":or(this.#r)}catch{A(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{A(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(t,e,n,s,i){this.#t=t,this.#e=e,this.#n=Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{}),this.#r=s==null?null:new Uint8Array(s),this.#s=i||null,this.#o={message:""}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new Ee(599,n,this.headers,this.body,this.#s||void 0);return s.#o={message:t,error:e},s}throwThrottleError(t,e){e==null?e=-1:d(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw U(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return this.#r!=null}get request(){return this.#s}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=this.#o;t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{this.#r&&(s=or(this.#r))}catch{}A(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function Ks(){return new Date().getTime()}function Jc(r){return ie(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function Kc(r){return new Promise(t=>setTimeout(t,r))}const _c=BigInt(-1),Dt=BigInt(0),$e=BigInt(1),Zc=BigInt(5),_e={};let nn="0000";for(;nn.length<80;)nn+=nn;function Be(r){let t=nn;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function gn(r,t,e){const n=BigInt(t.width);if(t.signed){const s=$e<<n-$e;A(e==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r>Dt?r=ir(Le(r,n),n):r=-ir(Le(-r,n),n)}else{const s=$e<<n;A(e==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r=(r%s+s)%s&s-$e}return r}function vr(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,e=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const i=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);d(i,"invalid fixed format","format",r),t=i[1]!=="u",e=parseInt(i[2]),n=parseInt(i[3])}}else if(r){const i=r,o=(a,c,l)=>i[a]==null?l:(d(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);t=o("signed","boolean",t),e=o("width","number",e),n=o("decimals","number",n)}d(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),d(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:s}}function Wc(r,t){let e="";r<Dt&&(e="-",r*=_c);let n=r.toString();if(t===0)return e+n;for(;n.length<=t;)n=nn+n;const s=n.length-t;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}class $t{format;#t;#e;#n;_value;constructor(t,e,n){On(t,_e,"FixedNumber"),this.#e=e,this.#t=n;const s=Wc(e,n.decimals);U(this,{format:n.name,_value:s}),this.#n=Be(n.decimals)}get signed(){return this.#t.signed}get width(){return this.#t.width}get decimals(){return this.#t.decimals}get value(){return this.#e}#r(t){d(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)}#s(t,e){return t=gn(t,this.#t,e),new $t(_e,t,this.#t)}#o(t,e){return this.#r(t),this.#s(this.#e+t.#e,e)}addUnsafe(t){return this.#o(t)}add(t){return this.#o(t,"add")}#i(t,e){return this.#r(t),this.#s(this.#e-t.#e,e)}subUnsafe(t){return this.#i(t)}sub(t){return this.#i(t,"sub")}#a(t,e){return this.#r(t),this.#s(this.#e*t.#e/this.#n,e)}mulUnsafe(t){return this.#a(t)}mul(t){return this.#a(t,"mul")}mulSignal(t){this.#r(t);const e=this.#e*t.#e;return A(e%this.#n===Dt,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#s(e/this.#n,"mulSignal")}#f(t,e){return A(t.#e!==Dt,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(t),this.#s(this.#e*this.#n/t.#e,e)}divUnsafe(t){return this.#f(t)}div(t){return this.#f(t,"div")}divSignal(t){A(t.#e!==Dt,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(t);const e=this.#e*this.#n;return A(e%t.#e===Dt,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#s(e/t.#e,"divSignal")}cmp(t){let e=this.value,n=t.value;const s=this.decimals-t.decimals;return s>0?n*=Be(s):s<0&&(e*=Be(-s)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=this.#e;return this.#e<Dt&&(t-=this.#n-$e),t=this.#e/this.#n*this.#n,this.#s(t,"floor")}ceiling(){let t=this.#e;return this.#e>Dt&&(t+=this.#n-$e),t=this.#e/this.#n*this.#n,this.#s(t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=Zc*Be(e-1);let s=this.value+n;const i=Be(e);return s=s/i*i,gn(s,this.#t,"round"),new $t(_e,s,this.#t)}isZero(){return this.#e===Dt}isNegative(){return this.#e<Dt}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return $t.fromString(this.toString(),t)}static fromValue(t,e,n){const s=e==null?0:F(e),i=vr(n);let o=I(t,"value");const a=s-i.decimals;if(a>0){const c=Be(a);A(o%c===Dt,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=Be(-a));return gn(o,i,"fromValue"),new $t(_e,o,i)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);d(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const s=vr(e);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=nn;A(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return gn(a,s,"fromString"),new $t(_e,a,s)}static fromBytes(t,e){let n=hr(M(t,"value"));const s=vr(e);return s.signed&&(n=ir(n,s.width)),gn(n,s,"fromBytes"),new $t(_e,n,s)}}function Yc(r){let t=r.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function _s(r,t,e){let n=0;for(let s=0;s<e;s++)n=n*256+r[t+s];return n}function Zs(r,t,e,n){const s=[];for(;e<t+1+n;){const i=Po(r,e);s.push(i.result),e+=i.consumed,A(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:t})}return{consumed:1+n,result:s}}function Po(r,t){A(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const e=n=>{A(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[t]>=248){const n=r[t]-247;e(t+1+n);const s=_s(r,t+1,n);return e(t+1+n+s),Zs(r,t,t+1+n,n+s)}else if(r[t]>=192){const n=r[t]-192;return e(t+1+n),Zs(r,t,t+1,n)}else if(r[t]>=184){const n=r[t]-183;e(t+1+n);const s=_s(r,t+1,n);e(t+1+n+s);const i=P(r.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:i}}else if(r[t]>=128){const n=r[t]-128;e(t+1+n);const s=P(r.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:Yc(r[t])}}function Tn(r){const t=M(r,"data"),e=Po(t,0);return d(e.consumed===t.length,"unexpected junk after rlp payload","data",r),e.result}function Ws(r){const t=[];for(;r;)t.unshift(r&255),r>>=8;return t}function vo(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(i){n=n.concat(vo(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=Ws(n.length);return s.unshift(247+s.length),s.concat(n)}const t=Array.prototype.slice.call(M(r,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Ws(t.length);return e.unshift(183+e.length),e.concat(t)}const Ys="0123456789abcdef";function oe(r){let t="0x";for(const e of vo(r))t+=Ys[e>>4],t+=Ys[e&15];return t}function Xc(r,t){let e=18;return e=F(t,"unit"),$t.fromValue(r,e,{decimals:e,width:512}).toString()}function qc(r,t){d(typeof r=="string","value must be a string","value",r);let e=18;return e=F(t,"unit"),$t.fromString(r,{decimals:e,width:512}).value}function Yr(r){return Xc(r,18)}function Br(r){return qc(r,18)}const Et=32,Xr=new Uint8Array(Et),$c=["then"],Qn={},Bo=new WeakMap;function Re(r){return Bo.get(r)}function Xs(r,t){Bo.set(r,t)}function mn(r,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw e.error=t,e}function qr(r,t,e){return r.indexOf(null)>=0?t.map((n,s)=>n instanceof re?qr(Re(n),n,e):n):r.reduce((n,s,i)=>{let o=t.getValue(s);return s in n||(e&&o instanceof re&&(o=qr(Re(o),o,e)),n[s]=o),n},{})}class re extends Array{#t;constructor(...t){const e=t[0];let n=t[1],s=(t[2]||[]).slice(),i=!0;e!==Qn&&(n=t,s=[],i=!1),super(n.length),n.forEach((c,l)=>{this[l]=c});const o=s.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(Xs(this,Object.freeze(n.map((c,l)=>{const u=s[l];return u!=null&&o.get(u)===1?u:null}))),this.#t=[],this.#t==null&&this.#t,!i)return;Object.freeze(this);const a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const h=F(l,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const g=c[h];return g instanceof Error&&mn(`index ${h}`,g),g}if($c.indexOf(l)>=0)return Reflect.get(c,l,u);const f=c[l];if(f instanceof Function)return function(...h){return f.apply(this===u?c:this,h)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return Xs(a,Re(this)),a}toArray(t){const e=[];return this.forEach((n,s)=>{n instanceof Error&&mn(`index ${s}`,n),t&&n instanceof re&&(n=n.toArray(t)),e.push(n)}),e}toObject(t){const e=Re(this);return e.reduce((n,s,i)=>(A(s!=null,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),qr(e,this,t)),{})}slice(t,e){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),e==null&&(e=this.length),e<0&&(e+=this.length,e<0&&(e=0)),e>this.length&&(e=this.length);const n=Re(this),s=[],i=[];for(let o=t;o<e;o++)s.push(this[o]),i.push(n[o]);return new re(Qn,s,i)}filter(t,e){const n=Re(this),s=[],i=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&mn(`index ${o}`,a),t.call(e,a,o,this)&&(s.push(a),i.push(n[o]))}return new re(Qn,s,i)}map(t,e){const n=[];for(let s=0;s<this.length;s++){const i=this[s];i instanceof Error&&mn(`index ${s}`,i),n.push(t.call(e,i,s,this))}return n}getValue(t){const e=Re(this).indexOf(t);if(e===-1)return;const n=this[e];return n instanceof Error&&mn(`property ${JSON.stringify(t)}`,n.error),n}static fromItems(t,e){return new re(Qn,t,e)}}function qs(r){let t=ut(r);return A(t.length<=Et,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Et,offset:t.length}),t.length!==Et&&(t=bt($([Xr.slice(t.length%Et),t]))),t}class ue{name;type;localName;dynamic;constructor(t,e,n,s){U(this,{name:t,type:e,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){d(!1,t,this.localName,e)}}class $r{#t;#e;constructor(){this.#t=[],this.#e=0}get data(){return $(this.#t)}get length(){return this.#e}#n(t){return this.#t.push(t),this.#e+=t.length,t.length}appendWriter(t){return this.#n(bt(t.data))}writeBytes(t){let e=bt(t);const n=e.length%Et;return n&&(e=bt($([e,Xr.slice(n)]))),this.#n(e)}writeValue(t){return this.#n(qs(t))}writeUpdatableValue(){const t=this.#t.length;return this.#t.push(Xr),this.#e+=Et,e=>{this.#t[t]=qs(e)}}}class As{allowLoose;#t;#e;#n;#r;#s;constructor(t,e,n){U(this,{allowLoose:!!e}),this.#t=bt(t),this.#n=0,this.#r=null,this.#s=n??1024,this.#e=0}get data(){return P(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#e}get bytes(){return new Uint8Array(this.#t)}#o(t){if(this.#r)return this.#r.#o(t);this.#n+=t,A(this.#s<1||this.#n<=this.#s*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#s} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:bt(this.#t),offset:this.#e,length:t,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#i(t,e,n){let s=Math.ceil(e/Et)*Et;return this.#e+s>this.#t.length&&(this.allowLoose&&n&&this.#e+e<=this.#t.length?s=e:A(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:bt(this.#t),length:this.#t.length,offset:this.#e+s})),this.#t.slice(this.#e,this.#e+s)}subReader(t){const e=new As(this.#t.slice(this.#e+t),this.allowLoose,this.#s);return e.#r=this,e}readBytes(t,e){let n=this.#i(0,t,!!e);return this.#o(t),this.#e+=n.length,n.slice(0,t)}readValue(){return hr(this.readBytes(Et))}readIndex(){return Oc(this.readBytes(Et))}}function ar(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function bs(r,...t){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(r.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${r.length}`)}function tl(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ar(r.outputLen),ar(r.blockLen)}function cn(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Io(r,t){bs(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Ir=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const Co=r=>r instanceof Uint8Array,el=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Cr=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Jt=(r,t)=>r<<32-t|r>>>t,nl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!nl)throw new Error("Non little-endian hardware is not supported");function rl(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function dr(r){if(typeof r=="string"&&(r=rl(r)),!Co(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function sl(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!Co(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}class Es{clone(){return this._cloneInto()}}function xs(r){const t=n=>r().update(dr(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function il(r=32){if(Ir&&typeof Ir.getRandomValues=="function")return Ir.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class ko extends Es{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,tl(t);const n=dr(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return cn(this),this.iHash.update(t),this}digestInto(t){cn(this),bs(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ro=(r,t,e)=>new ko(r,t).update(e).digest();Ro.create=(r,t)=>new ko(r,t);function ol(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=n?4:0,l=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+l,a,n)}class Oo extends Es{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Cr(this.buffer)}update(t){cn(this);const{view:e,buffer:n,blockLen:s}=this;t=dr(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Cr(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){cn(this),Io(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let f=o;f<s;f++)e[f]=0;ol(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Cr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const al=(r,t,e)=>r&t^~r&e,cl=(r,t,e)=>r&t^r&e^t&e,ll=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),de=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pe=new Uint32Array(64);class ul extends Oo{constructor(){super(64,32,8,!1),this.A=de[0]|0,this.B=de[1]|0,this.C=de[2]|0,this.D=de[3]|0,this.E=de[4]|0,this.F=de[5]|0,this.G=de[6]|0,this.H=de[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,n,s,i,o,a,c]}set(t,e,n,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let f=0;f<16;f++,e+=4)pe[f]=t.getUint32(e,!1);for(let f=16;f<64;f++){const h=pe[f-15],g=pe[f-2],y=Jt(h,7)^Jt(h,18)^h>>>3,p=Jt(g,17)^Jt(g,19)^g>>>10;pe[f]=p+pe[f-7]+y+pe[f-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const h=Jt(a,6)^Jt(a,11)^Jt(a,25),g=u+h+al(a,c,l)+ll[f]+pe[f]|0,p=(Jt(n,2)^Jt(n,13)^Jt(n,22))+cl(n,s,i)|0;u=l,l=c,c=a,a=o+g|0,o=i,i=s,s=n,n=g+p|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){pe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const So=xs(()=>new ul),Vn=BigInt(2**32-1),ts=BigInt(32);function To(r,t=!1){return t?{h:Number(r&Vn),l:Number(r>>ts&Vn)}:{h:Number(r>>ts&Vn)|0,l:Number(r&Vn)|0}}function Uo(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=To(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const fl=(r,t)=>BigInt(r>>>0)<<ts|BigInt(t>>>0),hl=(r,t,e)=>r>>>e,dl=(r,t,e)=>r<<32-e|t>>>e,pl=(r,t,e)=>r>>>e|t<<32-e,gl=(r,t,e)=>r<<32-e|t>>>e,ml=(r,t,e)=>r<<64-e|t>>>e-32,yl=(r,t,e)=>r>>>e-32|t<<64-e,wl=(r,t)=>t,Al=(r,t)=>r,Lo=(r,t,e)=>r<<e|t>>>32-e,Fo=(r,t,e)=>t<<e|r>>>32-e,Do=(r,t,e)=>t<<e-32|r>>>64-e,Mo=(r,t,e)=>r<<e-32|t>>>64-e;function bl(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const El=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),xl=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Nl=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Pl=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,vl=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Bl=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,D={fromBig:To,split:Uo,toBig:fl,shrSH:hl,shrSL:dl,rotrSH:pl,rotrSL:gl,rotrBH:ml,rotrBL:yl,rotr32H:wl,rotr32L:Al,rotlSH:Lo,rotlSL:Fo,rotlBH:Do,rotlBL:Mo,add:bl,add3L:El,add3H:xl,add4L:Nl,add4H:Pl,add5H:Bl,add5L:vl},[Il,Cl]=D.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),ge=new Uint32Array(80),me=new Uint32Array(80);class kl extends Oo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:h,Gh:g,Gl:y,Hh:p,Hl:m}=this;return[t,e,n,s,i,o,a,c,l,u,f,h,g,y,p,m]}set(t,e,n,s,i,o,a,c,l,u,f,h,g,y,p,m){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=h|0,this.Gh=g|0,this.Gl=y|0,this.Hh=p|0,this.Hl=m|0}process(t,e){for(let E=0;E<16;E++,e+=4)ge[E]=t.getUint32(e),me[E]=t.getUint32(e+=4);for(let E=16;E<80;E++){const T=ge[E-15]|0,O=me[E-15]|0,C=D.rotrSH(T,O,1)^D.rotrSH(T,O,8)^D.shrSH(T,O,7),S=D.rotrSL(T,O,1)^D.rotrSL(T,O,8)^D.shrSL(T,O,7),k=ge[E-2]|0,j=me[E-2]|0,L=D.rotrSH(k,j,19)^D.rotrBH(k,j,61)^D.shrSH(k,j,6),G=D.rotrSL(k,j,19)^D.rotrBL(k,j,61)^D.shrSL(k,j,6),tt=D.add4L(S,G,me[E-7],me[E-16]),st=D.add4H(tt,C,L,ge[E-7],ge[E-16]);ge[E]=st|0,me[E]=tt|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:h,Fh:g,Fl:y,Gh:p,Gl:m,Hh:w,Hl:N}=this;for(let E=0;E<80;E++){const T=D.rotrSH(f,h,14)^D.rotrSH(f,h,18)^D.rotrBH(f,h,41),O=D.rotrSL(f,h,14)^D.rotrSL(f,h,18)^D.rotrBL(f,h,41),C=f&g^~f&p,S=h&y^~h&m,k=D.add5L(N,O,S,Cl[E],me[E]),j=D.add5H(k,w,T,C,Il[E],ge[E]),L=k|0,G=D.rotrSH(n,s,28)^D.rotrBH(n,s,34)^D.rotrBH(n,s,39),tt=D.rotrSL(n,s,28)^D.rotrBL(n,s,34)^D.rotrBL(n,s,39),st=n&i^n&a^i&a,Pt=s&o^s&c^o&c;w=p|0,N=m|0,p=g|0,m=y|0,g=f|0,y=h|0,{h:f,l:h}=D.add(l|0,u|0,j|0,L|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const x=D.add3L(L,tt,Pt);n=D.add3H(x,j,G,st),s=x|0}({h:n,l:s}=D.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=D.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=D.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=D.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:h}=D.add(this.Eh|0,this.El|0,f|0,h|0),{h:g,l:y}=D.add(this.Fh|0,this.Fl|0,g|0,y|0),{h:p,l:m}=D.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:w,l:N}=D.add(this.Hh|0,this.Hl|0,w|0,N|0),this.set(n,s,i,o,a,c,l,u,f,h,g,y,p,m,w,N)}roundClean(){ge.fill(0),me.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Rl=xs(()=>new kl);function Ol(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const $s=Ol();$s.crypto||$s.msCrypto;function Sl(r){switch(r){case"sha256":return So.create();case"sha512":return Rl.create()}d(!1,"invalid hashing algorithm name","algorithm",r)}const[Go,Ho,Qo]=[[],[],[]],Tl=BigInt(0),yn=BigInt(1),Ul=BigInt(2),Ll=BigInt(7),Fl=BigInt(256),Dl=BigInt(113);for(let r=0,t=yn,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],Go.push(2*(5*n+e)),Ho.push((r+1)*(r+2)/2%64);let s=Tl;for(let i=0;i<7;i++)t=(t<<yn^(t>>Ll)*Dl)%Fl,t&Ul&&(s^=yn<<(yn<<BigInt(i))-yn);Qo.push(s)}const[Ml,Gl]=Uo(Qo,!0),ti=(r,t,e)=>e>32?Do(r,t,e):Lo(r,t,e),ei=(r,t,e)=>e>32?Mo(r,t,e):Fo(r,t,e);function Hl(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=e[c],u=e[c+1],f=ti(l,u,1)^e[a],h=ei(l,u,1)^e[a+1];for(let g=0;g<50;g+=10)r[o+g]^=f,r[o+g+1]^=h}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=Ho[o],c=ti(s,i,a),l=ei(s,i,a),u=Go[o];s=r[u],i=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}r[0]^=Ml[n],r[1]^=Gl[n]}e.fill(0)}class Ns extends Es{constructor(t,e,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ar(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=el(this.state)}keccak(){Hl(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){cn(this);const{blockLen:e,state:n}=this;t=dr(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,(e&128)!==0&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){cn(this,!1),bs(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ar(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Io(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Ns(e,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Ql=(r,t,e)=>xs(()=>new Ns(t,r,e)),Vl=Ql(1,136,256/8);let Vo=!1;const zo=function(r){return Vl(r)};let jo=zo;function lt(r){const t=M(r,"data");return P(jo(t))}lt._=zo;lt.lock=function(){Vo=!0};lt.register=function(r){if(Vo)throw new TypeError("keccak256 is locked");jo=r};Object.freeze(lt);const Jo=function(r){return Sl("sha256").update(r).digest()};let Ko=Jo,_o=!1;function dn(r){const t=M(r,"data");return P(Ko(t))}dn._=Jo;dn.lock=function(){_o=!0};dn.register=function(r){if(_o)throw new Error("sha256 is locked");Ko=r};Object.freeze(dn);Object.freeze(dn);BigInt(0);const zl=BigInt(1),jl=BigInt(2),pr=r=>r instanceof Uint8Array,Jl=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function ln(r){if(!pr(r))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=Jl[r[e]];return t}function Ps(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Bn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let n=0;n<e.length;n++){const s=n*2,i=r.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function Me(r){return Ps(ln(r))}function vs(r){if(!pr(r))throw new Error("Uint8Array expected");return Ps(ln(Uint8Array.from(r).reverse()))}function un(r,t){return Bn(r.toString(16).padStart(t*2,"0"))}function Bs(r,t){return un(r,t).reverse()}function Mt(r,t,e){let n;if(typeof t=="string")try{n=Bn(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(pr(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function In(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!pr(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}const Is=r=>(jl<<BigInt(r-1))-zl,kr=r=>new Uint8Array(r),ni=r=>Uint8Array.from(r);function Zo(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=kr(r),s=kr(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...f)=>e(s,n,...f),c=(f=kr())=>{s=a(ni([0]),f),n=a(),f.length!==0&&(s=a(ni([1]),f),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<t;){n=a();const g=n.slice();h.push(g),f+=n.length}return In(...h)};return(f,h)=>{o(),c(f);let g;for(;!(g=h(l()));)c();return o(),g}}const Kl={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Un(r,t,e={}){const n=(s,i,o)=>{const a=Kl[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const _l=Object.freeze(Object.defineProperty({__proto__:null,bitMask:Is,bytesToHex:ln,bytesToNumberBE:Me,bytesToNumberLE:vs,concatBytes:In,createHmacDrbg:Zo,ensureBytes:Mt,hexToBytes:Bn,hexToNumber:Ps,numberToBytesBE:un,numberToBytesLE:Bs,validateObject:Un},Symbol.toStringTag,{value:"Module"}));const pt=BigInt(0),ct=BigInt(1),Oe=BigInt(2),Zl=BigInt(3),es=BigInt(4),ri=BigInt(5),si=BigInt(8);BigInt(9);BigInt(16);function vt(r,t){const e=r%t;return e>=pt?e:t+e}function Wl(r,t,e){if(e<=pt||t<pt)throw new Error("Expected power/modulo > 0");if(e===ct)return pt;let n=ct;for(;t>pt;)t&ct&&(n=n*r%e),r=r*r%e,t>>=ct;return n}function Ot(r,t,e){let n=r;for(;t-- >pt;)n*=n,n%=e;return n}function ns(r,t){if(r===pt||t<=pt)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=vt(r,t),n=t,s=pt,i=ct;for(;e!==pt;){const a=n/e,c=n%e,l=s-i*a;n=e,e=c,s=i,i=l}if(n!==ct)throw new Error("invert: does not exist");return vt(s,t)}function Yl(r){const t=(r-ct)/Oe;let e,n,s;for(e=r-ct,n=0;e%Oe===pt;e/=Oe,n++);for(s=Oe;s<r&&Wl(s,t,r)!==r-ct;s++);if(n===1){const o=(r+ct)/es;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(e+ct)/Oe;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,s),e),f=a.pow(c,i),h=a.pow(c,e);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let g=1;for(let p=a.sqr(h);g<l&&!a.eql(p,a.ONE);g++)p=a.sqr(p);const y=a.pow(u,ct<<BigInt(l-g-1));u=a.sqr(y),f=a.mul(f,y),h=a.mul(h,u),l=g}return f}}function Xl(r){if(r%es===Zl){const t=(r+ct)/es;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%si===ri){const t=(r-ri)/si;return function(n,s){const i=n.mul(s,Oe),o=n.pow(i,t),a=n.mul(s,o),c=n.mul(n.mul(a,Oe),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),s))throw new Error("Cannot find square root");return l}}return Yl(r)}const ql=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $l(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=ql.reduce((n,s)=>(n[s]="function",n),t);return Un(r,e)}function tu(r,t,e){if(e<pt)throw new Error("Expected power > 0");if(e===pt)return r.ONE;if(e===ct)return t;let n=r.ONE,s=t;for(;e>pt;)e&ct&&(n=r.mul(n,s)),s=r.sqr(s),e>>=ct;return n}function eu(r,t){const e=new Array(t.length),n=t.reduce((i,o,a)=>r.is0(o)?i:(e[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,a)=>r.is0(o)?i:(e[a]=r.mul(i,e[a]),r.mul(i,o)),s),e}function Wo(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function nu(r,t,e=!1,n={}){if(r<=pt)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=Wo(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Xl(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:Is(s),ZERO:pt,ONE:ct,create:c=>vt(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return pt<=c&&c<r},is0:c=>c===pt,isOdd:c=>(c&ct)===ct,neg:c=>vt(-c,r),eql:(c,l)=>c===l,sqr:c=>vt(c*c,r),add:(c,l)=>vt(c+l,r),sub:(c,l)=>vt(c-l,r),mul:(c,l)=>vt(c*l,r),pow:(c,l)=>tu(a,c,l),div:(c,l)=>vt(c*ns(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>ns(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>eu(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>e?Bs(c,i):un(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?vs(c):Me(c)}});return Object.freeze(a)}function Yo(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Xo(r){const t=Yo(r);return t+Math.ceil(t/2)}function ru(r,t,e=!1){const n=r.length,s=Yo(t),i=Xo(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=e?Me(r):vs(r),a=vt(o,t-ct)+ct;return e?Bs(a,s):un(a,s)}const su=BigInt(0),Rr=BigInt(1);function iu(r,t){const e=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>su;)i&Rr&&(o=o.add(a)),a=a.double(),i>>=Rr;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let l=s,u=l;for(let f=0;f<o;f++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let l=r.ZERO,u=r.BASE;const f=BigInt(2**s-1),h=2**s,g=BigInt(s);for(let y=0;y<a;y++){const p=y*c;let m=Number(o&f);o>>=g,m>c&&(m-=h,o+=Rr);const w=p,N=p+Math.abs(m)-1,E=y%2!==0,T=m<0;m===0?u=u.add(e(E,i[w])):l=l.add(e(T,i[N]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function qo(r){return $l(r.Fp),Un(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Wo(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}function ou(r){const t=qo(r);Un(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:au,hexToBytes:cu}=_l,Fe={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=Fe;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:au(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=Fe,e=typeof r=="string"?cu(r):r;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Fe._parseInt(e.subarray(2)),{d:o,l:a}=Fe._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,e=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,o=s.length/2,a=e(i),c=e(o);return`30${e(o+i+4)}02${c}${s}02${a}${n}`}},ee=BigInt(0),St=BigInt(1);BigInt(2);const ii=BigInt(3);BigInt(4);function lu(r){const t=ou(r),{Fp:e}=t,n=t.toBytes||((y,p,m)=>{const w=p.toAffine();return In(Uint8Array.from([4]),e.toBytes(w.x),e.toBytes(w.y))}),s=t.fromBytes||(y=>{const p=y.subarray(1),m=e.fromBytes(p.subarray(0,e.BYTES)),w=e.fromBytes(p.subarray(e.BYTES,2*e.BYTES));return{x:m,y:w}});function i(y){const{a:p,b:m}=t,w=e.sqr(y),N=e.mul(w,y);return e.add(e.add(N,e.mul(y,p)),m)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(y){return typeof y=="bigint"&&ee<y&&y<t.n}function a(y){if(!o(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(y){const{allowedPrivateKeyLengths:p,nByteLength:m,wrapPrivateKey:w,n:N}=t;if(p&&typeof y!="bigint"){if(y instanceof Uint8Array&&(y=ln(y)),typeof y!="string"||!p.includes(y.length))throw new Error("Invalid key");y=y.padStart(m*2,"0")}let E;try{E=typeof y=="bigint"?y:Me(Mt("private key",y,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof y}`)}return w&&(E=vt(E,N)),a(E),E}const l=new Map;function u(y){if(!(y instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(p,m,w){if(this.px=p,this.py=m,this.pz=w,p==null||!e.isValid(p))throw new Error("x required");if(m==null||!e.isValid(m))throw new Error("y required");if(w==null||!e.isValid(w))throw new Error("z required")}static fromAffine(p){const{x:m,y:w}=p||{};if(!p||!e.isValid(m)||!e.isValid(w))throw new Error("invalid affine point");if(p instanceof f)throw new Error("projective point not allowed");const N=E=>e.eql(E,e.ZERO);return N(m)&&N(w)?f.ZERO:new f(m,w,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const m=e.invertBatch(p.map(w=>w.pz));return p.map((w,N)=>w.toAffine(m[N])).map(f.fromAffine)}static fromHex(p){const m=f.fromAffine(s(Mt("pointHex",p)));return m.assertValidity(),m}static fromPrivateKey(p){return f.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:p,y:m}=this.toAffine();if(!e.isValid(p)||!e.isValid(m))throw new Error("bad point: x or y not FE");const w=e.sqr(m),N=i(p);if(!e.eql(w,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:p}=this.toAffine();if(e.isOdd)return!e.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:m,py:w,pz:N}=this,{px:E,py:T,pz:O}=p,C=e.eql(e.mul(m,O),e.mul(E,N)),S=e.eql(e.mul(w,O),e.mul(T,N));return C&&S}negate(){return new f(this.px,e.neg(this.py),this.pz)}double(){const{a:p,b:m}=t,w=e.mul(m,ii),{px:N,py:E,pz:T}=this;let O=e.ZERO,C=e.ZERO,S=e.ZERO,k=e.mul(N,N),j=e.mul(E,E),L=e.mul(T,T),G=e.mul(N,E);return G=e.add(G,G),S=e.mul(N,T),S=e.add(S,S),O=e.mul(p,S),C=e.mul(w,L),C=e.add(O,C),O=e.sub(j,C),C=e.add(j,C),C=e.mul(O,C),O=e.mul(G,O),S=e.mul(w,S),L=e.mul(p,L),G=e.sub(k,L),G=e.mul(p,G),G=e.add(G,S),S=e.add(k,k),k=e.add(S,k),k=e.add(k,L),k=e.mul(k,G),C=e.add(C,k),L=e.mul(E,T),L=e.add(L,L),k=e.mul(L,G),O=e.sub(O,k),S=e.mul(L,j),S=e.add(S,S),S=e.add(S,S),new f(O,C,S)}add(p){u(p);const{px:m,py:w,pz:N}=this,{px:E,py:T,pz:O}=p;let C=e.ZERO,S=e.ZERO,k=e.ZERO;const j=t.a,L=e.mul(t.b,ii);let G=e.mul(m,E),tt=e.mul(w,T),st=e.mul(N,O),Pt=e.add(m,w),x=e.add(E,T);Pt=e.mul(Pt,x),x=e.add(G,tt),Pt=e.sub(Pt,x),x=e.add(m,N);let v=e.add(E,O);return x=e.mul(x,v),v=e.add(G,st),x=e.sub(x,v),v=e.add(w,N),C=e.add(T,O),v=e.mul(v,C),C=e.add(tt,st),v=e.sub(v,C),k=e.mul(j,x),C=e.mul(L,st),k=e.add(C,k),C=e.sub(tt,k),k=e.add(tt,k),S=e.mul(C,k),tt=e.add(G,G),tt=e.add(tt,G),st=e.mul(j,st),x=e.mul(L,x),tt=e.add(tt,st),st=e.sub(G,st),st=e.mul(j,st),x=e.add(x,st),G=e.mul(tt,x),S=e.add(S,G),G=e.mul(v,x),C=e.mul(Pt,C),C=e.sub(C,G),G=e.mul(Pt,tt),k=e.mul(v,k),k=e.add(k,G),new f(C,S,k)}subtract(p){return this.add(p.negate())}is0(){return this.equals(f.ZERO)}wNAF(p){return g.wNAFCached(this,l,p,m=>{const w=e.invertBatch(m.map(N=>N.pz));return m.map((N,E)=>N.toAffine(w[E])).map(f.fromAffine)})}multiplyUnsafe(p){const m=f.ZERO;if(p===ee)return m;if(a(p),p===St)return this;const{endo:w}=t;if(!w)return g.unsafeLadder(this,p);let{k1neg:N,k1:E,k2neg:T,k2:O}=w.splitScalar(p),C=m,S=m,k=this;for(;E>ee||O>ee;)E&St&&(C=C.add(k)),O&St&&(S=S.add(k)),k=k.double(),E>>=St,O>>=St;return N&&(C=C.negate()),T&&(S=S.negate()),S=new f(e.mul(S.px,w.beta),S.py,S.pz),C.add(S)}multiply(p){a(p);let m=p,w,N;const{endo:E}=t;if(E){const{k1neg:T,k1:O,k2neg:C,k2:S}=E.splitScalar(m);let{p:k,f:j}=this.wNAF(O),{p:L,f:G}=this.wNAF(S);k=g.constTimeNegate(T,k),L=g.constTimeNegate(C,L),L=new f(e.mul(L.px,E.beta),L.py,L.pz),w=k.add(L),N=j.add(G)}else{const{p:T,f:O}=this.wNAF(m);w=T,N=O}return f.normalizeZ([w,N])[0]}multiplyAndAddUnsafe(p,m,w){const N=f.BASE,E=(O,C)=>C===ee||C===St||!O.equals(N)?O.multiplyUnsafe(C):O.multiply(C),T=E(this,m).add(E(p,w));return T.is0()?void 0:T}toAffine(p){const{px:m,py:w,pz:N}=this,E=this.is0();p==null&&(p=E?e.ONE:e.inv(N));const T=e.mul(m,p),O=e.mul(w,p),C=e.mul(N,p);if(E)return{x:e.ZERO,y:e.ZERO};if(!e.eql(C,e.ONE))throw new Error("invZ was invalid");return{x:T,y:O}}isTorsionFree(){const{h:p,isTorsionFree:m}=t;if(p===St)return!0;if(m)return m(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:m}=t;return p===St?this:m?m(f,this):this.multiplyUnsafe(t.h)}toRawBytes(p=!0){return this.assertValidity(),n(f,this,p)}toHex(p=!0){return ln(this.toRawBytes(p))}}f.BASE=new f(t.Gx,t.Gy,e.ONE),f.ZERO=new f(e.ZERO,e.ONE,e.ZERO);const h=t.nBitLength,g=iu(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function uu(r){const t=qo(r);return Un(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function fu(r){const t=uu(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(x){return ee<x&&x<e.ORDER}function a(x){return vt(x,n)}function c(x){return ns(x,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:h}=lu({...t,toBytes(x,v,H){const Z=v.toAffine(),K=e.toBytes(Z.x),Q=In;return H?Q(Uint8Array.from([v.hasEvenY()?2:3]),K):Q(Uint8Array.from([4]),K,e.toBytes(Z.y))},fromBytes(x){const v=x.length,H=x[0],Z=x.subarray(1);if(v===s&&(H===2||H===3)){const K=Me(Z);if(!o(K))throw new Error("Point is not on curve");const Q=f(K);let yt=e.sqrt(Q);const ft=(yt&St)===St;return(H&1)===1!==ft&&(yt=e.neg(yt)),{x:K,y:yt}}else if(v===i&&H===4){const K=e.fromBytes(Z.subarray(0,e.BYTES)),Q=e.fromBytes(Z.subarray(e.BYTES,2*e.BYTES));return{x:K,y:Q}}else throw new Error(`Point of length ${v} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),g=x=>ln(un(x,t.nByteLength));function y(x){const v=n>>St;return x>v}function p(x){return y(x)?a(-x):x}const m=(x,v,H)=>Me(x.slice(v,H));class w{constructor(v,H,Z){this.r=v,this.s=H,this.recovery=Z,this.assertValidity()}static fromCompact(v){const H=t.nByteLength;return v=Mt("compactSignature",v,H*2),new w(m(v,0,H),m(v,H,2*H))}static fromDER(v){const{r:H,s:Z}=Fe.toSig(Mt("DER",v));return new w(H,Z)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new w(this.r,this.s,v)}recoverPublicKey(v){const{r:H,s:Z,recovery:K}=this,Q=S(Mt("msgHash",v));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const yt=K===2||K===3?H+t.n:H;if(yt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const ft=(K&1)===0?"02":"03",Ut=l.fromHex(ft+g(yt)),zt=c(yt),fe=a(-Q*zt),Pe=a(Z*zt),jt=l.BASE.multiplyAndAddUnsafe(Ut,fe,Pe);if(!jt)throw new Error("point at infinify");return jt.assertValidity(),jt}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Bn(this.toDERHex())}toDERHex(){return Fe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bn(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const N={isValidPrivateKey(x){try{return u(x),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const x=Xo(t.n);return ru(t.randomBytes(x),t.n)},precompute(x=8,v=l.BASE){return v._setWindowSize(x),v.multiply(BigInt(3)),v}};function E(x,v=!0){return l.fromPrivateKey(x).toRawBytes(v)}function T(x){const v=x instanceof Uint8Array,H=typeof x=="string",Z=(v||H)&&x.length;return v?Z===s||Z===i:H?Z===2*s||Z===2*i:x instanceof l}function O(x,v,H=!0){if(T(x))throw new Error("first arg must be private key");if(!T(v))throw new Error("second arg must be public key");return l.fromHex(v).multiply(u(x)).toRawBytes(H)}const C=t.bits2int||function(x){const v=Me(x),H=x.length*8-t.nBitLength;return H>0?v>>BigInt(H):v},S=t.bits2int_modN||function(x){return a(C(x))},k=Is(t.nBitLength);function j(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(ee<=x&&x<k))throw new Error(`bigint expected < 2^${t.nBitLength}`);return un(x,t.nByteLength)}function L(x,v,H=G){if(["recovered","canonical"].some(Lt=>Lt in H))throw new Error("sign() legacy options not supported");const{hash:Z,randomBytes:K}=t;let{lowS:Q,prehash:yt,extraEntropy:ft}=H;Q==null&&(Q=!0),x=Mt("msgHash",x),yt&&(x=Mt("prehashed msgHash",Z(x)));const Ut=S(x),zt=u(v),fe=[j(zt),j(Ut)];if(ft!=null){const Lt=ft===!0?K(e.BYTES):ft;fe.push(Mt("extraEntropy",Lt))}const Pe=In(...fe),jt=Ut;function ve(Lt){const R=C(Lt);if(!h(R))return;const wt=c(R),et=l.BASE.multiply(R).toAffine(),Ft=a(et.x);if(Ft===ee)return;const Yt=a(wt*a(jt+Ft*zt));if(Yt===ee)return;let Ke=(et.x===Ft?0:2)|Number(et.y&St),he=Yt;return Q&&y(Yt)&&(he=p(Yt),Ke^=1),new w(Ft,he,Ke)}return{seed:Pe,k2sig:ve}}const G={lowS:t.lowS,prehash:!1},tt={lowS:t.lowS,prehash:!1};function st(x,v,H=G){const{seed:Z,k2sig:K}=L(x,v,H),Q=t;return Zo(Q.hash.outputLen,Q.nByteLength,Q.hmac)(Z,K)}l.BASE._setWindowSize(8);function Pt(x,v,H,Z=tt){const K=x;if(v=Mt("msgHash",v),H=Mt("publicKey",H),"strict"in Z)throw new Error("options.strict was renamed to lowS");const{lowS:Q,prehash:yt}=Z;let ft,Ut;try{if(typeof K=="string"||K instanceof Uint8Array)try{ft=w.fromDER(K)}catch(et){if(!(et instanceof Fe.Err))throw et;ft=w.fromCompact(K)}else if(typeof K=="object"&&typeof K.r=="bigint"&&typeof K.s=="bigint"){const{r:et,s:Ft}=K;ft=new w(et,Ft)}else throw new Error("PARSE");Ut=l.fromHex(H)}catch(et){if(et.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Q&&ft.hasHighS())return!1;yt&&(v=t.hash(v));const{r:zt,s:fe}=ft,Pe=S(v),jt=c(fe),ve=a(Pe*jt),Lt=a(zt*jt),R=l.BASE.multiplyAndAddUnsafe(Ut,ve,Lt)?.toAffine();return R?a(R.x)===zt:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:O,sign:st,verify:Pt,ProjectivePoint:l,Signature:w,utils:N}}function hu(r){return{hash:r,hmac:(t,...e)=>Ro(r,t,sl(...e)),randomBytes:il}}function du(r,t){const e=n=>fu({...r,...hu(n)});return Object.freeze({...e(t),create:e})}const $o=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),oi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),pu=BigInt(1),rs=BigInt(2),ai=(r,t)=>(r+t/rs)/t;function gu(r){const t=$o,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%t,u=l*l*r%t,f=Ot(u,e,t)*u%t,h=Ot(f,e,t)*u%t,g=Ot(h,rs,t)*l%t,y=Ot(g,s,t)*g%t,p=Ot(y,i,t)*y%t,m=Ot(p,a,t)*p%t,w=Ot(m,c,t)*m%t,N=Ot(w,a,t)*p%t,E=Ot(N,e,t)*u%t,T=Ot(E,o,t)*y%t,O=Ot(T,n,t)*l%t,C=Ot(O,rs,t);if(!ss.eql(ss.sqr(C),r))throw new Error("Cannot find square root");return C}const ss=nu($o,void 0,void 0,{sqrt:gu}),Ae=du({a:BigInt(0),b:BigInt(7),Fp:ss,n:oi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=oi,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-pu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=ai(i*r,t),c=ai(-n*r,t);let l=vt(r-a*e-c*s,t),u=vt(-a*n-c*i,t);const f=l>o,h=u>o;if(f&&(l=t-l),h&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:f,k1:l,k2neg:h,k2:u}}}},So);BigInt(0);Ae.ProjectivePoint;const Cn="0x0000000000000000000000000000000000000000",ci="0x0000000000000000000000000000000000000000000000000000000000000000";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");const li=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const ui=BigInt(0),fi=BigInt(1),is=BigInt(2),hi=BigInt(27),di=BigInt(28),zn=BigInt(35),ta=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mu=ta/is,yu=Symbol.for("nodejs.util.inspect.custom"),Ie={};function Or(r){return ce(ut(r),32)}class nt{#t;#e;#n;#r;get r(){return this.#t}set r(t){d(en(t)===32,"invalid r","value",t),this.#t=P(t)}get s(){return d(parseInt(this.#e.substring(0,3))<8,"non-canonical s; use ._s","s",this.#e),this.#e}set s(t){d(en(t)===32,"invalid s","value",t),this.#e=P(t)}get _s(){return this.#e}isValid(){return BigInt(this.#e)<=mu}get v(){return this.#n}set v(t){const e=F(t,"value");d(e===27||e===28,"invalid v","v",t),this.#n=e}get networkV(){return this.#r}get legacyChainId(){const t=this.networkV;return t==null?null:nt.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=M(this.s);return this.yParity&&(t[0]|=128),P(t)}get compactSerialized(){return $([this.r,this.yParityAndS])}get serialized(){return $([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(t,e,n,s){On(t,Ie,"Signature"),this.#t=e,this.#e=n,this.#n=s,this.#r=null}getCanonical(){if(this.isValid())return this;const t=ta-BigInt(this._s),e=55-this.v,n=new nt(Ie,this.r,Or(t),e);return this.networkV&&(n.#r=this.networkV),n}clone(){const t=new nt(Ie,this.r,this._s,this.v);return this.networkV&&(t.#r=this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this._s,v:this.v}}[yu](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(t){const e=I(t,"v");return e==hi||e==di?ui:(d(e>=zn,"invalid EIP-155 v","v",t),(e-zn)/is)}static getChainIdV(t,e){return I(t)*is+BigInt(35+e-27)}static getNormalizedV(t){const e=I(t);return e===ui||e===hi?27:e===fi||e===di?28:(d(e>=zn,"invalid v","v",t),e&fi?27:28)}static from(t){function e(l,u){d(l,u,"signature",t)}if(t==null)return new nt(Ie,ci,ci,27);if(typeof t=="string"){const l=M(t,"signature");if(l.length===64){const u=P(l.slice(0,32)),f=l.slice(32,64),h=f[0]&128?28:27;return f[0]&=127,new nt(Ie,u,P(f),h)}if(l.length===65){const u=P(l.slice(0,32)),f=P(l.slice(32,64)),h=nt.getNormalizedV(l[64]);return new nt(Ie,u,f,h)}e(!1,"invalid raw signature length")}if(t instanceof nt)return t.clone();const n=t.r;e(n!=null,"missing r");const s=Or(n),i=(function(l,u){if(l!=null)return Or(l);if(u!=null){e(X(u,32),"invalid yParityAndS");const f=M(u);return f[0]&=127,P(f)}e(!1,"missing s")})(t.s,t.yParityAndS),{networkV:o,v:a}=(function(l,u,f){if(l!=null){const h=I(l);return{networkV:h>=zn?h:void 0,v:nt.getNormalizedV(h)}}if(u!=null)return e(X(u,32),"invalid yParityAndS"),{v:M(u)[0]&128?28:27};if(f!=null){switch(F(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")})(t.v,t.yParityAndS,t.yParity),c=new nt(Ie,s,i,a);return o&&(c.#r=o),e(t.yParity==null||F(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class ne{#t;constructor(t){d(en(t)===32,"invalid private key","privateKey","[REDACTED]"),this.#t=P(t)}get privateKey(){return this.#t}get publicKey(){return ne.computePublicKey(this.#t)}get compressedPublicKey(){return ne.computePublicKey(this.#t,!0)}sign(t){d(en(t)===32,"invalid digest length","digest",t);const e=Ae.sign(bt(t),bt(this.#t),{lowS:!0});return nt.from({r:xe(e.r,32),s:xe(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=ne.computePublicKey(t);return P(Ae.getSharedSecret(bt(this.#t),M(e),!1))}static computePublicKey(t,e){let n=M(t,"key");if(n.length===32){const i=Ae.getPublicKey(n,!!e);return P(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=Ae.ProjectivePoint.fromHex(n);return P(s.toRawBytes(e))}static recoverPublicKey(t,e){d(en(t)===32,"invalid digest length","digest",t);const n=nt.from(e);let s=Ae.Signature.fromCompact(bt($([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(bt(t));return d(i!=null,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,n){const s=Ae.ProjectivePoint.fromHex(ne.computePublicKey(t).substring(2)),i=Ae.ProjectivePoint.fromHex(ne.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!n)}}const wu=BigInt(0),Au=BigInt(36);function pi(r){r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const n=M(lt(e));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(n[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const Cs={};for(let r=0;r<10;r++)Cs[String(r)]=String(r);for(let r=0;r<26;r++)Cs[String.fromCharCode(65+r)]=String(10+r);const gi=15;function bu(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(n=>Cs[n]).join("");for(;t.length>=gi;){let n=t.substring(0,gi);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const Eu=(function(){const r={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];r[e]=BigInt(t)}return r})();function xu(r){r=r.toLowerCase();let t=wu;for(let e=0;e<r.length;e++)t=t*Au+Eu[r[e]];return t}function _(r){if(d(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const t=pi(r);return d(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===r,"bad address checksum","address",r),t}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){d(r.substring(2,4)===bu(r),"bad icap checksum","address",r);let t=xu(r.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return pi("0x"+t)}d(!1,"invalid address","address",r)}function Nu(r){const t=_(r.from);let n=I(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,_(it(lt(oe([t,n])),12))}function ea(r){return r&&typeof r.getAddress=="function"}async function Sr(r,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(A(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),d(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),_(e)}function xt(r,t){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?_(r):(A(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Sr(r,t.resolveName(r)));if(ea(r))return Sr(r,r.getAddress());if(r&&typeof r.then=="function")return Sr(r,r);d(!1,"unsupported addressable value","target",r)}const qt={};function B(r,t){let e=!1;return t<0&&(e=!0,t*=-1),new ot(qt,`${e?"":"u"}int${t}`,r,{signed:e,width:t})}function J(r,t){return new ot(qt,`bytes${t||""}`,r,{size:t})}const mi=Symbol.for("_ethers_typed");class ot{type;value;#t;_typedSymbol;constructor(t,e,n,s){s==null&&(s=null),On(qt,t,"Typed"),U(this,{_typedSymbol:mi,type:e,value:n}),this.#t=s,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#t}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#t===!0?-1:this.#t===!1?this.value.length:null}static from(t,e){return new ot(qt,t,e)}static uint8(t){return B(t,8)}static uint16(t){return B(t,16)}static uint24(t){return B(t,24)}static uint32(t){return B(t,32)}static uint40(t){return B(t,40)}static uint48(t){return B(t,48)}static uint56(t){return B(t,56)}static uint64(t){return B(t,64)}static uint72(t){return B(t,72)}static uint80(t){return B(t,80)}static uint88(t){return B(t,88)}static uint96(t){return B(t,96)}static uint104(t){return B(t,104)}static uint112(t){return B(t,112)}static uint120(t){return B(t,120)}static uint128(t){return B(t,128)}static uint136(t){return B(t,136)}static uint144(t){return B(t,144)}static uint152(t){return B(t,152)}static uint160(t){return B(t,160)}static uint168(t){return B(t,168)}static uint176(t){return B(t,176)}static uint184(t){return B(t,184)}static uint192(t){return B(t,192)}static uint200(t){return B(t,200)}static uint208(t){return B(t,208)}static uint216(t){return B(t,216)}static uint224(t){return B(t,224)}static uint232(t){return B(t,232)}static uint240(t){return B(t,240)}static uint248(t){return B(t,248)}static uint256(t){return B(t,256)}static uint(t){return B(t,256)}static int8(t){return B(t,-8)}static int16(t){return B(t,-16)}static int24(t){return B(t,-24)}static int32(t){return B(t,-32)}static int40(t){return B(t,-40)}static int48(t){return B(t,-48)}static int56(t){return B(t,-56)}static int64(t){return B(t,-64)}static int72(t){return B(t,-72)}static int80(t){return B(t,-80)}static int88(t){return B(t,-88)}static int96(t){return B(t,-96)}static int104(t){return B(t,-104)}static int112(t){return B(t,-112)}static int120(t){return B(t,-120)}static int128(t){return B(t,-128)}static int136(t){return B(t,-136)}static int144(t){return B(t,-144)}static int152(t){return B(t,-152)}static int160(t){return B(t,-160)}static int168(t){return B(t,-168)}static int176(t){return B(t,-176)}static int184(t){return B(t,-184)}static int192(t){return B(t,-192)}static int200(t){return B(t,-200)}static int208(t){return B(t,-208)}static int216(t){return B(t,-216)}static int224(t){return B(t,-224)}static int232(t){return B(t,-232)}static int240(t){return B(t,-240)}static int248(t){return B(t,-248)}static int256(t){return B(t,-256)}static int(t){return B(t,-256)}static bytes1(t){return J(t,1)}static bytes2(t){return J(t,2)}static bytes3(t){return J(t,3)}static bytes4(t){return J(t,4)}static bytes5(t){return J(t,5)}static bytes6(t){return J(t,6)}static bytes7(t){return J(t,7)}static bytes8(t){return J(t,8)}static bytes9(t){return J(t,9)}static bytes10(t){return J(t,10)}static bytes11(t){return J(t,11)}static bytes12(t){return J(t,12)}static bytes13(t){return J(t,13)}static bytes14(t){return J(t,14)}static bytes15(t){return J(t,15)}static bytes16(t){return J(t,16)}static bytes17(t){return J(t,17)}static bytes18(t){return J(t,18)}static bytes19(t){return J(t,19)}static bytes20(t){return J(t,20)}static bytes21(t){return J(t,21)}static bytes22(t){return J(t,22)}static bytes23(t){return J(t,23)}static bytes24(t){return J(t,24)}static bytes25(t){return J(t,25)}static bytes26(t){return J(t,26)}static bytes27(t){return J(t,27)}static bytes28(t){return J(t,28)}static bytes29(t){return J(t,29)}static bytes30(t){return J(t,30)}static bytes31(t){return J(t,31)}static bytes32(t){return J(t,32)}static address(t){return new ot(qt,"address",t)}static bool(t){return new ot(qt,"bool",!!t)}static bytes(t){return new ot(qt,"bytes",t)}static string(t){return new ot(qt,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new ot(qt,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===mi}static dereference(t,e){if(ot.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}class Pu extends ue{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=ot.dereference(e,"string");try{n=_(n)}catch(s){return this._throwError(s.message,e)}return t.writeValue(n)}decode(t){return _(xe(t.readValue(),20))}}class vu extends ue{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function na(r,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(l=>{const u=l.localName;return A(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:e}),A(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:e}),c[u]=!0,e[u]})}else d(!1,"invalid tuple value","tuple",e);d(t.length===n.length,"types/value length mismatch","tuple",e);let s=new $r,i=new $r,o=[];t.forEach((c,l)=>{let u=n[l];if(c.dynamic){let f=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(g=>{h(g+f)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=r.appendWriter(s);return a+=r.appendWriter(i),a}function ra(r,t){let e=[],n=[],s=r.subReader(0);return t.forEach(i=>{let o=null;if(i.dynamic){let a=r.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(mt(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(r)}catch(a){if(mt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");e.push(o),n.push(i.localName||null)}),re.fromItems(e,n)}class Bu extends ue{coder;length;constructor(t,e,n){const s=t.type+"["+(e>=0?e:"")+"]",i=e===-1||t.dynamic;super("array",s,n,i),U(this,{coder:t,length:e})}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let n=0;n<this.length;n++)e.push(t);return e}encode(t,e){const n=ot.dereference(e,"array");Array.isArray(n)||this._throwError("expected array value",n);let s=this.length;s===-1&&(s=n.length,t.writeValue(n.length)),po(n.length,s,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let o=0;o<n.length;o++)i.push(this.coder);return na(t,i,n)}decode(t){let e=this.length;e===-1&&(e=t.readIndex(),A(e*Et<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*Et,length:t.dataLength}));let n=[];for(let s=0;s<e;s++)n.push(new vu(this.coder));return ra(t,n)}}class Iu extends ue{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=ot.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class sa extends ue{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=bt(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class Cu extends sa{constructor(t){super("bytes",t)}decode(t){return P(super.decode(t))}}class ku extends ue{size;constructor(t,e){let n="bytes"+String(t);super(n,n,e,!1),U(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,e){let n=bt(ot.dereference(e,this.type));return n.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(n)}decode(t){return P(t.readBytes(this.size))}}const Ru=new Uint8Array([]);class Ou extends ue{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(Ru)}decode(t){return t.readBytes(0),null}}const Su=BigInt(0),Tu=BigInt(1),Uu=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Lu extends ue{size;signed;constructor(t,e,n){const s=(e?"int":"uint")+t*8;super(s,s,n,!1),U(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let n=I(ot.dereference(e,this.type)),s=Le(Uu,Et*8);if(this.signed){let i=Le(s,this.size*8-1);(n>i||n<-(i+Tu))&&this._throwError("value out-of-bounds",e),n=yo(n,8*Et)}else(n<Su||n>Le(s,this.size*8))&&this._throwError("value out-of-bounds",e);return t.writeValue(n)}decode(t){let e=Le(t.readValue(),this.size*8);return this.signed&&(e=ir(e,this.size*8)),e}}class Fu extends sa{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,ie(ot.dereference(e,"string")))}decode(t){return or(super.decode(t))}}class jn extends ue{coders;constructor(t,e){let n=!1;const s=[];t.forEach(o=>{o.dynamic&&(n=!0),s.push(o.type)});const i="tuple("+s.join(",")+")";super("tuple",i,e,n),U(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(n=>{t.push(n.defaultValue())});const e=this.coders.reduce((n,s)=>{const i=s.localName;return i&&(n[i]||(n[i]=0),n[i]++),n},{});return this.coders.forEach((n,s)=>{let i=n.localName;!i||e[i]!==1||(i==="length"&&(i="_length"),t[i]==null&&(t[i]=t[s]))}),Object.freeze(t)}encode(t,e){const n=ot.dereference(e,"tuple");return na(t,this.coders,n)}decode(t){return ra(t,this.coders)}}function Tr(r,t){return{address:_(r),storageKeys:t.map((e,n)=>(d(X(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function je(r){if(Array.isArray(r))return r.map((e,n)=>Array.isArray(e)?(d(e.length===2,"invalid slot set",`value[${n}]`,e),Tr(e[0],e[1])):(d(e!=null&&typeof e=="object","invalid address-slot set","value",r),Tr(e.address,e.storageKeys)));d(r!=null&&typeof r=="object","invalid access list","value",r);const t=Object.keys(r).map(e=>{const n=r[e].reduce((s,i)=>(s[i]=!0,s),{});return Tr(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function ia(r){return{address:_(r.address),nonce:I(r.nonce!=null?r.nonce:0),chainId:I(r.chainId!=null?r.chainId:0),signature:nt.from(r.signature)}}function Du(r){let t;return typeof r=="string"?t=ne.computePublicKey(r,!1):t=r.publicKey,_(lt("0x"+t.substring(4)).substring(26))}function Mu(r,t){return Du(ne.recoverPublicKey(r,t))}const dt=BigInt(0),Gu=BigInt(2),Hu=BigInt(27),Qu=BigInt(28),Vu=BigInt(35),zu=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ju=Symbol.for("nodejs.util.inspect.custom"),Ur=4096*32,Yn=128;function Ju(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return M(r.blobToKzgCommitment(P(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return M(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return M(r.blobToKZGCommitment(P(n)));d(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,s)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return M(r.computeBlobProof(P(n),P(s)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,s);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return M(r.computeBlobKZGProof(P(n),P(s)));d(!1,"unsupported KZG library","kzg",r)}}}function yi(r,t){let e=r.toString(16);for(;e.length<2;)e="0"+e;return e+=dn(t).substring(4),"0x"+e}function pn(r){return r==="0x"?null:_(r)}function gr(r,t){try{return je(r)}catch(e){d(!1,e.message,t,r)}}function Ku(r,t){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const e=[];for(let n=0;n<r.length;n++){const s=r[n];if(!Array.isArray(s))throw new Error(`authorization[${n}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!s[1])throw new Error(`authorization[${n}]: null address`);e.push({address:pn(s[1]),nonce:W(s[2],"nonce"),chainId:W(s[0],"chainId"),signature:nt.from({yParity:Je(s[3],"yParity"),r:ce(s[4],32),s:ce(s[5],32)})})}return e}catch(e){d(!1,e.message,t,r)}}function Je(r,t){return r==="0x"?0:F(r,t)}function W(r,t){if(r==="0x")return dt;const e=I(r,t);return d(e<=zu,"value exceeds uint size",t,e),e}function z(r,t){const e=I(r,"value"),n=ut(e);return d(n.length<=32,"value too large",`tx.${t}`,e),n}function mr(r){return je(r).map(t=>[t.address,t.storageKeys])}function _u(r){return r.map(t=>[z(t.chainId,"chainId"),t.address,z(t.nonce,"nonce"),z(t.signature.yParity,"yParity"),ut(t.signature.r),ut(t.signature._s)])}function Zu(r,t){d(Array.isArray(r),`invalid ${t}`,"value",r);for(let e=0;e<r.length;e++)d(X(r[e],32),"invalid ${ param } hash",`value[${e}]`,r[e]);return r}function Wu(r){const t=Tn(r);d(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",r);const e={type:0,nonce:Je(t[0],"nonce"),gasPrice:W(t[1],"gasPrice"),gasLimit:W(t[2],"gasLimit"),to:pn(t[3]),value:W(t[4],"value"),data:P(t[5]),chainId:dt};if(t.length===6)return e;const n=W(t[6],"v"),s=W(t[7],"r"),i=W(t[8],"s");if(s===dt&&i===dt)e.chainId=n;else{let o=(n-Vu)/Gu;o<dt&&(o=dt),e.chainId=o,d(o!==dt||n===Hu||n===Qu,"non-canonical legacy v","v",t[6]),e.signature=nt.from({r:ce(t[7],32),s:ce(t[8],32),v:n})}return e}function Yu(r,t){const e=[z(r.nonce,"nonce"),z(r.gasPrice||0,"gasPrice"),z(r.gasLimit,"gasLimit"),r.to||"0x",z(r.value,"value"),r.data];let n=dt;if(r.chainId!=dt)n=I(r.chainId,"tx.chainId"),d(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(r.signature){const i=r.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==dt&&(e.push(ut(n)),e.push("0x"),e.push("0x")),oe(e);let s=BigInt(27+t.yParity);return n!==dt?s=nt.getChainIdV(n,t.v):BigInt(t.v)!==s&&d(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(ut(s)),e.push(ut(t.r)),e.push(ut(t._s)),oe(e)}function yr(r,t){let e;try{if(e=Je(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{d(!1,"invalid yParity","yParity",t[0])}const n=ce(t[1],32),s=ce(t[2],32),i=nt.from({r:n,s,yParity:e});r.signature=i}function Xu(r){const t=Tn(M(r).slice(1));d(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",P(r));const e={type:2,chainId:W(t[0],"chainId"),nonce:Je(t[1],"nonce"),maxPriorityFeePerGas:W(t[2],"maxPriorityFeePerGas"),maxFeePerGas:W(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:W(t[4],"gasLimit"),to:pn(t[5]),value:W(t[6],"value"),data:P(t[7]),accessList:gr(t[8],"accessList")};return t.length===9||yr(e,t.slice(9)),e}function qu(r,t){const e=[z(r.chainId,"chainId"),z(r.nonce,"nonce"),z(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),z(r.maxFeePerGas||0,"maxFeePerGas"),z(r.gasLimit,"gasLimit"),r.to||"0x",z(r.value,"value"),r.data,mr(r.accessList||[])];return t&&(e.push(z(t.yParity,"yParity")),e.push(ut(t.r)),e.push(ut(t.s))),$(["0x02",oe(e)])}function $u(r){const t=Tn(M(r).slice(1));d(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",P(r));const e={type:1,chainId:W(t[0],"chainId"),nonce:Je(t[1],"nonce"),gasPrice:W(t[2],"gasPrice"),gasLimit:W(t[3],"gasLimit"),to:pn(t[4]),value:W(t[5],"value"),data:P(t[6]),accessList:gr(t[7],"accessList")};return t.length===8||yr(e,t.slice(8)),e}function tf(r,t){const e=[z(r.chainId,"chainId"),z(r.nonce,"nonce"),z(r.gasPrice||0,"gasPrice"),z(r.gasLimit,"gasLimit"),r.to||"0x",z(r.value,"value"),r.data,mr(r.accessList||[])];return t&&(e.push(z(t.yParity,"recoveryParam")),e.push(ut(t.r)),e.push(ut(t.s))),$(["0x01",oe(e)])}function ef(r){let t=Tn(M(r).slice(1)),e="3",n=null,s=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const o=t[1],a=t[2],c=t[3];d(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),d(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),d(Array.isArray(c),"invalid network format: proofs not an array","fields[3]",c),d(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",t),d(o.length===c.length,"invalid network format: blobs/proofs length mismatch","fields",t),s=[];for(let l=0;l<t[1].length;l++)s.push({data:o[l],commitment:a[l],proof:c[l]});t=t[0]}else if(t.length===5&&Array.isArray(t[0])){e="3 (EIP-7594 network format)",n=F(t[1]);const o=t[2],a=t[3],c=t[4];d(n===1,`unsupported EIP-7594 network format version: ${n}`,"fields[1]",n),d(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),d(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),d(Array.isArray(c),"invalid EIP-7594 network format: proofs not an array","fields[4]",c),d(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",t),d(o.length*Yn===c.length,"invalid network format: blobs/proofs length mismatch","fields",t),s=[];for(let l=0;l<o.length;l++){const u=[];for(let f=0;f<Yn;f++)u.push(c[l*Yn+f]);s.push({data:o[l],commitment:a[l],proof:$(u)})}t=t[0]}d(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",P(r));const i={type:3,chainId:W(t[0],"chainId"),nonce:Je(t[1],"nonce"),maxPriorityFeePerGas:W(t[2],"maxPriorityFeePerGas"),maxFeePerGas:W(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:W(t[4],"gasLimit"),to:pn(t[5]),value:W(t[6],"value"),data:P(t[7]),accessList:gr(t[8],"accessList"),maxFeePerBlobGas:W(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10],blobWrapperVersion:n};s&&(i.blobs=s),d(i.to!=null,`invalid address for transaction type: ${e}`,"data",r),d(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let o=0;o<i.blobVersionedHashes.length;o++)d(X(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",r);return t.length===11||yr(i,t.slice(11)),i}function nf(r,t,e){const n=[z(r.chainId,"chainId"),z(r.nonce,"nonce"),z(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),z(r.maxFeePerGas||0,"maxFeePerGas"),z(r.gasLimit,"gasLimit"),r.to||Cn,z(r.value,"value"),r.data,mr(r.accessList||[]),z(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Zu(r.blobVersionedHashes||[],"blobVersionedHashes")];if(t&&(n.push(z(t.yParity,"yParity")),n.push(ut(t.r)),n.push(ut(t.s)),e)){if(r.blobWrapperVersion!=null){const s=ut(r.blobWrapperVersion),i=[];for(const{proof:o}of e){const a=M(o),c=a.length/Yn;for(let l=0;l<a.length;l+=c)i.push(a.subarray(l,l+c))}return $(["0x03",oe([n,s,e.map(o=>o.data),e.map(o=>o.commitment),i])])}return $(["0x03",oe([n,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])])}return $(["0x03",oe(n)])}function rf(r){const t=Tn(M(r).slice(1));d(Array.isArray(t)&&(t.length===10||t.length===13),"invalid field count for transaction type: 4","data",P(r));const e={type:4,chainId:W(t[0],"chainId"),nonce:Je(t[1],"nonce"),maxPriorityFeePerGas:W(t[2],"maxPriorityFeePerGas"),maxFeePerGas:W(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:W(t[4],"gasLimit"),to:pn(t[5]),value:W(t[6],"value"),data:P(t[7]),accessList:gr(t[8],"accessList"),authorizationList:Ku(t[9],"authorizationList")};return t.length===10||yr(e,t.slice(10)),e}function sf(r,t){const e=[z(r.chainId,"chainId"),z(r.nonce,"nonce"),z(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),z(r.maxFeePerGas||0,"maxFeePerGas"),z(r.gasLimit,"gasLimit"),r.to||"0x",z(r.value,"value"),r.data,mr(r.accessList||[]),_u(r.authorizationList||[])];return t&&(e.push(z(t.yParity,"yParity")),e.push(ut(t.r)),e.push(ut(t.s))),$(["0x04",oe(e)])}class Gt{#t;#e;#n;#r;#s;#o;#i;#a;#f;#l;#p;#g;#c;#u;#h;#d;#w;#m;get type(){return this.#t}set type(t){switch(t){case null:this.#t=null;break;case 0:case"legacy":this.#t=0;break;case 1:case"berlin":case"eip-2930":this.#t=1;break;case 2:case"london":case"eip-1559":this.#t=2;break;case 3:case"cancun":case"eip-4844":this.#t=3;break;case 4:case"pectra":case"eip-7702":this.#t=4;break;default:d(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=this.#e;return t==null&&this.type===3?Cn:t}set to(t){this.#e=t==null?null:_(t)}get nonce(){return this.#r}set nonce(t){this.#r=F(t,"value")}get gasLimit(){return this.#s}set gasLimit(t){this.#s=I(t)}get gasPrice(){const t=this.#o;return t==null&&(this.type===0||this.type===1)?dt:t}set gasPrice(t){this.#o=t==null?null:I(t,"gasPrice")}get maxPriorityFeePerGas(){const t=this.#i;return t??(this.type===2||this.type===3?dt:null)}set maxPriorityFeePerGas(t){this.#i=t==null?null:I(t,"maxPriorityFeePerGas")}get maxFeePerGas(){const t=this.#a;return t??(this.type===2||this.type===3?dt:null)}set maxFeePerGas(t){this.#a=t==null?null:I(t,"maxFeePerGas")}get data(){return this.#n}set data(t){this.#n=P(t)}get value(){return this.#f}set value(t){this.#f=I(t,"value")}get chainId(){return this.#l}set chainId(t){this.#l=I(t)}get signature(){return this.#p||null}set signature(t){this.#p=t==null?null:nt.from(t)}isValid(){const t=this.signature;if(t&&!t.isValid())return!1;const e=this.authorizationList;if(e){for(const n of e)if(!n.signature.isValid())return!1}return!0}get accessList(){const t=this.#g||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){this.#g=t==null?null:je(t)}get authorizationList(){const t=this.#w||null;return t==null&&this.type===4?[]:t}set authorizationList(t){this.#w=t==null?null:t.map(e=>ia(e))}get maxFeePerBlobGas(){const t=this.#c;return t==null&&this.type===3?dt:t}set maxFeePerBlobGas(t){this.#c=t==null?null:I(t,"maxFeePerBlobGas")}get blobVersionedHashes(){let t=this.#u;return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){d(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)d(X(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}this.#u=t}get blobs(){return this.#d==null?null:this.#d.map(t=>Object.assign({},t))}set blobs(t){if(t==null){this.#d=null;return}const e=[],n=[];for(let s=0;s<t.length;s++){const i=t[s];if(ws(i)){A(this.#h,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=M(i);if(d(o.length<=Ur,"blob is too large",`blobs[${s}]`,i),o.length!==Ur){const l=new Uint8Array(Ur);l.set(o),o=l}const a=this.#h.blobToKzgCommitment(o),c=P(this.#h.computeBlobKzgProof(o,a));e.push({data:P(o),commitment:P(a),proof:c}),n.push(yi(1,a))}else{const o=P(i.data),a=P(i.commitment),c=P(i.proof);e.push({data:o,commitment:a,proof:c}),n.push(yi(1,a))}}this.#d=e,this.#u=n}get kzg(){return this.#h}set kzg(t){t==null?this.#h=null:this.#h=Ju(t)}get blobWrapperVersion(){return this.#m}set blobWrapperVersion(t){this.#m=t}constructor(){this.#t=null,this.#e=null,this.#r=0,this.#s=dt,this.#o=null,this.#i=null,this.#a=null,this.#n="0x",this.#f=dt,this.#l=dt,this.#p=null,this.#g=null,this.#c=null,this.#u=null,this.#h=null,this.#d=null,this.#w=null,this.#m=null}get hash(){return this.signature==null?null:lt(this.#y(!0,!1))}get unsignedHash(){return lt(this.unsignedSerialized)}get from(){return this.signature==null?null:Mu(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:ne.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}#y(t,e){A(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=t?this.signature:null;switch(this.inferType()){case 0:return Yu(this,n);case 1:return tf(this,n);case 2:return qu(this,n);case 3:return nf(this,n,e?this.blobs:null);case 4:return sf(this,n)}A(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#y(!0,!0)}get unsignedSerialized(){return this.#y(!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=this.#c!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&A(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),A(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),A(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Gt.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[ju](){return this.toString()}toString(){const t=[],e=s=>{let i=this[s];typeof i=="string"&&(i=JSON.stringify(i)),t.push(`${s}: ${i}`)};this.type&&e("type"),e("to"),e("data"),e("nonce"),e("gasLimit"),e("value"),this.chainId!=null&&e("chainId"),this.signature&&(e("from"),t.push(`signature: ${this.signature.toString()}`));const n=this.authorizationList;if(n){const s=[];for(const i of n){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),s.push(`Authorization { ${o.join(", ")} }`)}t.push(`authorizations: [ ${s.join(", ")} ]`)}return`Transaction { ${t.join(", ")} }`}static from(t){if(t==null)return new Gt;if(typeof t=="string"){const n=M(t);if(n[0]>=127)return Gt.from(Wu(n));switch(n[0]){case 1:return Gt.from($u(n));case 2:return Gt.from(Xu(n));case 3:return Gt.from(ef(n));case 4:return Gt.from(rf(n))}A(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new Gt;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=nt.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.authorizationList!=null&&(e.authorizationList=t.authorizationList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobWrapperVersion!=null&&(e.blobWrapperVersion=t.blobWrapperVersion),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(d(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),d(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(d(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),d(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}}function He(r){return lt(ie(r))}const oa=new Uint8Array(32);oa.fill(0);function wi(r){return d(r.length!==0,"invalid ENS name; empty component","comp",r),r}function aa(r){const t=ie(of(r)),e=[];if(r.length===0)return e;let n=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(wi(t.slice(n,s))),n=s+1);return d(n<t.length,"invalid ENS name; empty component","name",r),e.push(wi(t.slice(n))),e}function of(r){try{if(r.length===0)throw new Error("empty label");return Ac(r)}catch(t){d(!1,`invalid ENS name (${t.message})`,"name",r)}}function os(r){d(typeof r=="string","invalid ENS name; not a string","name",r),d(r.length,"invalid ENS name (empty label)","name",r);let t=oa;const e=aa(r);for(;e.length;)t=lt($([t,lt(e.pop())]));return P(t)}function af(r,t){const e=t;return d(e<=255,"DNS encoded label cannot exceed 255","length",e),P($(aa(r).map(n=>{d(n.length<=e,`label ${JSON.stringify(r)} exceeds ${e} bytes`,"name",r);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}const ca=new Uint8Array(32);ca.fill(0);const cf=BigInt(-1),la=BigInt(0),ua=BigInt(1),lf=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function uf(r){const t=M(r),e=t.length%32;return e?$([t,ca.slice(e)]):P(t)}const ff=xe(ua,32),hf=xe(la,32),Ai={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Lr=["name","version","chainId","verifyingContract","salt"];function bi(r){return function(t){return d(typeof t=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,t),t}}const df={name:bi("name"),version:bi("version"),chainId:function(r){const t=I(r,"domain.chainId");return d(t>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(t)?Number(t):Ht(t)},verifyingContract:function(r){try{return _(r).toLowerCase()}catch{}d(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const t=M(r,"domain.salt");return d(t.length===32,'invalid domain value "salt"',"domain.salt",r),P(t)}};function Fr(r){{const t=r.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",n=parseInt(t[2]);d(n%8===0&&n!==0&&n<=256&&t[2]===String(n),"invalid numeric width","type",r);const s=Le(lf,e?n-1:n),i=e?(s+ua)*cf:la;return function(o){const a=I(o,"value");return d(a>=i&&a<=s,`value out-of-bounds for ${r}`,"value",a),xe(e?yo(a,256):a,32)}}}{const t=r.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return d(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",r),function(n){const s=M(n);return d(s.length===e,`invalid length for ${r}`,"value",n),uf(n)}}}switch(r){case"address":return function(t){return ce(_(t),32)};case"bool":return function(t){return t?ff:hf};case"bytes":return function(t){return lt(t)};case"string":return function(t){return He(t)}}return null}function Ei(r,t){return`${r}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}function Jn(r){const t=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:r}}class Ct{primaryType;#t;get types(){return JSON.parse(this.#t)}#e;#n;constructor(t){this.#e=new Map,this.#n=new Map;const e=new Map,n=new Map,s=new Map,i={};Object.keys(t).forEach(c=>{i[c]=t[c].map(({name:l,type:u})=>{let{base:f,index:h}=Jn(u);return f==="int"&&!t.int&&(f="int256"),f==="uint"&&!t.uint&&(f="uint256"),{name:l,type:f+(h||"")}}),e.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),this.#t=JSON.stringify(i);for(const c in i){const l=new Set;for(const u of i[c]){d(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",t),l.add(u.name);const f=Jn(u.type).base;d(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",t),!Fr(f)&&(d(n.has(f),`unknown type ${JSON.stringify(f)}`,"types",t),n.get(f).push(c),e.get(c).add(f))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);d(o.length!==0,"missing primary type","types",t),d(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),U(this,{primaryType:o[0]});function a(c,l){d(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),l.add(c);for(const u of e.get(c))if(n.has(u)){a(u,l);for(const f of l)s.get(f).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),this.#e.set(c,Ei(c,i[c])+u.map(f=>Ei(f,i[f])).join(""))}}getEncoder(t){let e=this.#n.get(t);return e||(e=this.#r(t),this.#n.set(t,e)),e}#r(t){{const s=Fr(t);if(s)return s}const e=Jn(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return o=>{d(e.count===-1||e.count===o.length,`array length mismatch; expected length ${e.count}`,"value",o);let a=o.map(i);return this.#e.has(s)&&(a=a.map(lt)),lt($(a))}}const n=this.types[t];if(n){const s=He(this.#e.get(t));return i=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return this.#e.has(c)?lt(l):l});return o.unshift(s),$(o)}}d(!1,`unknown type: ${t}`,"type",t)}encodeType(t){const e=this.#e.get(t);return d(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return lt(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(Fr(t))return n(t,e);const s=Jn(t).array;if(s)return d(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(o=>this._visit(s.prefix,o,n));const i=this.types[t];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],n),o),{});d(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Ct(t)}static getPrimaryType(t){return Ct.from(t).primaryType}static hashStruct(t,e,n){return Ct.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const s=Ai[n];d(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:s})}return e.sort((n,s)=>Lr.indexOf(n.name)-Lr.indexOf(s.name)),Ct.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return $(["0x1901",Ct.hashDomain(t),Ct.from(e).hash(n)])}static hash(t,e,n){return lt(Ct.encode(t,e,n))}static async resolveNames(t,e,n,s){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const i={};t.verifyingContract&&!X(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=Ct.from(e);o.visit(n,(a,c)=>(a==="address"&&!X(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){Ct.hashDomain(t);const s={},i=[];Lr.forEach(c=>{const l=t[c];l!=null&&(s[c]=df[c](l),i.push({name:c,type:Ai[c]}))});const o=Ct.from(e);e=o.types;const a=Object.assign({},e);return d(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return P(M(l));if(c.match(/^u?int/))return I(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return d(typeof l=="string","invalid string","value",l),l}d(!1,"unsupported type","type",c)})}}}function Nt(r){const t=new Set;return r.forEach(e=>t.add(e)),Object.freeze(t)}const pf="external public payable override",gf=Nt(pf.split(" ")),fa="constant external internal payable private public pure view override",mf=Nt(fa.split(" ")),ha="constructor error event fallback function receive struct",da=Nt(ha.split(" ")),pa="calldata memory storage payable indexed",yf=Nt(pa.split(" ")),wf="tuple returns",Af=[ha,pa,wf,fa].join(" "),bf=Nt(Af.split(" ")),Ef={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},xf=new RegExp("^(\\s*)"),Nf=new RegExp("^([0-9]+)"),Pf=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),ga=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ma=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Tt{#t;#e;get offset(){return this.#t}get length(){return this.#e.length-this.#t}constructor(t){this.#t=0,this.#e=t.slice()}clone(){return new Tt(this.#e)}reset(){this.#t=0}#n(t=0,e=0){return new Tt(this.#e.slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=this.#n(this.#t+1,t.match+1);return this.#t=t.match+1,e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;this.#t<t.match-1;){const n=this.peek().linkNext;e.push(this.#n(this.#t+1,n)),this.#t=n}return this.#t=t.match+1,e}peek(){if(this.#t>=this.#e.length)throw new Error("out-of-bounds");return this.#e[this.#t]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return this.#t++,t}toString(){const t=[];for(let e=this.#t;e<this.#e.length;e++){const n=this.#e[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}}function Ne(r){const t=[],e=o=>{const a=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<r.length;){let o=r.substring(i),a=o.match(xf);a&&(i+=a[1].length,o=r.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=Ef[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")n.push(t.length-1),s.push(t.length-1);else if(l=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if(l==="COMMA")c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const f=t.pop().text;u=f+u,t[t.length-1].value=F(f)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=u}continue}if(a=o.match(Pf),a){if(c.text=a[1],i+=c.text.length,bf.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(ma)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Nf),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Tt(t.map(o=>Object.freeze(o)))}function xi(r,t){let e=[];for(const n in t.keys())r.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function wr(r,t){if(t.peekKeyword(da)){const e=t.pop().text;if(e!==r)throw new Error(`expected ${r}, got ${e}`)}return t.popType("ID")}function le(r,t){const e=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(r.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function ya(r){let t=le(r,mf);return xi(t,Nt("constant payable nonpayable".split(" "))),xi(t,Nt("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function ae(r,t){return r.popParams().map(e=>Y.from(e,t))}function wa(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return I(r.pop().text);throw new Error("invalid gas")}return null}function Qe(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const vf=new RegExp(/^(.*)\[([0-9]*)\]$/);function Ni(r){const t=r.match(ma);if(d(t,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(t[2]){const e=parseInt(t[2]);d(e!==0&&e<=32,"invalid bytes length","type",r)}else if(t[3]){const e=parseInt(t[3]);d(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",r)}return r}const rt={},It=Symbol.for("_ethers_internal"),Pi="_ParamTypeInternal",vi="_ErrorInternal",Bi="_EventInternal",Ii="_ConstructorInternal",Ci="_FallbackInternal",ki="_FunctionInternal",Ri="_StructInternal";class Y{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(t,e,n,s,i,o,a,c){if(On(t,rt,"ParamType"),Object.defineProperty(this,It,{value:Pi}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");U(this,{name:e,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(s=>n.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((s,i)=>n.components[i].walk(s,e))}return e(this.type,t)}#t(t,e,n,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,l)=>{o.#t(t,c,n,u=>{a[l]=u})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{o[l].#t(t,c,n,u=>{a[l]=u})}),s(a);return}const i=n(this.type,e);i.then?t.push((async function(){s(await i)})()):s(i)}async walkAsync(t,e){const n=[],s=[t];return this.#t(n,t,e,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(t,e){if(Y.isParamType(t))return t;if(typeof t=="string")try{return Y.from(Ne(t),e)}catch{d(!1,"invalid param type","obj",t)}else if(t instanceof Tt){let a="",c="",l=null;le(t,Nt(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",l=t.popParams().map(p=>Y.from(p)),a=`tuple(${l.map(p=>p.format()).join(",")})`):(a=Ni(t.popType("TYPE")),c=a);let u=null,f=null;for(;t.length&&t.peekType("BRACKET");){const p=t.pop();u=new Y(rt,"",a,c,null,l,f,u),f=p.value,a+=p.text,c="array",l=null}let h=null;if(le(t,yf).has("indexed")){if(!e)throw new Error("");h=!0}const y=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Y(rt,y,a,c,h,l,f,u)}const n=t.name;d(!n||typeof n=="string"&&n.match(ga),"invalid name","obj.name",n);let s=t.indexed;s!=null&&(d(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,o=i.match(vf);if(o){const a=parseInt(o[2]||"-1"),c=Y.from({type:o[1],components:t.components});return new Y(rt,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=t.components!=null?t.components.map(l=>Y.from(l)):null;return new Y(rt,n||"",i,"tuple",s,a,null,null)}return i=Ni(t.type),new Y(rt,n||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[It]===Pi}}class Ve{type;inputs;constructor(t,e,n){On(t,rt,"Fragment"),n=Object.freeze(n.slice()),U(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{Ve.from(JSON.parse(t))}catch{}return Ve.from(Ne(t))}if(t instanceof Tt)switch(t.peekKeyword(da)){case"constructor":return se.from(t);case"error":return Bt.from(t);case"event":return Kt.from(t);case"fallback":case"receive":return te.from(t);case"function":return _t.from(t);case"struct":return Ge.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return se.from(t);case"error":return Bt.from(t);case"event":return Kt.from(t);case"fallback":case"receive":return te.from(t);case"function":return _t.from(t);case"struct":return Ge.from(t)}A(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}d(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return se.isFragment(t)}static isError(t){return Bt.isFragment(t)}static isEvent(t){return Kt.isFragment(t)}static isFunction(t){return _t.isFragment(t)}static isStruct(t){return Ge.isFragment(t)}}class Ar extends Ve{name;constructor(t,e,n,s){super(t,e,s),d(typeof n=="string"&&n.match(ga),"invalid identifier","name",n),s=Object.freeze(s.slice()),U(this,{name:n})}}function kn(r,t){return"("+t.map(e=>e.format(r)).join(r==="full"?", ":",")+")"}class Bt extends Ar{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,It,{value:vi})}get selector(){return He(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+kn(t,this.inputs)),e.join(" ")}static from(t){if(Bt.isFragment(t))return t;if(typeof t=="string")return Bt.from(Ne(t));if(t instanceof Tt){const e=wr("error",t),n=ae(t);return Qe(t),new Bt(rt,e,n)}return new Bt(rt,t.name,t.inputs?t.inputs.map(Y.from):[])}static isFragment(t){return t&&t[It]===vi}}class Kt extends Ar{anonymous;constructor(t,e,n,s){super(t,"event",e,n),Object.defineProperty(this,It,{value:Bi}),U(this,{anonymous:s})}get topicHash(){return He(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("event"),e.push(this.name+kn(t,this.inputs)),t!=="sighash"&&this.anonymous&&e.push("anonymous"),e.join(" ")}static getTopicHash(t,e){return e=(e||[]).map(s=>Y.from(s)),new Kt(rt,t,e,!1).topicHash}static from(t){if(Kt.isFragment(t))return t;if(typeof t=="string")try{return Kt.from(Ne(t))}catch{d(!1,"invalid event fragment","obj",t)}else if(t instanceof Tt){const e=wr("event",t),n=ae(t,!0),s=!!le(t,Nt(["anonymous"])).has("anonymous");return Qe(t),new Kt(rt,e,n,s)}return new Kt(rt,t.name,t.inputs?t.inputs.map(e=>Y.from(e,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[It]===Bi}}class se extends Ve{payable;gas;constructor(t,e,n,s,i){super(t,e,n),Object.defineProperty(this,It,{value:Ii}),U(this,{payable:s,gas:i})}format(t){if(A(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[`constructor${kn(t,this.inputs)}`];return this.payable&&e.push("payable"),this.gas!=null&&e.push(`@${this.gas.toString()}`),e.join(" ")}static from(t){if(se.isFragment(t))return t;if(typeof t=="string")try{return se.from(Ne(t))}catch{d(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Tt){le(t,Nt(["constructor"]));const e=ae(t),n=!!le(t,gf).has("payable"),s=wa(t);return Qe(t),new se(rt,"constructor",e,n,s)}return new se(rt,"constructor",t.inputs?t.inputs.map(Y.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[It]===Ii}}class te extends Ve{payable;constructor(t,e,n){super(t,"fallback",e),Object.defineProperty(this,It,{value:Ci}),U(this,{payable:n})}format(t){const e=this.inputs.length===0?"receive":"fallback";if(t==="json"){const n=this.payable?"payable":"nonpayable";return JSON.stringify({type:e,stateMutability:n})}return`${e}()${this.payable?" payable":""}`}static from(t){if(te.isFragment(t))return t;if(typeof t=="string")try{return te.from(Ne(t))}catch{d(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Tt){const e=t.toString(),n=t.peekKeyword(Nt(["fallback","receive"]));if(d(n,"type must be fallback or receive","obj",e),t.popKeyword(Nt(["fallback","receive"]))==="receive"){const a=ae(t);return d(a.length===0,"receive cannot have arguments","obj.inputs",a),le(t,Nt(["payable"])),Qe(t),new te(rt,[],!0)}let i=ae(t);i.length?d(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(a=>a.format("minimal")).join(", ")):i=[Y.from("bytes")];const o=ya(t);if(d(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),le(t,Nt(["returns"])).has("returns")){const a=ae(t);d(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return Qe(t),new te(rt,i,o==="payable")}if(t.type==="receive")return new te(rt,[],!0);if(t.type==="fallback"){const e=[Y.from("bytes")],n=t.stateMutability==="payable";return new te(rt,e,n)}d(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[It]===Ci}}class _t extends Ar{constant;outputs;stateMutability;payable;gas;constructor(t,e,n,s,i,o){super(t,"function",e,s),Object.defineProperty(this,It,{value:ki}),i=Object.freeze(i.slice()),U(this,{constant:n==="view"||n==="pure",gas:o,outputs:i,payable:n==="payable",stateMutability:n})}get selector(){return He(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(t))),outputs:this.outputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("function"),e.push(this.name+kn(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&e.push(this.stateMutability),this.outputs&&this.outputs.length&&(e.push("returns"),e.push(kn(t,this.outputs))),this.gas!=null&&e.push(`@${this.gas.toString()}`)),e.join(" ")}static getSelector(t,e){return e=(e||[]).map(s=>Y.from(s)),new _t(rt,t,"view",e,[],null).selector}static from(t){if(_t.isFragment(t))return t;if(typeof t=="string")try{return _t.from(Ne(t))}catch{d(!1,"invalid function fragment","obj",t)}else if(t instanceof Tt){const n=wr("function",t),s=ae(t),i=ya(t);let o=[];le(t,Nt(["returns"])).has("returns")&&(o=ae(t));const a=wa(t);return Qe(t),new _t(rt,n,i,s,o,a)}let e=t.stateMutability;return e==null&&(e="payable",typeof t.constant=="boolean"?(e="view",t.constant||(e="payable",typeof t.payable=="boolean"&&!t.payable&&(e="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(e="nonpayable")),new _t(rt,t.name,e,t.inputs?t.inputs.map(Y.from):[],t.outputs?t.outputs.map(Y.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[It]===ki}}class Ge extends Ar{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,It,{value:Ri})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Ge.from(Ne(t))}catch{d(!1,"invalid struct fragment","obj",t)}else if(t instanceof Tt){const e=wr("struct",t),n=ae(t);return Qe(t),new Ge(rt,e,n)}return new Ge(rt,t.name,t.inputs?t.inputs.map(Y.from):[])}static isFragment(t){return t&&t[It]===Ri}}const Vt=new Map;Vt.set(0,"GENERIC_PANIC");Vt.set(1,"ASSERT_FALSE");Vt.set(17,"OVERFLOW");Vt.set(18,"DIVIDE_BY_ZERO");Vt.set(33,"ENUM_RANGE_ERROR");Vt.set(34,"BAD_STORAGE_DATA");Vt.set(49,"STACK_UNDERFLOW");Vt.set(50,"ARRAY_RANGE_ERROR");Vt.set(65,"OUT_OF_MEMORY");Vt.set(81,"UNINITIALIZED_FUNCTION_CALL");const Bf=new RegExp(/^bytes([0-9]*)$/),If=new RegExp(/^(u?int)([0-9]*)$/);let Dr=null,Oi=1024;function Cf(r,t,e,n){let s="missing revert data",i=null;const o=null;let a=null;if(e){s="execution reverted";const l=M(e);if(e=P(e),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(P(l.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(P(l.slice(0,4))==="0x4e487b71")try{const u=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Vt.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:t.to?_(t.to):null,data:t.data||"0x"};return t.from&&(c.from=_(t.from)),q(s,"CALL_EXCEPTION",{action:r,data:e,reason:i,transaction:c,invocation:o,revert:a})}class fn{#t(t){if(t.isArray())return new Bu(this.#t(t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new jn(t.components.map(n=>this.#t(n)),t.name);switch(t.baseType){case"address":return new Pu(t.name);case"bool":return new Iu(t.name);case"string":return new Fu(t.name);case"bytes":return new Cu(t.name);case"":return new Ou(t.name)}let e=t.type.match(If);if(e){let n=parseInt(e[2]||"256");return d(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new Lu(n/8,e[1]==="int",t.name)}if(e=t.type.match(Bf),e){let n=parseInt(e[1]);return d(n!==0&&n<=32,"invalid bytes length","param",t),new ku(n,t.name)}d(!1,"invalid type","type",t.type)}getDefaultValue(t){const e=t.map(s=>this.#t(Y.from(s)));return new jn(e,"_").defaultValue()}encode(t,e){po(e.length,t.length,"types/values length mismatch");const n=t.map(o=>this.#t(Y.from(o))),s=new jn(n,"_"),i=new $r;return s.encode(i,e),i.data}decode(t,e,n){const s=t.map(o=>this.#t(Y.from(o)));return new jn(s,"_").decode(new As(e,n,Oi))}static _setDefaultMaxInflation(t){d(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),Oi=t}static defaultAbiCoder(){return Dr==null&&(Dr=new fn),Dr}static getBuiltinCallException(t,e,n){return Cf(t,e,n,fn.defaultAbiCoder())}}class kf{fragment;name;signature;topic;args;constructor(t,e,n){const s=t.name,i=t.format();U(this,{fragment:t,name:s,signature:i,topic:e,args:n})}}class Rf{fragment;name;args;signature;selector;value;constructor(t,e,n,s){const i=t.name,o=t.format();U(this,{fragment:t,name:i,args:n,signature:o,selector:e,value:s})}}class Of{fragment;name;args;signature;selector;constructor(t,e,n){const s=t.name,i=t.format();U(this,{fragment:t,name:s,args:n,signature:i,selector:e})}}class Si{hash;_isIndexed;static isIndexed(t){return!!(t&&t._isIndexed)}constructor(t){U(this,{hash:t,_isIndexed:!0})}}const Ti={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Ui={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let t="unknown panic code";return r>=0&&r<=255&&Ti[r.toString()]&&(t=Ti[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${t})`}}};class Se{fragments;deploy;fallback;receive;#t;#e;#n;#r;constructor(t){let e=[];typeof t=="string"?e=JSON.parse(t):e=t,this.#n=new Map,this.#t=new Map,this.#e=new Map;const n=[];for(const o of e)try{n.push(Ve.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}U(this,{fragments:Object.freeze(n)});let s=null,i=!1;this.#r=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}U(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(d(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=this.#n;break;case"event":c=this.#e;break;case"error":c=this.#t;break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||U(this,{deploy:se.from("constructor()")}),U(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(s=>s.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return fn.defaultAbiCoder()}#s(t,e,n){if(X(t)){const i=t.toLowerCase();for(const o of this.#n.values())if(i===o.selector)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of this.#n)o.split("(")[0]===t&&i.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;ot.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let f=0;f<e.length;f++)if(ot.isTyped(e[f])){if(f>=u.length){if(e[f].type==="overrides")continue;i.splice(l,1);break}if(e[f].type!==u[f].baseType){i.splice(l,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");d(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return i[0]}const s=this.#n.get(_t.from(t).format());return s||null}getFunctionName(t){const e=this.#s(t,null,!1);return d(e,"no matching function","key",t),e.name}hasFunction(t){return!!this.#s(t,null,!1)}getFunction(t,e){return this.#s(t,e||null,!0)}forEachFunction(t){const e=Array.from(this.#n.keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(this.#n.get(s),n)}}#o(t,e,n){if(X(t)){const i=t.toLowerCase();for(const o of this.#e.values())if(i===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of this.#e)o.split("(")[0]===t&&i.push(a);if(e){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<e.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<e.length;c++)if(ot.isTyped(e[c])&&e[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");d(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return i[0]}const s=this.#e.get(Kt.from(t).format());return s||null}getEventName(t){const e=this.#o(t,null,!1);return d(e,"no matching event","key",t),e.name}hasEvent(t){return!!this.#o(t,null,!1)}getEvent(t,e){return this.#o(t,e||null,!0)}forEachEvent(t){const e=Array.from(this.#e.keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(this.#e.get(s),n)}}getError(t,e){if(X(t)){const s=t.toLowerCase();if(Ui[s])return Bt.from(Ui[s].signature);for(const i of this.#t.values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,o]of this.#t)i.split("(")[0]===t&&s.push(o);if(s.length===0)return t==="Error"?Bt.from("error Error(string)"):t==="Panic"?Bt.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");d(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}if(t=Bt.from(t).format(),t==="Error(string)")return Bt.from("error Error(string)");if(t==="Panic(uint256)")return Bt.from("error Panic(uint256)");const n=this.#t.get(t);return n||null}forEachError(t){const e=Array.from(this.#t.keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(this.#t.get(s),n)}}_decodeParams(t,e){return this.#r.decode(t,e)}_encodeParams(t,e){return this.#r.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);d(n,"unknown error","fragment",t),t=n}return d(it(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,it(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);d(n,"unknown error","fragment",t),t=n}return $([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);d(n,"unknown function","fragment",t),t=n}return d(it(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,it(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);d(n,"unknown function","fragment",t),t=n}return $([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);d(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const s=bt(e);if(s.length%32===0)try{return this.#r.decode(t.outputs,s)}catch{n="could not decode result data"}A(!1,n,"BAD_DATA",{value:P(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=M(t,"data"),s=fn.getBuiltinCallException("call",e,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=P(n.slice(0,4)),c=this.getError(a);if(c)try{const l=this.#r.decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);d(n,"unknown function","fragment",t),t=n}return P(this.#r.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);d(i,"unknown event","eventFragment",t),t=i}A(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const s=(i,o)=>i.type==="string"?He(o):i.type==="bytes"?lt(P(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=xe(o):i.type.match(/^bytes/)?o=Rc(o,32):i.type==="address"&&this.#r.encode(["address"],[o]),ce(P(o),32));for(e.forEach((i,o)=>{const a=t.inputs[o];if(!a.indexed){d(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?d(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);d(o,"unknown event","eventFragment",t),t=o}const n=[],s=[],i=[];return t.anonymous||n.push(t.topicHash),d(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")n.push(He(c));else if(o.type==="bytes")n.push(lt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this.#r.encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:this.#r.encode(s,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const g=this.getEvent(t);d(g,"unknown event","eventFragment",t),t=g}if(n!=null&&!t.anonymous){const g=t.topicHash;d(X(n[0],32)&&n[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];t.inputs.forEach((g,y)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(s.push(Y.from({type:"bytes32",name:g.name})),o.push(!0)):(s.push(g),o.push(!1)):(i.push(g),o.push(!1))});const a=n!=null?this.#r.decode(s,$(n)):null,c=this.#r.decode(i,e,!0),l=[],u=[];let f=0,h=0;return t.inputs.forEach((g,y)=>{let p=null;if(g.indexed)if(a==null)p=new Si(null);else if(o[y])p=new Si(a[h++]);else try{p=a[h++]}catch(m){p=m}else try{p=c[f++]}catch(m){p=m}l.push(p),u.push(g.name||null)}),re.fromItems(l,u)}parseTransaction(t){const e=M(t.data,"tx.data"),n=I(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(P(e.slice(0,4)));if(!s)return null;const i=this.#r.decode(s.inputs,e.slice(4));return new Rf(s,s.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new kf(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=P(t),n=this.getError(it(e,0,4));if(!n)return null;const s=this.#r.decode(n.inputs,it(e,4));return new Of(n,n.selector,s)}static from(t){return t instanceof Se?t:typeof t=="string"?new Se(JSON.parse(t)):typeof t.formatJson=="function"?new Se(t.formatJson()):typeof t.format=="function"?new Se(t.format("json")):new Se(t)}}const Aa=BigInt(0);function rn(r){return r??null}function at(r){return r==null?null:r.toString()}class Li{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(t,e,n){U(this,{gasPrice:rn(t),maxFeePerGas:rn(e),maxPriorityFeePerGas:rn(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:at(t),maxFeePerGas:at(e),maxPriorityFeePerGas:at(n)}}}function cr(r){const t={};r.to&&(t.to=r.to),r.from&&(t.from=r.from),r.data&&(t.data=P(r.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in r)||r[s]==null||(t[s]=I(r[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in r)||r[s]==null||(t[s]=F(r[s],`request.${s}`));return r.accessList&&(t.accessList=je(r.accessList)),r.authorizationList&&(t.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(t.blockTag=r.blockTag),"enableCcipRead"in r&&(t.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(t.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(t.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(t.kzg=r.kzg),"blobWrapperVersion"in r&&(t.blobWrapperVersion=r.blobWrapperVersion),"blobs"in r&&r.blobs&&(t.blobs=r.blobs.map(s=>ws(s)?P(s):Object.assign({},s))),t}class Sf{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#t;constructor(t,e){this.#t=t.transactions.map(n=>typeof n!="string"?new Fn(n,e):n),U(this,{provider:e,hash:rn(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:rn(t.prevRandao),extraData:t.extraData,baseFeePerGas:rn(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return this.#t.map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=this.#t.slice();return t.length===0?[]:(A(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,parentBeaconBlockRoot:h,stateRoot:g,receiptsRoot:y,timestamp:p,transactions:m}=this;return{_type:"Block",baseFeePerGas:at(t),difficulty:at(e),extraData:n,gasLimit:at(s),gasUsed:at(i),blobGasUsed:at(this.blobGasUsed),excessBlobGas:at(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,timestamp:p,parentBeaconBlockRoot:h,stateRoot:g,receiptsRoot:y,transactions:m}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#t.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=this.#t[t];else{const n=t.toLowerCase();for(const s of this.#t)if(typeof s=="string"){if(s!==n)continue;e=s;break}else{if(s.hash!==n)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;d(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Tf(this)}}class Ln{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(t,e){this.provider=e;const n=Object.freeze(t.topics.slice());U(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return A(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return A(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return A(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return Uf(this)}}class ba{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#t;constructor(t,e){this.#t=Object.freeze(t.logs.map(s=>new Ln(s,e)));let n=Aa;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),U(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return this.#t}toJSON(){const{to:t,from:e,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:at(this.cumulativeGasUsed),from:e,gasPrice:at(this.gasPrice),blobGasUsed:at(this.blobGasUsed),blobGasPrice:at(this.blobGasPrice),gasUsed:at(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:f,status:u,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return xa(this)}reorderedEvent(t){return A(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Ea(this,t)}}class Fn{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#t;constructor(t,e){this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,this.#t=-1}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:f,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:t,blockHash:e,blobVersionedHashes:h,chainId:at(this.chainId),data:l,from:a,gasLimit:at(this.gasLimit),gasPrice:at(this.gasPrice),hash:s,maxFeePerGas:at(this.maxFeePerGas),maxPriorityFeePerGas:at(this.maxPriorityFeePerGas),maxFeePerBlobGas:at(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:n,type:i,value:at(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await At({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,s=e??0;let i=this.#t,o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:g}=await At({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){i=h;return}if(a)return null;const y=await this.getTransaction();if(!(y&&y.blockNumber!=null))for(o===-1&&(o=i-3,o<this.#t&&(o=this.#t));o<=h;){if(a)return null;const p=await this.provider.getBlock(o,!0);if(p==null)return;for(const m of p)if(m===this.hash)return;for(let m=0;m<p.length;m++){const w=await p.getTransaction(m);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const N=await this.provider.getTransactionReceipt(w.hash);if(N==null||h-N.blockNumber+1<n)return;let E="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?E="repriced":w.data==="0x"&&w.from===w.to&&w.value===Aa&&(E="cancelled"),A(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:N})}}o++}},l=h=>{if(h==null||h.status!==0)return h;A(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(n===0)return l(u);if(u){if(n===1||await u.confirmations()>=n)return l(u)}else if(await c(),n===0)return null;return await new Promise((h,g)=>{const y=[],p=()=>{y.forEach(w=>w())};if(y.push(()=>{a=!0}),s>0){const w=setTimeout(()=>{p(),g(q("wait for transaction timeout","TIMEOUT"))},s);y.push(()=>{clearTimeout(w)})}const m=async w=>{if(await w.confirmations()>=n){p();try{h(l(w))}catch(N){g(N)}}};if(y.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),i>=0){const w=async()=>{try{await c()}catch(N){if(mt(N,"TRANSACTION_REPLACED")){p(),g(N);return}}a||this.provider.once("block",w)};y.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return A(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),xa(this)}reorderedEvent(t){return A(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),A(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ea(this,t)}replaceableTransaction(t){d(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new Fn(this,this.provider);return e.#t=t,e}}function Tf(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function Ea(r,t){return{orphan:"reorder-transaction",tx:r,other:t}}function xa(r){return{orphan:"drop-transaction",tx:r}}function Uf(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class ks extends Ln{interface;fragment;args;constructor(t,e,n){super(t,t.provider);const s=e.decodeEventLog(n,t.data,t.topics);U(this,{args:s,fragment:n,interface:e})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Na extends Ln{error;constructor(t,e){super(t,t.provider),U(this,{error:e})}}class Lf extends ba{#t;constructor(t,e,n){super(n,e),this.#t=t}get logs(){return super.logs.map(t=>{const e=t.topics.length?this.#t.getEvent(t.topics[0]):null;if(e)try{return new ks(t,this.#t,e)}catch(n){return new Na(t,n)}return t})}}class Rs extends Fn{#t;constructor(t,e,n){super(n,e),this.#t=t}async wait(t,e){const n=await super.wait(t,e);return n==null?null:new Lf(this.#t,this.provider,n)}}class Pa extends wo{log;constructor(t,e,n,s){super(t,e,n),U(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Ff extends Pa{constructor(t,e,n,s,i){super(t,e,n,new ks(i,t.interface,s));const o=t.interface.decodeEventLog(s,this.log.data,this.log.topics);U(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Fi=BigInt(0);function va(r){return r&&typeof r.call=="function"}function Ba(r){return r&&typeof r.estimateGas=="function"}function br(r){return r&&typeof r.resolveName=="function"}function Ia(r){return r&&typeof r.sendTransaction=="function"}function Ca(r){if(r!=null){if(br(r))return r;if(r.provider)return r.provider}}class Df{#t;fragment;constructor(t,e,n){if(U(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const s=ze(t.runner,"resolveName"),i=br(s)?s:null;this.#t=(async function(){const o=await Promise.all(e.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(h=>xt(h,i))):xt(f,i):f)));return t.interface.encodeFilterTopics(e,o)})()}getTopicFilter(){return this.#t}}function ze(r,t){return r==null?null:typeof r[t]=="function"?r:r.provider&&typeof r.provider[t]=="function"?r.provider:null}function De(r){return r==null?null:r.provider||null}async function ka(r,t){const e=ot.dereference(r,"overrides");d(typeof e=="object","invalid overrides parameter","overrides",r);const n=cr(e);return d(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),d(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Mf(r,t,e){const n=ze(r,"resolveName"),s=br(n)?n:null;return await Promise.all(t.map((i,o)=>i.walkAsync(e[o],(a,c)=>(c=ot.dereference(c,a),a==="address"?xt(c,s):c))))}function Gf(r){const t=async function(o){const a=await ka(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await xt(a.from,Ca(r.runner)));const c=r.interface,l=I(a.value||Fi,"overrides.value")===Fi,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&d(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),d(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const f=c.receive||c.fallback&&c.fallback.payable;return d(f||l,"cannot send value to non-payable fallback","overrides.value",a.value),d(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=ze(r.runner,"call");A(va(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(l){throw ys(l)&&l.data?r.interface.makeError(l.data,c):l}},n=async function(o){const a=r.runner;A(Ia(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),l=De(r.runner);return new Rs(r.interface,l,c)},s=async function(o){const a=ze(r.runner,"estimateGas");return A(Ba(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},i=async o=>await n(o);return U(i,{_contract:r,estimateGas:s,populateTransaction:t,send:n,staticCall:e}),i}function Hf(r,t){const e=function(...l){const u=r.interface.getFunction(t,l);return A(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:l}}),u},n=async function(...l){const u=e(...l);let f={};if(u.inputs.length+1===l.length&&(f=await ka(l.pop()),f.from&&(f.from=await xt(f.from,Ca(r.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await Mf(r.runner,u.inputs,l);return Object.assign({},f,await At({to:r.getAddress(),data:r.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=r.runner;A(Ia(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await n(...l)),h=De(r.runner);return new Rs(r.interface,h,f)},o=async function(...l){const u=ze(r.runner,"estimateGas");return A(Ba(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await n(...l))},a=async function(...l){const u=ze(r.runner,"call");A(va(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await n(...l);let h="0x";try{h=await u.call(f)}catch(y){throw ys(y)&&y.data?r.interface.makeError(y.data,f):y}const g=e(...l);return r.interface.decodeFunctionResult(g,h)},c=async(...l)=>e(...l).constant?await s(...l):await i(...l);return U(c,{name:r.interface.getFunctionName(t),_contract:r,_key:t,getFragment:e,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=r.interface.getFunction(t);return A(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),l}}),c}function Qf(r,t){const e=function(...s){const i=r.interface.getEvent(t,s);return A(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},n=function(...s){return new Df(r,e(...s),s)};return U(n,{name:r.interface.getEventName(t),_contract:r,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=r.interface.getEvent(t);return A(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}const lr=Symbol.for("_ethersInternal_contract"),Ra=new WeakMap;function Vf(r,t){Ra.set(r[lr],t)}function kt(r){return Ra.get(r[lr])}function zf(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function Os(r,t){let e,n=null;if(Array.isArray(t)){const i=function(o){if(X(o,32))return o;const a=r.interface.getEvent(o);return d(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else t==="*"?e=[null]:typeof t=="string"?X(t,32)?e=[t]:(n=r.interface.getEvent(t),d(n,"unknown fragment","event",t),e=[n.topicHash]):zf(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):d(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:e}}async function An(r,t){const{subs:e}=kt(r);return e.get((await Os(r,t)).tag)||null}async function Di(r,t,e){const n=De(r.runner);A(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await Os(r,e),{addr:a,subs:c}=kt(r);let l=c.get(i);if(!l){const f={address:a||r,topics:o},h=m=>{let w=s;if(w==null)try{w=r.interface.getEvent(m.topics[0])}catch{}if(w){const N=w,E=s?r.interface.decodeEventLog(s,m.data,m.topics):[];cs(r,e,E,T=>new Ff(r,T,e,N,m))}else cs(r,e,[],N=>new Pa(r,N,e,m))};let g=[];l={tag:i,listeners:[],start:()=>{g.length||g.push(n.on(f,h))},stop:async()=>{if(g.length==0)return;let m=g;g=[],await Promise.all(m),n.off(f,h)}},c.set(i,l)}return l}let as=Promise.resolve();async function jf(r,t,e,n){await as;const s=await An(r,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),kt(r).subs.delete(s.tag)),i>0}async function cs(r,t,e,n){try{await as}catch{}const s=jf(r,t,e,n);return as=s,await s}const Kn=["then"];class En{target;interface;runner;filters;[lr];fallback;constructor(t,e,n,s){d(typeof t=="string"||ea(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=Se.from(e);U(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,lr,{value:{}});let o,a=null,c=null;if(s){const f=De(n);c=new Rs(this.interface,f,s)}let l=new Map;if(typeof t=="string")if(X(t))a=t,o=Promise.resolve(t);else{const f=ze(n,"resolveName");if(!br(f))throw q("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(t).then(h=>{if(h==null)throw q("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return kt(this).addr=h,h})}else o=t.getAddress().then(f=>{if(f==null)throw new Error("TODO");return kt(this).addr=f,f});Vf(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(f,h,g)=>{if(typeof h=="symbol"||Kn.indexOf(h)>=0)return Reflect.get(f,h,g);try{return this.getEvent(h)}catch(y){if(!mt(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(f,h)=>Kn.indexOf(h)>=0?Reflect.has(f,h):Reflect.has(f,h)||this.interface.hasEvent(String(h))});return U(this,{filters:u}),U(this,{fallback:i.receive||i.fallback?Gf(this):null}),new Proxy(this,{get:(f,h,g)=>{if(typeof h=="symbol"||h in f||Kn.indexOf(h)>=0)return Reflect.get(f,h,g);try{return f.getFunction(h)}catch(y){if(!mt(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(f,h)=>typeof h=="symbol"||h in f||Kn.indexOf(h)>=0?Reflect.has(f,h):f.interface.hasFunction(h)})}connect(t){return new En(this.target,this.interface,t)}attach(t){return new En(t,this.interface,this.runner)}async getAddress(){return await kt(this).addrPromise}async getDeployedCode(){const t=De(this.runner);A(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=De(this.runner);return A(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return kt(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),Hf(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Qf(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=kt(this),o=s||await i,{fragment:a,topics:c}=await Os(this,t),l={address:o,topics:c,fromBlock:e,toBlock:n},u=De(this.runner);return A(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(f=>{let h=a;if(h==null)try{h=this.interface.getEvent(f.topics[0])}catch{}if(h)try{return new ks(f,this.interface,h)}catch(g){return new Na(f,g)}return new Ln(f,u)})}async on(t,e){const n=await Di(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await Di(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await cs(this,t,e,null)}async listenerCount(t){if(t){const s=await An(this,t);return s?s.listeners.length:0}const{subs:e}=kt(this);let n=0;for(const{listeners:s}of e.values())n+=s.length;return n}async listeners(t){if(t){const s=await An(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=kt(this);let n=[];for(const{listeners:s}of e.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(t,e){const n=await An(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(e==null||n.listeners.length===0)&&(n.stop(),kt(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await An(this,t);if(!e)return this;e.stop(),kt(this).subs.delete(e.tag)}else{const{subs:e}=kt(this);for(const{tag:n,stop:s}of e.values())s(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends En{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}}function Jf(){return En}class Zt extends Jf(){}function Mr(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):d(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class Kf{name;constructor(t){U(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Oa=new RegExp("^(ipfs)://(.*)$","i"),Mi=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Oa,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class sn{provider;address;name;#t;#e;constructor(t,e,n){U(this,{provider:t,address:e,name:n}),this.#t=null,this.#e=new Zt(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t)}async supportsWildcard(){return this.#t==null&&(this.#t=(async()=>{try{return await this.#e.supportsInterface("0x9061b923")}catch(t){if(mt(t,"CALL_EXCEPTION"))return!1;throw this.#t=null,t}})()),await this.#t}async#n(t,e){e=(e||[]).slice();const n=this.#e.interface;e.unshift(os(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(t),A(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[af(this.name,255),n.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await this.#e[t](...e);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!mt(i,"CALL_EXCEPTION"))throw i}return null}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await this.#n("addr(bytes32)");return i==null||i===Cn?null:i}catch(i){if(mt(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const o=await this.#n("addr(bytes32,uint)",[i]);if(X(o,20))return _(o)}let e=null;for(const i of this.provider.plugins)if(i instanceof Kf&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await this.#n("addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const s=await e.decodeAddress(t,n);if(s!=null)return s;A(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await this.#n("text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await this.#n("contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${Sc("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;A(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<Mi.length;n++){const s=e.match(Mi[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=Mr(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(s[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const l=c[1],u=new Zt(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const p=await u.ownerOf(l);if(a!==p)return t.push({type:"!owner",value:p}),{url:null,linkage:t};t.push({type:"owner",value:p})}else if(i==="erc1155"){const p=await u.balanceOf(a,l);if(!p)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:p.toString()})}let f=await u[o](l);if(f==null||f==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",xe(l,32).substring(2)),t.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=Mr(f)),t.push({type:"metadata-url",value:f});let h={};const g=await new Wt(f).send();g.assertOk();try{h=g.bodyJson}catch{try{t.push({type:"!metadata",value:g.bodyText})}catch{const w=g.body;return w&&t.push({type:"!metadata",value:P(w)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!h)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(h)});let y=h.image;if(typeof y!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!y.match(/^(https:\/\/|data:)/i)){if(y.match(Oa)==null)return t.push({type:"!imageUrl-ipfs",value:y}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:y}),y=Mr(y)}return t.push({type:"url",value:y}),{linkage:t,url:y}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return A(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async#r(t,e){const n=await sn.getEnsAddress(t);try{const i=await new Zt(n,["function resolver(bytes32) view returns (address)"],t).resolver(os(e),{enableCcipRead:!0});return i===Cn?null:i}catch(s){throw s}return null}static async fromName(t,e){let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const s=await sn.#r(t,n);if(s!=null){const i=new sn(t,s,e);return n!==e&&!await i.supportsWildcard()?null:i}n=n.split(".").slice(1).join(".")}}}const Gi=BigInt(0);function V(r,t){return(function(e){return e==null?t:r(e)})}function Rn(r,t){return(e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(n=>r(n))})}function Dn(r,t){return(e=>{const n={};for(const s in r){let i=s;if(t&&s in t&&!(i in e)){for(const o of t[s])if(o in e){i=o;break}}try{const o=r[s](e[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";A(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:e})}}return n})}function _f(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}d(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function hn(r){return d(X(r,!0),"invalid data","value",r),r}function gt(r){return d(X(r,32),"invalid hash","value",r),r}const Zf=Dn({address:_,blockHash:gt,blockNumber:F,data:hn,index:F,removed:V(_f,!1),topics:Rn(gt),transactionHash:gt,transactionIndex:F},{index:["logIndex"]});function Wf(r){return Zf(r)}const Yf=Dn({hash:V(gt),parentHash:gt,parentBeaconBlockRoot:V(gt,null),number:F,timestamp:F,nonce:V(hn),difficulty:I,gasLimit:I,gasUsed:I,stateRoot:V(gt,null),receiptsRoot:V(gt,null),blobGasUsed:V(I,null),excessBlobGas:V(I,null),miner:V(_),prevRandao:V(gt,null),extraData:hn,baseFeePerGas:V(I)},{prevRandao:["mixHash"]});function Xf(r){const t=Yf(r);return t.transactions=r.transactions.map(e=>typeof e=="string"?e:Sa(e)),t}const qf=Dn({transactionIndex:F,blockNumber:F,transactionHash:gt,address:_,topics:Rn(gt),data:hn,index:F,blockHash:gt},{index:["logIndex"]});function $f(r){return qf(r)}const th=Dn({to:V(_,null),from:V(_,null),contractAddress:V(_,null),index:F,root:V(P),gasUsed:I,blobGasUsed:V(I,null),logsBloom:V(hn),blockHash:gt,hash:gt,logs:Rn($f),blockNumber:F,cumulativeGasUsed:I,effectiveGasPrice:V(I),blobGasPrice:V(I,null),status:V(F),type:V(F,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function eh(r){return th(r)}function Sa(r){r.to&&I(r.to)===Gi&&(r.to="0x0000000000000000000000000000000000000000");const t=Dn({hash:gt,index:V(F,void 0),type:e=>e==="0x"||e==null?0:F(e),accessList:V(je,null),blobVersionedHashes:V(Rn(gt,!0),null),authorizationList:V(Rn(e=>{let n;if(e.signature)n=e.signature;else{let s=e.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),n=Object.assign({},e,{yParity:s})}return{address:_(e.address),chainId:I(e.chainId),nonce:I(e.nonce),signature:nt.from(n)}},!1),null),blockHash:V(gt,null),blockNumber:V(F,null),transactionIndex:V(F,null),from:_,gasPrice:V(I),maxPriorityFeePerGas:V(I),maxFeePerGas:V(I),maxFeePerBlobGas:V(I,null),gasLimit:I,to:V(_,null),value:I,nonce:F,data:hn,creates:V(_,null),chainId:V(I,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(t.to==null&&t.creates==null&&(t.creates=Nu(t)),(r.type===1||r.type===2)&&r.accessList==null&&(t.accessList=[]),r.signature?t.signature=nt.from(r.signature):t.signature=nt.from(r),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&I(t.blockHash)===Gi&&(t.blockHash=null),t}const nh="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Mn{name;constructor(t){U(this,{name:t})}clone(){return new Mn(this.name)}}class Er extends Mn{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(t,e){t==null&&(t=0),super(`org.ethers.network.plugins.GasCost#${t||0}`);const n={effectiveBlock:t};function s(i,o){let a=(e||{})[i];a==null&&(a=o),d(typeof a=="number",`invalud value for ${i}`,"costs",e),n[i]=a}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),U(this,n)}clone(){return new Er(this.effectiveBlock,this)}}class xr extends Mn{address;targetNetwork;constructor(t,e){super("org.ethers.plugins.network.Ens"),U(this,{address:t||nh,targetNetwork:e??1})}clone(){return new xr(this.address,this.targetNetwork)}}class rh extends Mn{#t;#e;get url(){return this.#t}get processFunc(){return this.#e}constructor(t,e){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#t=t,this.#e=e}clone(){return this}}const Gr=new Map;class Rt{#t;#e;#n;constructor(t,e){this.#t=t,this.#e=I(e),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#t}set name(t){this.#t=t}get chainId(){return this.#e}set chainId(t){this.#e=I(t,"chainId")}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===I(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===I(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===I(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(t){if(this.#n.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#n.set(t.name,t.clone()),this}getPlugin(t){return this.#n.get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new Rt(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Er;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const s=je(t.accessList);for(const i in s)n+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(t){if(sh(),t==null)return Rt.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=Gr.get(t);if(e)return e();if(typeof t=="bigint")return new Rt("unknown",t);d(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){d(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new Rt(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new xr(t.ensAddress,t.ensNetwork)),e}d(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=Gr.get(t);n&&d(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),Gr.set(t,e)}}function Hi(r,t){const e=String(r);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function Qi(r){return new rh(r,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),t()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Hi(a.maxFee,9),maxPriorityFeePerGas:Hi(a.maxPriorityFee,9)}}catch(i){A(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let Vi=!1;function sh(){if(Vi)return;Vi=!0;function r(t,e,n){const s=function(){const i=new Rt(t,e);return n.ensNetwork!=null&&i.attachPlugin(new xr(null,n.ensNetwork)),i.attachPlugin(new Er),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Rt.register(t,s),Rt.register(e,s),n.altNames&&n.altNames.forEach(i=>{Rt.register(i,s)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("filecoin",314,{}),r("filecoin-calibration",314159,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[Qi("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Qi("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function ls(r){return JSON.parse(JSON.stringify(r))}class ih{#t;#e;#n;#r;constructor(t){this.#t=t,this.#e=null,this.#n=4e3,this.#r=-2}get pollingInterval(){return this.#n}set pollingInterval(t){this.#n=t}async#s(){try{const t=await this.#t.getBlockNumber();if(this.#r===-2){this.#r=t;return}if(t!==this.#r){for(let e=this.#r+1;e<=t;e++){if(this.#e==null)return;await this.#t.emit("block",e)}this.#r=t}}catch{}this.#e!=null&&(this.#e=this.#t._setTimeout(this.#s.bind(this),this.#n))}start(){this.#e||(this.#e=this.#t._setTimeout(this.#s.bind(this),this.#n),this.#s())}stop(){this.#e&&(this.#t._clearTimeout(this.#e),this.#e=null)}pause(t){this.stop(),t&&(this.#r=-2)}resume(){this.start()}}class Ss{#t;#e;#n;constructor(t){this.#t=t,this.#n=!1,this.#e=e=>{this._poll(e,this.#t)}}async _poll(t,e){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#e(-2),this.#t.on("block",this.#e))}stop(){this.#n&&(this.#n=!1,this.#t.off("block",this.#e))}pause(t){this.stop()}resume(){this.start()}}class oh extends Ss{#t;#e;constructor(t,e){super(t),this.#t=e,this.#e=-2}pause(t){t&&(this.#e=-2),super.pause(t)}async _poll(t,e){const n=await e.getBlock(this.#t);n!=null&&(this.#e===-2?this.#e=n.number:n.number>this.#e&&(e.emit(this.#t,n.number),this.#e=n.number))}}class ah extends Ss{#t;constructor(t,e){super(t),this.#t=ls(e)}async _poll(t,e){throw new Error("@TODO")}}class ch extends Ss{#t;constructor(t,e){super(t),this.#t=e}async _poll(t,e){const n=await e.getTransactionReceipt(this.#t);n&&e.emit(this.#t,n)}}class Ts{#t;#e;#n;#r;#s;constructor(t,e){this.#t=t,this.#e=ls(e),this.#n=this.#o.bind(this),this.#r=!1,this.#s=-2}async#o(t){if(this.#s===-2)return;const e=ls(this.#e);e.fromBlock=this.#s+1,e.toBlock=t;const n=await this.#t.getLogs(e);if(n.length===0){this.#s<t-60&&(this.#s=t-60);return}for(const s of n)this.#t.emit(this.#e,s),this.#s=s.blockNumber}start(){this.#r||(this.#r=!0,this.#s===-2&&this.#t.getBlockNumber().then(t=>{this.#s=t}),this.#t.on("block",this.#n))}stop(){this.#r&&(this.#r=!1,this.#t.off("block",this.#n))}pause(t){this.stop(),t&&(this.#s=-2)}resume(){this.start()}}const lh=BigInt(2),uh=10;function _n(r){return r&&typeof r.then=="function"}function Xn(r,t){return r+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class Ta{name;constructor(t){U(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function fh(r){return JSON.parse(JSON.stringify(r))}function us(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function Hr(r,t){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(X(r,32)){const e=r.toLowerCase();return{type:"transaction",tag:Xn("tx",{hash:e}),hash:e}}if(r.orphan){const e=r;return{type:"orphan",tag:Xn("orphan",e),filter:fh(e)}}if(r.address||r.topics){const e=r,n={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?us(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],o=a=>{X(a)?s.push(a):i.push((async()=>{s.push(await xt(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),i.length&&await Promise.all(i),n.address=us(s.map(a=>a.toLowerCase()))}return{filter:n,tag:Xn("event",n),type:"event"}}d(!1,"unknown ProviderEvent","event",r)}function Qr(){return new Date().getTime()}const hh={cacheTimeout:250,pollingInterval:4e3};class dh{#t;#e;#n;#r;#s;#o;#i;#a;#f;#l;#p;#g;constructor(t,e){if(this.#g=Object.assign({},hh,e||{}),t==="any")this.#o=!0,this.#s=null;else if(t){const n=Rt.from(t);this.#o=!1,this.#s=Promise.resolve(n),setTimeout(()=>{this.emit("network",n,null)},0)}else this.#o=!1,this.#s=null;this.#a=-1,this.#i=new Map,this.#t=new Map,this.#e=new Map,this.#n=null,this.#r=!1,this.#f=1,this.#l=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#e.values())}attachPlugin(t){if(this.#e.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#e.set(t.name,t.connect(this)),this}getPlugin(t){return this.#e.get(t)||null}get disableCcipRead(){return this.#p}set disableCcipRead(t){this.#p=!!t}async#c(t){const e=this.#g.cacheTimeout;if(e<0)return await this._perform(t);const n=Xn(t.method,t);let s=this.#i.get(n);return s||(s=this._perform(t),this.#i.set(n,s),setTimeout(()=>{this.#i.get(n)===s&&this.#i.delete(n)},e)),await s}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Wt(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:n});let f="unknown error",h;try{h=await u.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:g}});continue}try{const g=h.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:g}),g.data;g.message&&(f=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:g})}catch{}A(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:f}}),o.push(f)}A(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:o}})}_wrapBlock(t,e){return new Sf(Xf(t),this)}_wrapLog(t,e){return new Ln(Wf(t),this)}_wrapTransactionReceipt(t,e){return new ba(eh(t),this)}_wrapTransactionResponse(t,e){return new Fn(Sa(t),this)}_detectNetwork(){A(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){A(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=F(await this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=t),t}_getAddress(t){return xt(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(X(t))return X(t,32)?t:Ht(t);if(typeof t=="bigint"&&(t=F(t,"blockTag")),typeof t=="number")return t>=0?Ht(t):this.#a>=0?Ht(this.#a+t):this.getBlockNumber().then(e=>Ht(e+t));d(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?us(c.map(l=>l.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,s=(c,l,u)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(n&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return f&&(h.address=f),e.length&&(h.topics=e),l&&(h.fromBlock=l),u&&(h.toBlock=u),n&&(h.blockHash=n),h};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(t){const e=cr(t),n=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=xt(e[s],this);_n(i)?n.push((async function(){e[s]=await i})()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);_n(s)?n.push((async function(){e.blockTag=await s})()):e.blockTag=s}return n.length?(async function(){return await Promise.all(n),e})():e}async getNetwork(){if(this.#s==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw this.#s===s&&(this.#s=null),i}})();return this.#s=s,(await s).clone()}const t=this.#s,[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(this.#o?(this.emit("network",n,e),this.#s===t&&(this.#s=Promise.resolve(n))):A(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await At({_block:this.#w("latest",!1),gasPrice:(async()=>{try{const u=await this.#c({method:"getGasPrice"});return I(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await this.#c({method:"getPriorityFee"});return I(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,t);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*lh+c),new Li(i,a,c)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Wt(n.url),i=await n.processFunc(e,this,s);return new Li(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return _n(e)&&(e=await e),I(await this.#c({method:"estimateGas",transaction:e}),"%response")}async#u(t,e,n){A(n<uh,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=cr(t);try{return P(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&ys(i)&&i.data&&n>=0&&e==="latest"&&s.to!=null&&it(i.data,0,4)==="0x556f1830"){const o=i.data,a=await xt(s.to,this);let c;try{c=wh(it(i.data,4))}catch(f){A(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}A(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);A(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:$([c.selector,yh([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await this.#u(u,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw i}}async#h(t){const{value:e}=await At({network:this.getNetwork(),value:t});return e}async call(t){const{tx:e,blockTag:n}=await At({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await this.#h(this.#u(e,n,t.enableCcipRead?0:-1))}async#d(t,e,n){let s=this._getAddress(e),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await this.#h(this.#c(Object.assign(t,{address:s,blockTag:i})))}async getBalance(t,e){return I(await this.#d({method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return F(await this.#d({method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return P(await this.#d({method:"getCode"},t,e))}async getStorage(t,e,n){const s=I(e,"position");return P(await this.#d({method:"getStorage",position:s},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:s}=await At({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=Gt.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async#w(t,e){if(X(t,32))return await this.#c({method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await this.#c({method:"getBlock",blockTag:n,includeTransactions:e})}async getBlock(t,e){const{network:n,params:s}=await At({network:this.getNetwork(),params:this.#w(t,!!e)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(t){const{network:e,params:n}=await At({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await At({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await this.#c({method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await At({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:t})});return e==null?null:P(e)}async getLogs(t){let e=this._getFilter(t);_n(e)&&(e=await e);const{network:n,params:s}=await At({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,n))}_getProvider(t){A(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await sn.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=_(t);const e=os(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await sn.getEnsAddress(this),i=await new Zt(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===Cn)return null;const a=await new Zt(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(n){if(mt(n,"BAD_DATA")&&n.value==="0x"||mt(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,o)=>{let a=null;const c=(async l=>{try{const u=await this.getTransactionReceipt(t);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)});n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(q("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){A(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=this.#l.get(t);e&&(e.timer&&clearTimeout(e.timer),this.#l.delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=this.#f++,s=()=>{this.#l.delete(n),t()};if(this.paused)this.#l.set(n,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);this.#l.set(n,{timer:i,func:s,time:Qr()})}return n}_forEachSubscriber(t){for(const e of this.#t.values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Ta(t.type);case"block":{const e=new ih(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new oh(this,t.type);case"event":return new Ts(this,t.filter);case"transaction":return new ch(this,t.hash);case"orphan":return new ah(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of this.#t.values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),this.#n!=null&&e.pause(this.#n);break}}async#m(t,e){let n=await Hr(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await Hr({orphan:"drop-log",log:e[0]},this)),this.#t.get(n.tag)||null}async#y(t){const e=await Hr(t,this),n=e.tag;let s=this.#t.get(n);return s||(s={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#t.set(n,s)),s}async on(t,e){const n=await this.#y(t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,this.#n!=null&&n.subscriber.pause(this.#n)),this}async once(t,e){const n=await this.#y(t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,this.#n!=null&&n.subscriber.pause(this.#n)),this}async emit(t,...e){const n=await this.#m(t,e);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new wo(this,o?null:i,t);try{i.call(this,...e,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),this.#t.delete(n.tag)),s>0}async listenerCount(t){if(t){const n=await this.#m(t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of this.#t.values())e+=n.length;return e}async listeners(t){if(t){const n=await this.#m(t);return n?n.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:n}of this.#t.values())e=e.concat(n.map(({listener:s})=>s));return e}async off(t,e){const n=await this.#m(t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),this.#t.delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:s}=await this.#y(t);n&&s.stop(),this.#t.delete(e)}else for(const[e,{started:n,subscriber:s}]of this.#t)n&&s.stop(),this.#t.delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return this.#r}destroy(){this.removeAllListeners();for(const t of this.#l.keys())this._clearTimeout(t);this.#r=!0}get paused(){return this.#n!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(this.#a=-1,this.#n!=null){if(this.#n==!!t)return;A(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),this.#n=!!t;for(const e of this.#l.values())e.timer&&clearTimeout(e.timer),e.time=Qr()-e.time}resume(){if(this.#n!=null){this._forEachSubscriber(t=>t.resume()),this.#n=null;for(const t of this.#l.values()){let e=t.time;e<0&&(e=0),t.time=Qr(),setTimeout(t.func,e)}}}}function ph(r,t){try{const e=fs(r,t);if(e)return or(e)}catch{}return null}function fs(r,t){if(r==="0x")return null;try{const e=F(it(r,t,t+32)),n=F(it(r,e,e+32));return it(r,e+32,e+32+n)}catch{}return null}function zi(r){const t=ut(r);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function gh(r){if(r.length%32===0)return r;const t=new Uint8Array(Math.ceil(r.length/32)*32);return t.set(r),t}const mh=new Uint8Array([]);function yh(r){const t=[];let e=0;for(let n=0;n<r.length;n++)t.push(mh),e+=32;for(let n=0;n<r.length;n++){const s=M(r[n]);t[n]=zi(e),t.push(zi(s.length)),t.push(gh(s)),e+=32+Math.ceil(s.length/32)*32}return $(t)}const ji="0x0000000000000000000000000000000000000000000000000000000000000000";function wh(r){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};A(en(r)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=it(r,0,32);A(it(e,0,12)===it(ji,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=it(e,12);try{const n=[],s=F(it(r,32,64)),i=F(it(r,s,s+32)),o=it(r,s+32);for(let a=0;a<i;a++){const c=ph(o,a*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{A(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=fs(r,64);if(n==null)throw new Error("abort");t.calldata=n}catch{A(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}A(it(r,100,128)===it(ji,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=it(r,96,100);try{const n=fs(r,128);if(n==null)throw new Error("abort");t.extraData=n}catch{A(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Ce(r,t){if(r.provider)return r.provider;A(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Ji(r,t){let e=cr(t);if(e.to!=null&&(e.to=xt(e.to,r)),e.from!=null){const n=e.from;e.from=Promise.all([r.getAddress(),xt(n,r)]).then(([s,i])=>(d(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=r.getAddress();return await At(e)}class Ah{provider;constructor(t){U(this,{provider:t||null})}async getNonce(t){return Ce(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Ji(this,t)}async populateTransaction(t){const e=Ce(this,"populateTransaction"),n=await Ji(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=I(n.chainId);d(o===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?d(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&d(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await e.getFeeData();A(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(A(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):A(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await At(n)}async populateAuthorization(t){const e=Object.assign({},t);return e.chainId==null&&(e.chainId=(await Ce(this,"getNetwork").getNetwork()).chainId),e.nonce==null&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return Ce(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Ce(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Ce(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Ce(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const s=Gt.from(n);return await e.broadcastTransaction(await this.signTransaction(s))}authorize(t){A(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function bh(r){return JSON.parse(JSON.stringify(r))}class Ua{#t;#e;#n;#r;#s;#o;constructor(t){this.#t=t,this.#e=null,this.#n=this.#i.bind(this),this.#r=!1,this.#s=null,this.#o=!1}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}async#i(t){try{this.#e==null&&(this.#e=this._subscribe(this.#t));let e=null;try{e=await this.#e}catch(i){if(!mt(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){this.#e=null,this.#t._recoverSubscriber(this,this._recover(this.#t));return}const n=await this.#t.getNetwork();if(this.#s||(this.#s=n),this.#s.chainId!==n.chainId)throw new Error("chaid changed");if(this.#o)return;const s=await this.#t.send("eth_getFilterChanges",[e]);await this._emitResults(this.#t,s)}catch(e){console.log("@TODO",e)}this.#t.once("block",this.#n)}#a(){const t=this.#e;t&&(this.#e=null,t.then(e=>{this.#t.destroyed||this.#t.send("eth_uninstallFilter",[e])}))}start(){this.#r||(this.#r=!0,this.#i(-2))}stop(){this.#r&&(this.#r=!1,this.#o=!0,this.#a(),this.#t.off("block",this.#n))}pause(t){t&&this.#a(),this.#t.off("block",this.#n)}resume(){this.start()}}class Eh extends Ua{#t;constructor(t,e){super(t),this.#t=bh(e)}_recover(t){return new Ts(t,this.#t)}async _subscribe(t){return await t.send("eth_newFilter",[this.#t])}async _emitResults(t,e){for(const n of e)t.emit(this.#t,t._wrapLog(n,t._network))}}class xh extends Ua{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const Nh="bigint,boolean,function,number,string,symbol".split(/,/g);function qn(r){if(r==null||Nh.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(qn);if(typeof r=="object")return Object.keys(r).reduce((t,e)=>(t[e]=r[e],t),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function Ph(r){return new Promise(t=>{setTimeout(t,r)})}function Ze(r){return r&&r.toLowerCase()}function Ki(r){return r&&typeof r.pollingInterval=="number"}const La={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Vr extends Ah{address;constructor(t,e){super(t),e=_(e),U(this,{address:e})}connect(t){A(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const e=qn(t),n=[];if(e.from){const i=e.from;n.push((async()=>{const o=await xt(i,this.provider);d(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=o})())}else e.from=this.address;if(e.gasLimit==null&&n.push((async()=>{e.gasLimit=await this.provider.estimateGas({...e,from:this.address})})()),e.to!=null){const i=e.to;n.push((async()=>{e.to=await xt(i,this.provider)})())}n.length&&await Promise.all(n);const s=this.provider.getRpcTransaction(e);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const e=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(t);return await new Promise((s,i)=>{const o=[1e3,100];let a=0;const c=async()=>{try{const l=await this.provider.getTransaction(n);if(l!=null){s(l.replaceableTransaction(e));return}}catch(l){if(mt(l,"CANCELLED")||mt(l,"BAD_DATA")||mt(l,"NETWORK_ERROR")||mt(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=n,i(l);return}if(mt(l,"INVALID_ARGUMENT")&&(a++,l.info==null&&(l.info={}),l.info.sendTransactionHash=n,a>10)){i(l);return}this.provider.emit("error",q("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{c()},o.pop()||4e3)};c()})}async signTransaction(t){const e=qn(t);if(e.from){const s=await xt(e.from,this.provider);d(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=s}else e.from=this.address;const n=this.provider.getRpcTransaction(e);return await this.provider.send("eth_signTransaction",[n])}async signMessage(t){const e=typeof t=="string"?ie(t):t;return await this.provider.send("personal_sign",[P(e),this.address.toLowerCase()])}async signTypedData(t,e,n){const s=qn(n),i=await Ct.resolveNames(t,e,s,async o=>{const a=await xt(o);return d(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Ct.getPayload(i.domain,e,i.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const e=typeof t=="string"?ie(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),P(e)])}}class vh extends dh{#t;#e;#n;#r;#s;#o;#i;#a(){if(this.#r)return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#r=setTimeout(()=>{this.#r=null;const e=this.#n;for(this.#n=[];e.length;){const n=[e.shift()];for(;e.length&&n.length!==this.#t.batchMaxCount;)if(n.push(e.shift()),JSON.stringify(n.map(i=>i.payload)).length>this.#t.batchMaxSize){e.unshift(n.pop());break}(async()=>{const s=n.length===1?n[0].payload:n.map(i=>i.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const i=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:i});for(const{resolve:o,reject:a,payload:c}of n){if(this.destroyed){a(q("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const l=i.filter(u=>u.id===c.id)[0];if(l==null){const u=q("missing response for request","BAD_DATA",{value:i,info:{payload:c}});this.emit("error",u),a(u);continue}if("error"in l){a(this.getRpcError(c,l));continue}o(l.result)}}catch(i){this.emit("debug",{action:"receiveRpcError",error:i});for(const{reject:o}of n)o(i)}})()}},t)}constructor(t,e){super(t,e),this.#e=1,this.#t=Object.assign({},La,e||{}),this.#n=[],this.#r=null,this.#o=null,this.#i=null;{let s=null;const i=new Promise(o=>{s=o});this.#s={promise:i,resolve:s}}const n=this._getOption("staticNetwork");typeof n=="boolean"?(d(!n||t!=="any","staticNetwork cannot be used on special network 'any'","options",e),n&&t!=null&&(this.#o=Rt.from(t))):n&&(d(t==null||n.matches(t),"staticNetwork MUST match network object","options",e),this.#o=n)}_getOption(t){return this.#t[t]}get _network(){return A(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let n=t.transaction;if(n&&n.type!=null&&I(n.type)&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},n,{type:void 0})}))}}const e=this.getRpcRequest(t);return e!=null?await this.send(e.method,e.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(this.#o)return this.#o}else return t;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const e=Rt.from(I(await this.send("eth_chainId",[])));return this.#i=null,e}catch(e){throw this.#i=null,e}})(),await this.#i):(this.#i=(async()=>{const e={id:this.#e++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:e});let n;try{n=(await this._send(e))[0],this.#i=null}catch(s){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return Rt.from(I(n.result));throw this.getRpcError(e,n)})(),await this.#i)}_start(){this.#s==null||this.#s.resolve==null||(this.#s.resolve(),this.#s=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",q("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await Ph(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#s!=null)return await this.#s.promise}_getSubscriber(t){return t.type==="pending"?new xh(this):t.type==="event"?this._getOption("polling")?new Ts(this,t.filter):new Eh(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new Ta("orphan"):super._getSubscriber(t)}get ready(){return this.#s==null}getRpcTransaction(t){const e={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(n=>{if(t[n]==null)return;let s=n;n==="gasLimit"&&(s="gas"),e[s]=Ht(I(t[n],`tx.${n}`))}),["from","to","data"].forEach(n=>{t[n]!=null&&(e[n]=P(t[n]))}),t.accessList&&(e.accessList=je(t.accessList)),t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.map(n=>n.toLowerCase())),t.authorizationList&&(e.authorizationList=t.authorizationList.map(n=>{const s=ia(n);return{address:s.address,nonce:Ht(s.nonce),chainId:Ht(s.chainId),yParity:Ht(s.signature.yParity),r:Ht(s.signature.r),s:Ht(s.signature.s)}})),e}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ze(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ze(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ze(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ze(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Ze):t.filter.address=Ze(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,e){const{method:n}=t,{error:s}=e;if(n==="eth_estimateGas"&&s.message){const a=s.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return q("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}});if(a.match(/nonce/i)&&a.match(/too low/i))return q("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:s}})}if(n==="eth_call"||n==="eth_estimateGas"){const a=hs(s),c=fn.getBuiltinCallException(n==="eth_call"?"call":"estimateGas",t.params[0],a?a.data:null);return c.info={error:s,payload:t},c}const i=JSON.stringify(Ih(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return q("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(n==="eth_sendRawTransaction"||n==="eth_sendTransaction"){const a=t.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return q("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:s}});if(i.match(/nonce/i)&&i.match(/too low/i))return q("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:s}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return q("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:s}});if(i.match(/only replay-protected/i))return q("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:a,info:{error:s}}})}let o=!!i.match(/the method .* does not exist/i);return o||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(o=!0),o?q("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):q("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,e){if(this.destroyed)return Promise.reject(q("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const n=this.#e++,s=new Promise((i,o)=>{this.#n.push({resolve:i,reject:o,payload:{method:t,params:e,id:n,jsonrpc:"2.0"}})});return this.#a(),s}async getSigner(t){t==null&&(t=0);const e=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await e;if(t>=s.length)throw new Error("no such account");return new Vr(this,s[t])}const{accounts:n}=await At({network:this.getNetwork(),accounts:e});t=_(t);for(const s of n)if(_(s)===t)return new Vr(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new Vr(this,e))}destroy(){this.#r&&(clearTimeout(this.#r),this.#r=null);for(const{payload:t,reject:e}of this.#n)e(q("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));this.#n=[],super.destroy()}}class Fa extends vh{#t;constructor(t,e){super(t,e);let n=this._getOption("pollingInterval");n==null&&(n=La.pollingInterval),this.#t=n}_getSubscriber(t){const e=super._getSubscriber(t);return Ki(e)&&(e.pollingInterval=this.#t),e}get pollingInterval(){return this.#t}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");this.#t=t,this._forEachSubscriber(e=>{Ki(e)&&(e.pollingInterval=this.#t)})}}class Bh extends Fa{#t;constructor(t,e,n){t==null&&(t="http://localhost:8545"),super(e,n),typeof t=="string"?this.#t=new Wt(t):this.#t=t.clone()}_getConnection(){return this.#t.clone()}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){const e=this._getConnection();e.body=JSON.stringify(t),e.setHeader("content-type","application/json");const n=await e.send();n.assertOk();let s=n.bodyJson;return Array.isArray(s)||(s=[s]),s}}function hs(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&X(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const t in r){const e=hs(r[t]);if(e)return e}return null}if(typeof r=="string")try{return hs(JSON.parse(r))}catch{}return null}function ds(r,t){if(r!=null){if(typeof r.message=="string"&&t.push(r.message),typeof r=="object")for(const e in r)ds(r[e],t);if(typeof r=="string")try{return ds(JSON.parse(r),t)}catch{}}}function Ih(r){const t=[];return ds(r,t),t}class Te extends Fa{#t;#e;constructor(t,e,n){const s=Object.assign({},n??{},{batchMaxCount:1});d(t&&t.request,"invalid EIP-1193 provider","ethereum",t),super(e,s),this.#e=null,n&&n.providerInfo&&(this.#e=n.providerInfo),this.#t=async(i,o)=>{const a={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const c=await t.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const l=new Error(c.message);throw l.code=c.code,l.data=c.data,l.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}}}get providerInfo(){return this.#e}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){d(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const e=await this.#t(t.method,t.params||[]);return[{id:t.id,result:e}]}catch(e){return[{id:t.id,error:{code:e.code,data:e.data,message:e.message}}]}}getRpcError(t,e){switch(e=JSON.parse(JSON.stringify(e)),e.error.code||-1){case 4001:e.error.message=`ethers-user-denied: ${e.error.message}`;break;case 4200:e.error.message=`ethers-unsupported: ${e.error.message}`;break}return super.getRpcError(t,e)}async hasSigner(t){t==null&&(t=0);const e=await this.send("eth_accounts",[]);return typeof t=="number"?e.length>t:(t=t.toLowerCase(),e.filter(n=>n.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await this.#t("eth_requestAccounts",[])}catch(e){const n=e.payload;throw this.getRpcError(n,{id:n.id,error:e})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new Te(t.provider);const e=t.window?t.window:typeof window<"u"?window:null;if(e==null)return null;const n=t.anyProvider;if(n&&e.ethereum)return new Te(e.ethereum);if(!("addEventListener"in e&&"dispatchEvent"in e&&"removeEventListener"in e))return null;const s=t.timeout?t.timeout:300;return s===0?null:await new Promise((i,o)=>{let a=[];const c=f=>{a.push(f.detail),n&&l()},l=()=>{if(clearTimeout(u),a.length)if(t&&t.filter){const f=t.filter(a.map(h=>Object.assign({},h.info)));if(f==null)i(null);else if(f instanceof Te)i(f);else{let h=null;if(f.uuid&&(h=a.filter(y=>f.uuid===y.info.uuid)[0]),h){const{provider:g,info:y}=h;i(new Te(g,void 0,{providerInfo:y}))}else o(q("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:h}=a[0];i(new Te(f,void 0,{providerInfo:h}))}else i(null);e.removeEventListener("eip6963:announceProvider",c)},u=setTimeout(()=>{l()},s);e.addEventListener("eip6963:announceProvider",c),e.dispatchEvent(new Event("eip6963:requestProvider"))})}}const $n="0xd40ECD47201D8ea25181dc05a638e34469399613",Da="0xAB3f23c2ABcB4E12Cc8B593C218A7ba64Ed17Ba3",Ch="0x2e3B541C59D38b84E3Bc54e977200230A204Fe60",kh="https://api.helixa.xyz",Rh="https://base.drpc.org",Ye=["Junk","Marginal","Speculative","Operational","Preferred"],be=["#ef4444","#f59e0b","#eab308","#22c55e","#6eecd8"],Oh=[0,20,40,60,80],Ma=["function balanceOf(address) view returns (uint256)","function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)"],Ga=["function stake(uint256 agentId, uint256 amount)","function unstake(uint256 agentId, uint256 amount)","function claimRewards(uint256 agentId)","function vouch(uint256 agentId, uint256 voucherAgentId, uint256 amount)","function stakes(uint256) view returns (address staker, uint256 amount, uint256 stakedAt, uint8 credAtStake)","function effectiveStake(uint256) view returns (uint256)","function pendingRewards(uint256) view returns (uint256)","function totalStaked() view returns (uint256)","function totalEffectiveStake() view returns (uint256)","function getVouchCount(uint256) view returns (uint256)","function LOCK_PERIOD() view returns (uint256)","function EARLY_UNSTAKE_PENALTY_BPS() view returns (uint256)","function stakeThresholds(uint256) view returns (uint256)"],Sh=["function getCredScore(uint256) view returns (uint8)"],Us=new Bh(Rh),ye=new Zt($n,Ga,Us),_i=new Zt(Da,Ma,Us),Th=new Zt(Ch,Sh,Us);function we(r,t=2){const e=Yr(r),n=parseFloat(e);return n===0?"0":n<.01?"<0.01":n.toLocaleString(void 0,{maximumFractionDigits:t})}function Uh(r){return r>=80?Ye[4]:r>=60?Ye[3]:r>=40?Ye[2]:r>=20?Ye[1]:Ye[0]}function zr(r){return r>=80?be[4]:r>=60?be[3]:r>=40?be[2]:r>=20?be[1]:be[0]}function Hh(){const{login:r,authenticated:t,ready:e}=ja(),{wallets:n}=Ja(),s=n?.[0],i=s?.address,[o,a]=ht.useState(!0),[c,l]=ht.useState(null),[u,f]=ht.useState([]),[h,g]=ht.useState(0n),[y,p]=ht.useState(0n),[m,w]=ht.useState(null),[N,E]=ht.useState(""),[T,O]=ht.useState(""),[C,S]=ht.useState(""),[k,j]=ht.useState(""),[L,G]=ht.useState(""),[tt,st]=ht.useState(""),[Pt,x]=ht.useState(""),[v,H]=ht.useState("stake"),Z=ht.useCallback(async()=>{try{const[R,wt,et,Ft]=await Promise.all([ye.totalStaked(),ye.totalEffectiveStake(),ye.LOCK_PERIOD(),ye.EARLY_UNSTAKE_PENALTY_BPS()]);l({totalStaked:R,totalEffective:wt,lockPeriod:Number(et),penaltyBps:Number(Ft)})}catch(R){console.error("Failed to load global stats:",R)}},[]),K=ht.useCallback(async()=>{if(!i){a(!1);return}a(!0);try{const et=(await(await fetch(`${kh}/api/v2/agents?owner=${i}`)).json()).agents||[],[Ft,Yt]=await Promise.all([_i.balanceOf(i),_i.allowance(i,$n)]);g(Ft),p(Yt);const Ke=await Promise.all(et.map(async he=>{const Xt=he.tokenId||he.id;try{const[Ls,Ha,Qa,Va,za]=await Promise.all([ye.stakes(Xt),ye.effectiveStake(Xt),ye.pendingRewards(Xt),ye.getVouchCount(Xt),Th.getCredScore(Xt).catch(()=>0)]);return{tokenId:Number(Xt),name:he.name||`Agent #${Xt}`,credScore:Number(za),staked:Ls.amount||0n,stakedAt:Number(Ls.stakedAt||0),effectiveStake:Ha,pendingRewards:Qa,vouchCount:Number(Va)}}catch{return{tokenId:Number(Xt),name:he.name||`Agent #${Xt}`,credScore:he.credScore||0,staked:0n,stakedAt:0,effectiveStake:0n,pendingRewards:0n,vouchCount:0}}}));f(Ke),Ke.length>0&&m===null&&w(Ke[0].tokenId)}catch(R){console.error("Failed to load agents:",R)}a(!1)},[i,m]);ht.useEffect(()=>{Z()},[Z]),ht.useEffect(()=>{e&&K()},[e,i,K]);const Q=u.find(R=>R.tokenId===m);async function yt(){if(!s)throw new Error("No wallet");const R=await s.getEthereumProvider();return new Te(R).getSigner()}async function ft(R,wt){x(""),st(""),G(R);try{const et=await yt(),Yt=await new Zt($n,Ga,et)[R](...wt);st(Yt.hash),await Yt.wait(),await Promise.all([Z(),K()]),E(""),O(""),j(""),S("")}catch(et){x(et.reason||et.shortMessage||et.message||"Transaction failed")}G("")}async function Ut(){x(""),G("approve");try{const R=await yt(),et=await new Zt(Da,Ma,R).approve($n,li);st(et.hash),await et.wait(),p(li)}catch(R){throw x(R.reason||R.shortMessage||R.message||"Approval failed"),G(""),R}G("")}async function zt(){if(!m||!N)return;const R=Br(N);y<R&&await Ut(),await ft("stake",[m,R])}async function fe(){!m||!T||await ft("unstake",[m,Br(T)])}async function Pe(){m&&await ft("claimRewards",[m])}async function jt(){if(!m||!C||!k)return;const R=Br(k);y<R&&await Ut(),await ft("vouch",[parseInt(C),m,R])}const ve=c?Math.round(c.lockPeriod/86400):7,Lt=c?c.penaltyBps/100:10;return b.jsx("div",{className:"py-12",children:b.jsxs("div",{className:"container max-w-4xl",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h1",{className:"text-4xl font-heading font-bold mb-3",children:b.jsx("span",{className:"text-gradient",children:"Stake $CRED"})}),b.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Stake on agents you believe in. Higher cred = bigger boost. Earn rewards from protocol revenue."})]}),b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[b.jsx(Zn,{label:"Total Staked",value:c?`${we(c.totalStaked)} $CRED`:"—"}),b.jsx(Zn,{label:"Effective Stake",value:c?`${we(c.totalEffective)} $CRED`:"—"}),b.jsx(Zn,{label:"Lock Period",value:`${ve} days`}),b.jsx(Zn,{label:"Early Exit Fee",value:`${Lt}%`})]}),b.jsxs("div",{className:"card p-6 mb-8",children:[b.jsx("h3",{className:"text-lg font-heading font-semibold mb-4",children:"Cred Tiers & Boost Multipliers"}),b.jsx("div",{className:"grid grid-cols-5 gap-2",children:Ye.map((R,wt)=>b.jsxs("div",{className:"text-center p-3 rounded-lg",style:{background:`${be[wt]}15`,border:`1px solid ${be[wt]}30`},children:[b.jsxs("div",{className:"text-xs text-muted mb-1",children:[Oh[wt],"+ Cred"]}),b.jsx("div",{className:"font-bold",style:{color:be[wt]},children:R}),b.jsxs("div",{className:"text-xs text-muted mt-1",children:[["0.5x","0.75x","1x","1.5x","2x"][wt]," boost"]})]},R))})]}),t?o?b.jsx("div",{className:"flex items-center justify-center py-20",children:b.jsx("div",{className:"spinner",style:{width:40,height:40}})}):u.length===0?b.jsxs("div",{className:"card p-12 text-center",children:[b.jsx("div",{className:"text-5xl mb-4",children:"🤖"}),b.jsx("h2",{className:"text-xl font-heading font-semibold mb-3",children:"No Agents Found"}),b.jsx("p",{className:"text-muted mb-6",children:"You need a Helixa agent to stake. Mint one first!"}),b.jsx("a",{href:"/mint",className:"btn btn-primary",children:"Mint Agent"})]}):b.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[b.jsx("div",{className:"md:col-span-1",children:b.jsxs("div",{className:"card p-4",children:[b.jsx("h3",{className:"text-sm font-semibold text-muted mb-3 uppercase tracking-wider",children:"Your Agents"}),b.jsx("div",{className:"space-y-2",children:u.map(R=>b.jsx("button",{onClick:()=>w(R.tokenId),className:`w-full text-left p-3 rounded-lg transition-all ${m===R.tokenId?"bg-mint/10 border border-mint/30":"hover:bg-white/5 border border-transparent"}`,children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("div",{className:"font-semibold text-sm",children:R.name}),b.jsxs("div",{className:"text-xs text-muted",children:["#",R.tokenId]})]}),b.jsxs("div",{className:"text-right",children:[b.jsxs("div",{className:"text-xs font-mono",style:{color:zr(R.credScore)},children:[R.credScore," Cred"]}),R.staked>0n&&b.jsxs("div",{className:"text-xs text-muted",children:[we(R.staked)," staked"]})]})]})},R.tokenId))}),b.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:b.jsxs("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-muted",children:"$CRED Balance"}),b.jsx("span",{className:"font-mono",children:we(h)})]})})]})}),b.jsx("div",{className:"md:col-span-2",children:Q&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"card p-5 mb-4",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-xl font-heading font-bold",children:Q.name}),b.jsxs("span",{className:"text-sm px-2 py-0.5 rounded-full font-semibold",style:{color:zr(Q.credScore),background:`${zr(Q.credScore)}20`},children:[Uh(Q.credScore)," · ",Q.credScore," Cred"]})]}),b.jsxs("div",{className:"text-right",children:[b.jsx("div",{className:"text-2xl font-heading font-bold",children:we(Q.effectiveStake)}),b.jsx("div",{className:"text-xs text-muted",children:"Effective Stake"})]})]}),b.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[b.jsx(jr,{label:"Staked",value:`${we(Q.staked)} $CRED`}),b.jsx(jr,{label:"Pending Rewards",value:`${we(Q.pendingRewards)} $CRED`}),b.jsx(jr,{label:"Vouches",value:String(Q.vouchCount)})]})]}),b.jsxs("div",{className:"card",children:[b.jsx("div",{className:"flex border-b border-white/10",children:["stake","unstake","vouch","rewards"].map(R=>b.jsx("button",{onClick:()=>{H(R),x(""),st("")},className:`flex-1 py-3 text-sm font-semibold uppercase tracking-wider transition-all ${v===R?"text-mint border-b-2 border-mint":"text-muted hover:text-white"}`,children:R==="rewards"?"Claim":R},R))}),b.jsxs("div",{className:"p-5",children:[v==="stake"&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm text-muted mb-2",children:"Amount to stake"}),b.jsxs("div",{className:"flex gap-2 mb-3",children:[b.jsx("input",{type:"number",placeholder:"0.00",value:N,onChange:R=>E(R.target.value),className:"input flex-1"}),b.jsx("button",{onClick:()=>E(Yr(h)),className:"btn btn-secondary text-xs px-3",children:"MAX"})]}),b.jsxs("p",{className:"text-xs text-muted mb-4",children:[ve,"-day lock period. ",Lt,"% penalty for early unstake.",Q.credScore>=60&&" Your high cred gives you a boost multiplier! 🚀"]}),b.jsx("button",{onClick:zt,disabled:!!L||!N||parseFloat(N)<=0,className:"btn btn-primary w-full",children:L==="approve"?"Approving...":L==="stake"?"Staking...":"Stake $CRED"})]}),v==="unstake"&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm text-muted mb-2",children:"Amount to unstake"}),b.jsxs("div",{className:"flex gap-2 mb-3",children:[b.jsx("input",{type:"number",placeholder:"0.00",value:T,onChange:R=>O(R.target.value),className:"input flex-1"}),b.jsx("button",{onClick:()=>O(Yr(Q.staked)),className:"btn btn-secondary text-xs px-3",children:"MAX"})]}),Q.stakedAt>0&&b.jsx(Lh,{stakedAt:Q.stakedAt,lockDays:ve,penaltyPct:Lt}),b.jsx("button",{onClick:fe,disabled:!!L||!T||parseFloat(T)<=0||Q.staked===0n,className:"btn btn-primary w-full",children:L==="unstake"?"Unstaking...":"Unstake"})]}),v==="vouch"&&b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted mb-4",children:"Vouch for another agent by staking $CRED on them. Your cred score at time of vouch is recorded."}),b.jsx("label",{className:"block text-sm text-muted mb-2",children:"Agent ID to vouch for"}),b.jsx("input",{type:"number",placeholder:"e.g. 42",value:C,onChange:R=>S(R.target.value),className:"input w-full mb-3"}),b.jsx("label",{className:"block text-sm text-muted mb-2",children:"Amount"}),b.jsx("input",{type:"number",placeholder:"0.00",value:k,onChange:R=>j(R.target.value),className:"input w-full mb-4"}),b.jsx("button",{onClick:jt,disabled:!!L||!C||!k,className:"btn btn-primary w-full",children:L==="vouch"?"Vouching...":"Vouch"})]}),v==="rewards"&&b.jsxs("div",{className:"text-center py-4",children:[b.jsxs("div",{className:"text-3xl font-heading font-bold mb-2",children:[we(Q.pendingRewards)," ",b.jsx("span",{className:"text-lg text-muted",children:"$CRED"})]}),b.jsx("p",{className:"text-sm text-muted mb-4",children:"Pending rewards from protocol revenue"}),b.jsx("button",{onClick:Pe,disabled:!!L||Q.pendingRewards===0n,className:"btn btn-primary",children:L==="claimRewards"?"Claiming...":"Claim Rewards"})]}),Pt&&b.jsx("div",{className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm",children:Pt}),tt&&!Pt&&b.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-mint/10 border border-mint/30 text-sm",children:["✅ TX: ",b.jsxs("a",{href:`https://basescan.org/tx/${tt}`,target:"_blank",rel:"noopener",className:"text-mint underline",children:[tt.slice(0,10),"...",tt.slice(-8)]})]})]})]})]})})]}):b.jsxs("div",{className:"card p-12 text-center",children:[b.jsx("div",{className:"text-5xl mb-4",children:"🔒"}),b.jsx("h2",{className:"text-xl font-heading font-semibold mb-3",children:"Connect to Stake"}),b.jsx("p",{className:"text-muted mb-6",children:"Connect your wallet to stake $CRED on your agents."}),b.jsx("button",{onClick:r,className:"btn btn-primary text-lg px-8 py-3",children:"Connect Wallet"})]})]})})}function Zn({label:r,value:t}){return b.jsxs("div",{className:"card p-4 text-center",children:[b.jsx("div",{className:"text-xs text-muted uppercase tracking-wider mb-1",children:r}),b.jsx("div",{className:"font-heading font-bold text-lg",children:t})]})}function jr({label:r,value:t}){return b.jsxs("div",{className:"bg-white/5 rounded-lg p-2 text-center",children:[b.jsx("div",{className:"text-xs text-muted",children:r}),b.jsx("div",{className:"font-mono text-sm font-semibold",children:t})]})}function Lh({stakedAt:r,lockDays:t,penaltyPct:e}){const n=Math.floor(Date.now()/1e3),s=r+t*86400;if(n>=s)return b.jsx("p",{className:"text-xs text-green-400 mb-4",children:"✅ Lock period complete — no penalty."});const i=Math.ceil((s-n)/86400);return b.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30 text-yellow-400 text-sm mb-4",children:["⚠️ ",i," day",i!==1?"s":""," left in lock period. Early unstake incurs ",e,"% penalty."]})}export{Hh as Stake};
