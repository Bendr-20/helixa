import{j as e,t as V}from"./vendor-wallet-iWeBopzN.js";import{E as L,l as p,s as Y,x as v,c as T,d as g,V as D,b as f,w as b,F as B,T as E,p as F,u as H}from"./PinInput-3SLvbnQa-CXkXC-hN.js";import{F as q}from"./FingerPrintIcon-CQ2UnhCX.js";import{F as I}from"./PhoneIcon-DQtHTqgM.js";import{F as R}from"./ShieldCheckIcon-CzN8v7s7.js";import{T as y,m as z,g as m,$ as S}from"./ModalHeader-D8-mhjp4-B2mPQY48.js";import{n as J}from"./ScreenLayout-DTmQLGPf-XyHj3VpN.js";import{I as C,aU as K,r as N,bj as j,a$ as u,ck as O,ch as U,ci as W,n as X,cl as G,cm as Q,c as Z}from"./index-CPsDcot4.js";import{r as a}from"./vendor-react-NLnOsXgy.js";import{F as _}from"./ExclamationTriangleIcon-C_T-rHXN.js";import{i as ee}from"./StackedContainer-B2vaEl56-IGcStG3m.js";import{c as re}from"./useGetTokenPrice-BPBpM07F-kgQR1tCx.js";import{$ as se}from"./TransactionDetails-BurRo8R0-J6NuLJ_O.js";function ne({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const oe=a.forwardRef(ne),ye=({handleClose:s,mfaMethods:r,onSelect:n})=>e.jsxs(J,{title:"Verify your identity",subtitle:"Choose a verification method",icon:R,iconVariant:"subtle",onClose:s,showClose:!0,watermark:!0,children:[e.jsxs(H,{children:[r.includes("totp")&&e.jsxs(j,{onClick:()=>n("totp"),children:[e.jsx(u,{children:e.jsx(B,{})}),"Authenticator app"]},"totp"),r.includes("sms")&&e.jsxs(j,{onClick:()=>n("sms"),children:[e.jsx(u,{children:e.jsx(I,{})}),"SMS"]},"sms"),r.includes("passkey")&&e.jsxs(j,{onClick:()=>n("passkey"),children:[e.jsx(u,{children:e.jsx(q,{})}),"Passkey"]},"passkey")]}),e.jsx(m,{})]}),k=({pendingTransaction:s})=>{let{wallets:r}=X(),{walletProxy:n,rpcConfig:o,chains:i,appId:c,nativeTokenSymbolForChainId:l}=C(),[t,$]=a.useState(null),[d,A]=a.useState(s),{tokenPrice:M}=re(d.chainId),P=l(s.chainId)||"ETH",h=a.useMemo((()=>r.find((x=>x.walletClientType==="privy"))),[r]);return a.useEffect((()=>{(async function(){if(!n||!h)return d;let x=G(d.chainId,i,o,{appId:c}),w=await Q(d,x,h.address);return $(V(BigInt(w.gas??0))),w})().then(A).catch(console.error)}),[n]),h?e.jsx(te,{children:e.jsx(se,{from:h.address,to:d.to,txn:d,gas:t??void 0,tokenPrice:M,tokenSymbol:P})}):null};let te=Z.div`
  width: 100%;
  padding: 1rem 0;
`;const ke=({hasBlockingError:s,error:r,onClose:n,onBack:o,handleSubmit:i,account:c,submitSuccess:l})=>{let{pendingTransaction:t}=C();return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:n},"header"),e.jsx(ee,{children:e.jsxs("div",{children:[e.jsx(K,{success:l,fail:!!r}),e.jsx(r?_:L,{style:{width:"38px",height:"38px"}})]})}),e.jsx(p,{style:{marginTop:"1rem"},children:"Verifying with passkey"}),e.jsxs(Y,{children:[e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(R,{})}),"Approve this action using your touch, face, PIN, or hardware key."]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(oe,{})}),"You last added a passkey on"," ",c?.firstVerifiedAt?.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),"."]})]}),t&&e.jsx(g,{children:e.jsx(k,{pendingTransaction:t})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(D,{style:{marginTop:"1.25rem"},children:r.message}),e.jsx(z,{disabled:s,onClick:i,style:{margin:"1.25rem auto 0"},children:"Try again"})]}),o&&e.jsx(f,{style:{marginTop:"1rem"},onClick:o,children:"Choose another method"}),e.jsx(m,{})]})},Ce=({selectedMethod:s,submitSuccess:r,hasBlockingError:n,onClose:o,onBack:i,handleSubmitCode:c})=>{let l=N(),{pendingTransaction:t}=C();switch(s){case"sms":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(b,{style:{marginBottom:"1.5rem"},children:e.jsx(I,{})}),e.jsx(p,{children:"Enter verification code"}),e.jsxs(g,{children:[e.jsx(E,{success:r,disabled:n,onChange:c}),e.jsxs(F,{children:["To continue, please enter the 6-digit code sent to your ",e.jsx("strong",{children:"mobile device"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(f,{theme:l?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});case"totp":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(b,{style:{marginBottom:"1.5rem"},children:e.jsx(B,{})}),e.jsx(p,{children:"Enter verification code"}),e.jsxs(g,{children:[e.jsx(E,{success:r,disabled:n,onChange:c}),e.jsxs(F,{children:["To continue, please enter the 6-digit code generated from your"," ",e.jsx("strong",{children:"authenticator app"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(f,{theme:l?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});default:return null}},we=s=>O(s)?{isBlocking:!0,error:Error("You have exceeded the maximum number of attempts. Please close this window and try again in 10 seconds.")}:U(s)?{isBlocking:!1,error:Error("The code you entered is not valid")}:W(s)?{isBlocking:!0,error:Error("You have exceeded the time limit for code entry. Please try again in 30 seconds.")}:(console.error(s),{isBlocking:!1,error:Error("Something went wrong.")});export{ke as K,Ce as R,we as X,ye as q};
