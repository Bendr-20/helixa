import{j as e}from"./vendor-wallet-iWeBopzN.js";import{r as m,L as x,R as b}from"./vendor-react-NLnOsXgy.js";import{A as j}from"./AuraPreview-BsLrNM_O.js";import{d as u,a as v}from"./useAgents-CTmm5YFU.js";import{m as c}from"./proxy-8kKveTum.js";import"./constants-CwOB-W5i.js";const h={initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5,ease:"easeOut"}};function p(r){return r>=70?{label:"Legendary",className:"legendary"}:r>=50?{label:"Epic",className:"epic"}:r>=25?{label:"Rare",className:"rare"}:{label:"Common",className:"common"}}const N=b.memo(function({agent:n,rank:l,sortBy:o,auraData:i}){const d=p(n.credScore),t=a=>a===1?"rank-gold":a===2?"rank-silver":a===3?"rank-bronze":"rank-normal";return e.jsxs(x,{to:`/agent/${n.tokenId}`,className:`lb-board-row ${l<=3?"top-three":""}`,children:[e.jsx("div",{className:`lb-rank ${t(l)}`,children:l}),e.jsxs("div",{className:"lb-agent-info",children:[e.jsx("div",{className:"lb-agent-aura",children:e.jsx(j,{agentData:i,size:42})}),e.jsxs("div",{children:[e.jsx("div",{className:"lb-agent-name",children:n.name}),e.jsxs("div",{className:"lb-agent-meta",children:["#",n.tokenId,n.verified&&e.jsx("span",{className:"lb-verified",children:"Verified"}),n.soulbound&&e.jsx("span",{className:"lb-soulbound",children:"Soulbound"})]})]})]}),e.jsx("div",{className:"lb-framework",children:e.jsx("span",{className:"lb-framework-badge",children:n.framework})}),e.jsx("div",{className:"lb-score",children:o==="credScore"?n.credScore:n.points.toLocaleString()}),e.jsx("div",{className:"lb-rarity",children:e.jsx("span",{className:`lb-rarity-badge ${d.className}`,children:d.label})})]})});function A(){const[r,n]=m.useState("credScore"),{data:l,isLoading:o}=u(),{data:i}=v(),d=m.useMemo(()=>{if(!l)return new Map;const a=new Map;for(const s of l)a.set(s.tokenId,{name:s.name,agentAddress:s.agentAddress||s.owner,framework:s.framework,points:s.points,traitCount:s.traits?.length||0,mutationCount:s.mutationCount,soulbound:s.soulbound,communicationStyle:s.personality?.communicationStyle,riskTolerance:s.personality?.riskTolerance,autonomyLevel:s.personality?.autonomyLevel,quirks:s.personality?.quirks,humor:s.personality?.humor,values:s.personality?.values,credScore:s.credScore});return a},[l]),t=m.useMemo(()=>l?[...l].filter(a=>a.name&&a.name.length>0).sort((a,s)=>s[r]-a[r]).slice(0,100):[],[l,r]);return e.jsx("div",{className:"leaderboard-page",children:e.jsxs("div",{className:"lb-container",children:[e.jsxs(c.div,{...h,className:"lb-header",children:[e.jsx("h1",{children:e.jsx("span",{className:"text-gradient",children:"Leaderboard"})}),e.jsx("p",{children:"Top agents ranked by reputation and activity"})]}),e.jsxs(c.div,{...h,transition:{duration:.5,delay:.1},className:"lb-stats-row",children:[e.jsxs("div",{className:"lb-mini-stat",children:[e.jsx("div",{className:"val purple",children:i?.totalAgents??"—"}),e.jsx("div",{className:"lbl",children:"Total Agents"})]}),e.jsxs("div",{className:"lb-mini-stat",children:[e.jsx("div",{className:"val gold",children:i?.totalCredScore?.toLocaleString()??"—"}),e.jsx("div",{className:"lbl",children:"Total Cred"})]}),e.jsxs("div",{className:"lb-mini-stat",children:[e.jsx("div",{className:"val blue",children:i?.frameworks??"—"}),e.jsx("div",{className:"lbl",children:"Frameworks"})]}),e.jsxs("div",{className:"lb-mini-stat",children:[e.jsx("div",{className:"val green",children:i?.soulboundCount??"—"}),e.jsx("div",{className:"lbl",children:"Soulbound"})]})]}),e.jsx(c.div,{...h,transition:{duration:.5,delay:.15},className:"lb-sort-bar",children:e.jsxs("div",{className:"lb-toggle-switch",children:[e.jsx(c.div,{className:"lb-toggle-indicator",animate:{x:r==="credScore"?0:"100%"},transition:{type:"spring",stiffness:400,damping:30}}),e.jsx("button",{onClick:()=>n("credScore"),className:`lb-toggle-btn ${r==="credScore"?"active":""}`,children:"By Cred Score"}),e.jsx("button",{onClick:()=>n("points"),className:`lb-toggle-btn ${r==="points"?"active":""}`,children:"By Points"})]})}),o?e.jsxs("div",{className:"lb-board",children:[e.jsxs("div",{className:"lb-board-header",children:[e.jsx("span",{children:"Rank"}),e.jsx("span",{children:"Agent"}),e.jsx("span",{children:"Framework"}),e.jsx("span",{className:"text-right",children:"Score"}),e.jsx("span",{className:"text-right",children:"Rarity"})]}),Array.from({length:10}).map((a,s)=>e.jsxs("div",{className:"lb-board-row",children:[e.jsx("div",{className:"lb-rank",children:e.jsx("div",{className:"skeleton-box w-8 h-6"})}),e.jsxs("div",{className:"lb-agent-info",children:[e.jsx("div",{className:"skeleton-box w-10 h-10 rounded-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"skeleton-box w-24 h-4 mb-1"}),e.jsx("div",{className:"skeleton-box w-16 h-3"})]})]}),e.jsx("div",{children:e.jsx("div",{className:"skeleton-box w-16 h-5"})}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"skeleton-box w-10 h-6 ml-auto"})}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"skeleton-box w-16 h-5 ml-auto"})})]},s))]}):t.length>0?e.jsxs("div",{className:"lb-board",children:[e.jsxs("div",{className:"lb-board-header",children:[e.jsx("span",{children:"Rank"}),e.jsx("span",{children:"Agent"}),e.jsx("span",{children:"Framework"}),e.jsx("span",{children:r==="credScore"?"Cred":"Points"}),e.jsx("span",{children:"Rarity"})]}),t.map((a,s)=>e.jsx(N,{agent:a,rank:s+1,sortBy:r,auraData:d.get(a.tokenId)},a.tokenId))]}):e.jsxs("div",{className:"lb-empty",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:.3},children:[e.jsx("path",{d:"M12 8v4l3 3"}),e.jsx("circle",{cx:"12",cy:"12",r:"10"})]}),e.jsx("h3",{children:"No Agents Found"}),e.jsx("p",{children:"No agents have been minted yet."}),e.jsx(x,{to:"/mint",className:"btn btn-primary",children:"Mint First Aura"})]}),!o&&t.length>=100&&e.jsx("div",{className:"lb-footer-note",children:"Showing top 100 agents"})]})})}export{A as Leaderboard};
