import{j as e}from"./vendor-wallet-iWeBopzN.js";import{r as i}from"./vendor-react-NLnOsXgy.js";import{b as A,I as P,a as T,aA as I,bd as L,r as M,i as $,E as D,bp as U,c as R,a$ as N}from"./index-GHhzE5Jj.js";import{V as W,m as F}from"./ModalHeader-D8-mhjp4-CX7GgCR8.js";import{n as V}from"./Chip-D2-wZOHJ-BAkZVwIB.js";import{t as _,a as q}from"./EmailInputForm-Dgoii4vf-DnFxtiWU.js";import{e as K}from"./ErrorMessage-D8VaAP5m-BEUIQw1p.js";import{M as O}from"./mail-C8WLTF0W.js";const re=i.forwardRef(((l,S)=>{let[a,x]=i.useState(l.defaultValue||""),[t,u]=i.useState(""),[o,p]=i.useState(!1),{authenticated:E}=A(),{initLoginWithEmail:g}=P(),{navigate:s,setModalData:c,currentScreen:b,data:n}=T(),{enabled:y,token:h}=I(),[j,k]=i.useState(!1),{accountType:v}=L(),w=M();i.useEffect((()=>{!a&&w.disablePlusEmails&&n?.inlineError?.error instanceof $&&n?.inlineError?.error.privyErrorCode===D.DISALLOWED_PLUS_EMAIL&&!t&&u("Please enter a valid email address without a '+'."),t&&u("")}),[a]);let C=U(a),f=o||!C,d=()=>{var r;c({login:n?.login,inlineError:void 0}),!y||h||E?(r=h,p(!0),g({email:a,captchaToken:r,disableSignup:n?.login?.disableSignup,withPrivyUi:!0}).then((()=>{s("AwaitingPasswordlessCodeScreen")})).catch((m=>{c({errorModalData:{error:m,previousScreen:b||"LandingScreen"}}),s("ErrorScreen")})).finally((()=>{p(!1)}))):(c({captchaModalData:{callback:m=>g({email:a,captchaToken:m,withPrivyUi:!0}),userIntentRequired:!1,onSuccessNavigateTo:"AwaitingPasswordlessCodeScreen",onErrorNavigateTo:"ErrorScreen"}}),s("CaptchaScreen"))};return e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[t&&e.jsx(K,{style:{display:"block",marginTop:"0.25rem",textAlign:"left"},children:t}),e.jsxs(H,{stacked:l.stacked,$error:!!t,children:[e.jsx(z,{children:e.jsx(O,{})}),e.jsx("input",{ref:S,id:"email-input",className:"login-method-button",type:"email",placeholder:"your@email.com",onFocus:()=>k(!0),onChange:r=>x(r.target.value),onKeyUp:r=>{r.key==="Enter"&&d()},value:a,autoComplete:"email"}),v!=="email"||j?l.stacked?e.jsx("span",{}):e.jsx(W,{isSubmitting:o,onClick:d,disabled:f,children:"Submit"}):e.jsx(V,{color:"gray",children:"Recent"})]})]}),l.stacked?e.jsx(F,{loadingText:null,loading:o,disabled:f,onClick:d,style:{width:"100%"},children:"Submit"}):null]})}));let B=_,H=q,z=R(N)`
  display: inline-flex;
`;export{re as C};
